[
    {
        "id": "51e88f22.62d4a",
        "type": "tab",
        "label": "Test",
        "disabled": true,
        "info": ""
    },
    {
        "id": "b7f67da0.fbf1",
        "type": "tab",
        "label": "Start",
        "disabled": false,
        "info": ""
    },
    {
        "id": "df0dd648.98daa8",
        "type": "tab",
        "label": "SMHI 1.1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "358baec9.c8b902",
        "type": "tab",
        "label": "Indoor 1.1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "ae9d7ce8.0991c",
        "type": "tab",
        "label": "Airflow 1.1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "960078e.e3e6d88",
        "type": "tab",
        "label": "Price 1.1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "fa4686d6.c21688",
        "type": "tab",
        "label": "Hotwater 1.1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "eee76599.b5f0d8",
        "type": "tab",
        "label": "RMU 1.1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "27236b7a.3c2274",
        "type": "tab",
        "label": "Diagnostic 1.1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "65e6bc5.05f2644",
        "type": "tab",
        "label": "Graph 1.1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "64327e50.8f365",
        "type": "subflow",
        "name": "Skrivläge",
        "info": "",
        "category": "output",
        "in": [
            {
                "x": 193,
                "y": 539,
                "wires": [
                    {
                        "id": "24d4f99f.449346"
                    }
                ]
            }
        ],
        "out": [],
        "icon": "node-red/alert.png"
    },
    {
        "id": "c191a5d.5d76258",
        "type": "subflow",
        "name": "Update core config",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 70,
                "y": 77,
                "wires": [
                    {
                        "id": "eb6f8564.c5a668"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 965,
                "y": 161,
                "wires": [
                    {
                        "id": "9110855e.8bfd98",
                        "port": 0
                    }
                ]
            },
            {
                "x": 965,
                "y": 217,
                "wires": [
                    {
                        "id": "9110855e.8bfd98",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "outputLabels": [
            "Node Config",
            "Config"
        ]
    },
    {
        "id": "f947788.96a2488",
        "type": "subflow",
        "name": "Update labels",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 70,
                "y": 77,
                "wires": [
                    {
                        "id": "70fe9173.84e56"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 650,
                "y": 77,
                "wires": [
                    {
                        "id": "cc633084.d7567",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Name",
                "type": "str",
                "value": ""
            }
        ],
        "color": "#DDAA99"
    },
    {
        "id": "dd8aa486.3012f8",
        "type": "subflow",
        "name": "Get info",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 55,
                "y": 70,
                "wires": [
                    {
                        "id": "c75ca11e.e1f13"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 566,
                "y": 77,
                "wires": [
                    {
                        "id": "93cda2e0.58153",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Name",
                "type": "str",
                "value": ""
            }
        ],
        "color": "#DDAA99"
    },
    {
        "id": "d7f6b34d.d13d6",
        "type": "mqtt-broker",
        "z": "",
        "name": "NibePi",
        "broker": "127.0.0.1",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "6aa61182.b42ed",
        "type": "ui_tab",
        "z": 0,
        "name": "Inställningar",
        "icon": "settings",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "74cc47a5.9ee208",
        "type": "ui_tab",
        "z": 0,
        "name": "Prognosreglering",
        "icon": "wi-wu-sunny",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "72d88fa0.a760e",
        "type": "ui_tab",
        "z": 0,
        "name": "Inomhusreglering",
        "icon": "home",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "57a2c311.41401c",
        "type": "ui_tab",
        "z": "",
        "name": "Automatiskt luftflöde",
        "icon": "wi-darksky-tornado",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ad3904c7.ceae48",
        "type": "ui_tab",
        "z": 0,
        "name": "Elprisreglering",
        "icon": "flash_on",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "9efe2aac.f80568",
        "type": "ui_tab",
        "z": 0,
        "name": "List",
        "icon": "dashboard",
        "order": 7
    },
    {
        "id": "d814a7db.5cdc38",
        "type": "ui_group",
        "z": "",
        "name": "Uppdateringar",
        "tab": "6aa61182.b42ed",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "4f8b35d1.5c8fec",
        "type": "ui_group",
        "z": "",
        "name": "Registerhantering",
        "tab": "1dc0b5a5.8e56aa",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "810e862f.c36438",
        "type": "ui_group",
        "z": 0,
        "name": "SMHI",
        "tab": "74cc47a5.9ee208",
        "order": 3,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "a2cfe148.70708",
        "type": "ui_group",
        "z": "",
        "name": "Inomhusreglering S1",
        "tab": "72d88fa0.a760e",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "ad7a33f3.24adf",
        "type": "ui_group",
        "z": "",
        "name": "Automatisk lufthastighet",
        "tab": "57a2c311.41401c",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "90803197.41c34",
        "type": "ui_group",
        "z": "",
        "name": "Graf S1",
        "tab": "ad3904c7.ceae48",
        "order": 5,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "53b18b65.7718c4",
        "type": "ui_group",
        "z": "",
        "name": "Temperaturgraf",
        "tab": "72d88fa0.a760e",
        "order": 4,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "4a7ab836.172ae8",
        "type": "ui_group",
        "z": "",
        "name": "Information",
        "tab": "6aa61182.b42ed",
        "order": 8,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "72d428b5.3b0eb8",
        "type": "ui_group",
        "z": 0,
        "name": "Default",
        "tab": "9efe2aac.f80568",
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "7e910a08.c6c984",
        "type": "ui_group",
        "z": "",
        "name": "Prognosreglering S1",
        "tab": "74cc47a5.9ee208",
        "order": 2,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "b561c5cd.249a58",
        "type": "ui_group",
        "z": "",
        "name": "Inställningar Värme",
        "tab": "ad3904c7.ceae48",
        "order": 3,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "2e9c7d75.ee6312",
        "type": "ui_group",
        "z": "",
        "name": "Inställningar Varmvatten",
        "tab": "ad3904c7.ceae48",
        "order": 4,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "f481a5f0.f9f1c8",
        "type": "ui_group",
        "z": "",
        "name": "Inställningar",
        "tab": "ad3904c7.ceae48",
        "order": 2,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "e13feb70.134618",
        "type": "ui_base",
        "z": 0,
        "theme": {
            "name": "theme-custom",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#cd0101",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Nibe",
                "default": "#4B7930",
                "baseColor": "#a80202",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#4B7930",
                    "value": "#a80202",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#a80202",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#ffffff",
                    "edited": true
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": true
                },
                "group-textColor": {
                    "value": "#f40303",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": true
                },
                "widget-textColor": {
                    "value": "#000000",
                    "edited": true
                },
                "widget-backgroundColor": {
                    "value": "#a80202",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": true
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "NibePi",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "YYYY/MM/DD",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "d342c0ba.f2418",
        "type": "ui_group",
        "z": "",
        "name": "Solfaktor",
        "tab": "74cc47a5.9ee208",
        "order": 4,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "455ba55e.e91e8c",
        "type": "ui_group",
        "z": "",
        "name": "Vindfaktor",
        "tab": "74cc47a5.9ee208",
        "order": 5,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "1409f0ed.f2d6cf",
        "type": "ui_group",
        "z": 0,
        "name": "Automatisk lufthastighet",
        "tab": "88b70b91.66f338",
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "88b70b91.66f338",
        "type": "ui_tab",
        "z": 0,
        "name": "Lufthastighet",
        "icon": "wi-darksky-tornado",
        "order": 8,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "844659a2.8d8508",
        "type": "nibe-config",
        "z": "",
        "mqtt": true,
        "mqtt_discovery": true,
        "mqtt_topic": "nibe/modbus/",
        "mqtt_host": "127.0.0.1",
        "mqtt_port": "1883",
        "mqtt_user": "",
        "mqtt_pass": "",
        "connection_series": "fSeries",
        "connection": "serial",
        "serial_port": "/dev/ttyAMA0",
        "tcp_server": "",
        "tcp_port": ""
    },
    {
        "id": "b75c3bdd.9e0ae8",
        "type": "ui_tab",
        "z": "",
        "name": "Startsida",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "a8bf2b6e.6abc18",
        "type": "ui_group",
        "z": "",
        "name": "Husinformation",
        "tab": "b75c3bdd.9e0ae8",
        "order": 4,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "197ce413.27432c",
        "type": "ui_group",
        "z": "",
        "name": "Prognosreglering S2",
        "tab": "74cc47a5.9ee208",
        "order": 6,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "794cdfce.3f74f",
        "type": "ui_group",
        "z": "",
        "name": "Default",
        "tab": "ecddb018.0e4f3",
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "ecddb018.0e4f3",
        "type": "ui_tab",
        "z": "",
        "name": "List",
        "icon": "dashboard",
        "order": 9
    },
    {
        "id": "1dc0b5a5.8e56aa",
        "type": "ui_tab",
        "z": "",
        "name": "Datahantering",
        "icon": "dashboard",
        "order": 10,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "bd199d65.157fc",
        "type": "ui_group",
        "z": "",
        "name": "Data",
        "tab": "1dc0b5a5.8e56aa",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "261b1f51.5c37e",
        "type": "ui_group",
        "z": "",
        "name": "Graf",
        "tab": "1dc0b5a5.8e56aa",
        "disp": false,
        "width": "18",
        "collapse": false
    },
    {
        "id": "33ed6fb8.2f3ce",
        "type": "ui_group",
        "z": "",
        "name": "Inställningar",
        "tab": "74cc47a5.9ee208",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "fb207b28.da59b8",
        "type": "ui_group",
        "z": "",
        "name": "Extra givare",
        "tab": "6aa61182.b42ed",
        "order": 2,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "95b0af9c.89089",
        "type": "ui_group",
        "z": "",
        "name": "Inställningar",
        "tab": "72d88fa0.a760e",
        "order": 2,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "70965431.b26cbc",
        "type": "ui_group",
        "z": "",
        "name": "Data",
        "tab": "72d88fa0.a760e",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "1b40f24f.7b6d9e",
        "type": "ui_group",
        "z": "",
        "name": "Elprisreglering S1",
        "tab": "ad3904c7.ceae48",
        "order": 6,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "94305680.d32c48",
        "type": "ui_group",
        "z": "",
        "name": "Elprisreglering S2",
        "tab": "ad3904c7.ceae48",
        "order": 7,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "e6946a7.5e1e698",
        "type": "ui_group",
        "z": "",
        "name": "Information",
        "tab": "ad3904c7.ceae48",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "6ee1e12a.a6f04",
        "type": "ui_group",
        "z": "",
        "name": "Inomhusreglering S2",
        "tab": "72d88fa0.a760e",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "da3c0db0.9c6aa",
        "type": "ui_group",
        "z": "",
        "name": "System",
        "tab": "6aa61182.b42ed",
        "order": 9,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "605e2041.0137e",
        "type": "ui_group",
        "z": "",
        "name": "Värmekurva S1",
        "tab": "6aa61182.b42ed",
        "order": 10,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "ea24545a.5d7038",
        "type": "ui_group",
        "z": "",
        "name": "Värmekurva S2",
        "tab": "6aa61182.b42ed",
        "order": 11,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "958d2405.84c788",
        "type": "ui_tab",
        "z": "",
        "name": "Varmvattenreglering",
        "icon": "hot_tub",
        "order": 11,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "bcb5f9e4.9bc858",
        "type": "ui_group",
        "z": "",
        "name": "Automatisk Tillfällig Lyx",
        "tab": "958d2405.84c788",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "38b6d907.520796",
        "type": "ui_group",
        "z": "",
        "name": "Varmvatten Prioritet",
        "tab": "958d2405.84c788",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "97526682.5406d8",
        "type": "ui_group",
        "z": "",
        "name": "Loggning",
        "tab": "6aa61182.b42ed",
        "order": 3,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "ef983ace.21f138",
        "type": "ui_group",
        "z": "",
        "name": "RMU40 S1",
        "tab": "6aa61182.b42ed",
        "order": 13,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "32b15b25.77ef94",
        "type": "ui_group",
        "z": "",
        "name": "RMU40 S2",
        "tab": "6aa61182.b42ed",
        "order": 14,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "1d61b1b5.3ea93e",
        "type": "ui_group",
        "z": "",
        "name": "Kompressorförbrukning",
        "tab": "b75c3bdd.9e0ae8",
        "order": 5,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "fe94277c.dcd118",
        "type": "ui_group",
        "z": "",
        "name": "Avancerat",
        "tab": "6aa61182.b42ed",
        "order": 5,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "723a0250.fd7dcc",
        "type": "ui_group",
        "z": "",
        "name": "MQTT",
        "tab": "6aa61182.b42ed",
        "order": 6,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "6dbad083.a9946",
        "type": "ui_group",
        "z": "",
        "name": "Förbrukning strömavkännare",
        "tab": "b75c3bdd.9e0ae8",
        "order": 6,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "ab2b8fca.17eca",
        "type": "ui_group",
        "z": "",
        "name": "Graf S2",
        "tab": "ad3904c7.ceae48",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "b7178cee.09314",
        "type": "ui_group",
        "z": "",
        "name": "Sänk luftflöde",
        "tab": "57a2c311.41401c",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "2ed5a2d7.ca08ce",
        "type": "ui_group",
        "z": "",
        "name": "Forcering luftflöde",
        "tab": "57a2c311.41401c",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "7c351fda.75426",
        "type": "ui_group",
        "z": "",
        "name": "Filterrengöring",
        "tab": "57a2c311.41401c",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "4aaf21c9.38fb8",
        "type": "ui_group",
        "z": "",
        "name": "Data Export",
        "tab": "f3ab33ed.96488",
        "disp": true,
        "width": "12"
    },
    {
        "id": "f3ab33ed.96488",
        "type": "ui_tab",
        "z": "",
        "name": "Dashboard",
        "icon": "dashboard",
        "order": 1
    },
    {
        "id": "db563368.2a2e6",
        "type": "ui_group",
        "z": "",
        "name": "Default",
        "tab": "9a2cdcec.a1512",
        "disp": true,
        "width": "6"
    },
    {
        "id": "9a2cdcec.a1512",
        "type": "ui_tab",
        "z": "",
        "name": "testing",
        "icon": "dashboard"
    },
    {
        "id": "6356450b.b9318c",
        "type": "ui_group",
        "z": "",
        "name": "RMU-40",
        "tab": "6aa61182.b42ed",
        "order": 12,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "da1887c7.ca0d38",
        "type": "ui_group",
        "z": "",
        "name": "Förord",
        "tab": "b75c3bdd.9e0ae8",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "c400f9d6.0a6028",
        "type": "ui_tab",
        "z": "",
        "name": "Diagnostik",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "3af8f7e6.d24338",
        "type": "ui_group",
        "z": "",
        "name": "Kompressoreffektivitet",
        "tab": "c400f9d6.0a6028",
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "ffc74889.8cb7c8",
        "type": "ui_group",
        "z": "",
        "name": "Gradminut boost",
        "tab": "57a2c311.41401c",
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "2b6d659c.ea619a",
        "type": "ui_group",
        "z": "",
        "name": "Original Group Name",
        "tab": "ca200017.852e",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "ca200017.852e",
        "type": "ui_tab",
        "z": "",
        "name": "Tab",
        "icon": "wifi",
        "order": 1
    },
    {
        "id": "ff1b6a7.cddbb98",
        "type": "ui_group",
        "z": "",
        "name": "Start",
        "tab": "f3ab33ed.96488",
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "24d4f99f.449346",
        "type": "exec",
        "z": "64327e50.8f365",
        "command": "sudo mount -o remount,rw /",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 582,
        "y": 539,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "39b0fc16.7de5c4",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "let data = global.get('data')||[];\nif(msg.raw!==undefined) {\n    let index = data.findIndex(n => n.register == msg.raw.register);\n    if(index!==-1) {\n        data[index] = msg.raw;\n    } else {\n        data.push(msg.raw);\n    }\n    global.set('data',data)\n    \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 267,
        "y": 112,
        "wires": [
            [
                "9e97fa96.89ec78"
            ]
        ]
    },
    {
        "id": "9e97fa96.89ec78",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "Data",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 400,
        "y": 112,
        "wires": []
    },
    {
        "id": "9ce049af.4ea4c8",
        "type": "nibe-input",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "",
        "add": false,
        "x": 112,
        "y": 112,
        "wires": [
            [],
            [
                "39b0fc16.7de5c4"
            ]
        ]
    },
    {
        "id": "da854f32.84c7f",
        "type": "inject",
        "z": "df0dd648.98daa8",
        "name": "Starta",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 91,
        "y": 43,
        "wires": [
            [
                "8ab34ba6.4ee288"
            ]
        ]
    },
    {
        "id": "8ab34ba6.4ee288",
        "type": "subflow:64327e50.8f365",
        "z": "df0dd648.98daa8",
        "name": "Skrivläge",
        "env": [],
        "x": 227,
        "y": 43,
        "wires": []
    },
    {
        "id": "6b181179.f7cdf",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "",
        "func": "var config = global.get('config');\nvar windSet = global.get('windSet');\nif(config===undefined) {\n    node.error('Prognosreglering',{topic:\"Prognosreglering\",payload:\"Saknar config fil.\"})\n    return;\n}\nvar hours = (config.home.hours-1);\nvar sunrise = toTimestamp(msg.astro.sunrise);\nvar sunset = toTimestamp(msg.astro.sunset);\n\nvar timeNow = Number((Date.now()/1000).toFixed());\nvar time = Number((Date.now()/1000).toFixed())+(config.home.hours*3600);\nlet sun;\nif(time>sunrise && time<sunset) {\n    sun = true;\n} else {\n    sun = false;\n}\nvar temp = msg.payload.timeSeries[hours].parameters.find(temp => temp.name == \"t\");\nvar tempNow = msg.payload.timeSeries[0].parameters.find(tempNow => tempNow.name == \"t\");\nvar weather = msg.payload.timeSeries[hours].parameters.find(weather => weather.name == \"Wsymb2\");\n\nvar tempPredicted;\nif (temp!==undefined) {\ntempPredicted = temp.values[0];\n}\nvar weatherPredicted;\nif (weather!==undefined) {\nweatherPredicted = Number(weather.values[0]);\n}\nvar tempOutside = msg.outside;\nvar tempInside ;\nvar heatCurve = msg.heatcurve;\nvar setOffset;\nvar sunFactor = 0;\nif(tempOutside===undefined || heatCurve===undefined) {\n    node.error('Prognosreglering',{topic:\"Prognosreglering\",payload:\"Saknar värde från utomhusgivaren eller värmekurvan.\"});\n    return;\n}\nif(weatherPredicted===1 && sun===true) {\n    sunFactor = config.weather.clear;\n} else if(weatherPredicted===2 && sun===true) {\n    sunFactor = config.weather.mostly_clear;\n} else if(weatherPredicted===3 && sun===true) {\n    sunFactor = config.weather.half_clear;\n}\n// Test prognosjustering\n\nif(windSet!==undefined) {\n    tempPredicted = windSet;\n}\ntempPredicted = Number(((tempOutside-tempNow.values[0])+tempPredicted).toFixed(2));\nif(config.weather.sun_enable===undefined || config.weather.sun_enable===false) sunFactor = 0;\nsetOffset = Number(((tempOutside-tempPredicted-sunFactor)*(heatCurve*1.2/10)/((heatCurve/10)+1)).toFixed(2));\n\nglobal.set('weatherSet',Number(setOffset));\n\nnode.send({topic:\"Utomhustemp\",payload:tempOutside});\nnode.send({topic:\"Inomhustemp\",payload:tempInside});\nnode.send({topic:\"Prognos nu\",payload:tempNow.values[0]});\n\nnode.send({topic:\"Prognos (Nu) \"+config.home.hours+\"h\",payload:tempPredicted});\nnode.send([{topic:\"Prognos \"+config.home.hours+\"h\",payload:tempPredicted,timestamp:Date.now()+(config.home.hours*3600000)},{topic:\"SMHI Utomhustemp\",payload:tempPredicted,delay:(config.home.hours*3600000)}]);\nnode.send({topic:\"Kurvjustering\",payload:setOffset});\n\nfunction toTimestamp(strDate){\n var datum = Date.parse(strDate);\n return Number((datum/1000).toFixed());\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 281,
        "y": 1106,
        "wires": [
            []
        ]
    },
    {
        "id": "415ceb72.bb9114",
        "type": "ui_toast",
        "z": "df0dd648.98daa8",
        "position": "bottom right",
        "displayTime": "7",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 720,
        "y": 42,
        "wires": []
    },
    {
        "id": "3e9a73d2.df1c3c",
        "type": "ui_slider",
        "z": "df0dd648.98daa8",
        "name": "North",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "455ba55e.e91e8c",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "wind_factor_n",
        "min": 0,
        "max": "2",
        "step": "0.1",
        "x": 1002,
        "y": 735,
        "wires": [
            [
                "e2a1ad3d.f8237"
            ]
        ]
    },
    {
        "id": "e0568cfa.ce37d",
        "type": "ui_slider",
        "z": "df0dd648.98daa8",
        "name": "South",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "455ba55e.e91e8c",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "wind_factor_s",
        "min": 0,
        "max": "2",
        "step": "0.1",
        "x": 1003,
        "y": 784,
        "wires": [
            [
                "21ec51aa.8d21ce"
            ]
        ]
    },
    {
        "id": "c0ca403c.4cd65",
        "type": "ui_slider",
        "z": "df0dd648.98daa8",
        "name": "West",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "455ba55e.e91e8c",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "wind_factor_w",
        "min": 0,
        "max": "2",
        "step": "0.1",
        "x": 1003,
        "y": 833,
        "wires": [
            [
                "7ea5d6a2.6b6f78"
            ]
        ]
    },
    {
        "id": "de90adfc.3a51d",
        "type": "ui_slider",
        "z": "df0dd648.98daa8",
        "name": "East",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "455ba55e.e91e8c",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "wind_factor_e",
        "min": 0,
        "max": "2",
        "step": "0.1",
        "x": 1003,
        "y": 882,
        "wires": [
            [
                "66f72656.28acb8"
            ]
        ]
    },
    {
        "id": "73f9e0db.d20a2",
        "type": "ui_chart",
        "z": "df0dd648.98daa8",
        "name": "",
        "group": "455ba55e.e91e8c",
        "order": 3,
        "width": "0",
        "height": "0",
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Data ej tillgängligt",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 883,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "2050771b.5288a8",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "",
        "func": "var config = global.get('config');\nif(config===undefined) {\n    node.error('Prognosreglering',{topic:\"Prognosreglering\",payload:\"Saknar konfiguration\"})\n    return;\n}\nvar hours = (config.home.hours-1);\nvar array = msg.payload.timeSeries;\n\nvar tempOutside = msg.outside;\nvar tempInside = msg.inside;\nvar heatCurve = msg.heatcurve;\nvar setOffset;\nif(tempOutside===undefined || heatCurve===undefined) {\n    node.error('Prognosreglering',{topic:\"Prognosreglering\",payload:\"Saknar värde från utomhusgivaren eller värmekurvan.\"});\n    return;\n}\n\nvar wind_speed_arr = [];\nvar wind_gust_arr = [];\nvar temp_arr = [];\nvar feel_arr = [];\nvar direction_arr = [];\nfor( var o = 0; o < 49; o++){\n    let timestamp = toTimestamp(array[o].validTime)\n    let topic = \"Vind\"\n    let speed = array[o].parameters.find(speed => speed.name == \"ws\");\n    let dir = array[o].parameters.find(dir => dir.name == \"wd\");\n    let gust = array[o].parameters.find(gust => gust.name == \"gust\");\n    let temp = array[o].parameters.find(temp => temp.name == \"t\");\n    speed = speed.values[0];\n    gust = gust.values[0];\n    temp = temp.values[0];\n    dir = dir.values[0];\n    let direction = 0;\n    let factor = 1;\n    if(((1 <= dir) && (dir <= 45)) || ((315 <= dir) && (dir <= 360))) {\n        direction = -1;\n        factor = config.weather.wind_factor_n;\n    } else if(136 <= dir && dir <= 225) {\n        direction = -2;\n        factor = config.weather.wind_factor_s;\n    } else if(226 <= dir && dir <= 314) {\n        direction = -3;\n        factor = config.weather.wind_factor_w;\n    } else if(46 <= dir && dir <= 135) {\n        direction = -4;\n        factor = config.weather.wind_factor_e;\n    }\n    let v = Math.pow(speed, 0.16);\n    feel = Number((13.12+(0.6215*temp)-(13.956*v)+(0.48669*temp*v)).toFixed(2));\n    if(feel>0) {\n        feel = feel/factor;\n        if(feel>temp) {\n            feel = temp;\n        }\n    } else {\n        feel = feel*factor\n        if(feel>temp) {\n            feel = temp;\n        }\n    }\n    if(speed<2 || temp>10 || speed>35 || direction===0) feel = temp;\n    wind_speed_arr.push({x:timestamp,y:Number(speed)});\n    wind_gust_arr.push({x:timestamp,y:Number(gust)});\n    temp_arr.push({x:timestamp,y:Number(temp)});\n    feel_arr.push({x:timestamp,y:feel});\n    direction_arr.push({x:timestamp,y:direction});\n    if(config.weather.wind_enable!==undefined && config.weather.wind_enable===true) {\n        if(o===hours) {\n            global.set('windSet',feel);\n        }\n    } else {\n        global.set('windSet',undefined);\n    }\n}\n//var test = wind_speed_arr.sort(function(a,b){return a.x - b.y});\nwind_speed_arr.sort((a, b) => (a.x > b.x) ? 1 : -1)\nwind_gust_arr.sort((a, b) => (a.x > b.x) ? 1 : -1)\ntemp_arr.sort((a, b) => (a.x > b.x) ? 1 : -1)\nfeel_arr.sort((a, b) => (a.x > b.x) ? 1 : -1)\ndirection_arr.sort((a, b) => (a.x > b.x) ? 1 : -1)\nvar sendArray = [\n    {\n        \"series\":[\"Vindhastighet\",\"Byvind\",\"Utomhustemp\",\"Köldeffekt\",\"Riktning\"],\n        \"data\":[wind_speed_arr,wind_gust_arr,temp_arr,feel_arr,direction_arr],\n        \"labels\":[\"Vindhastighet\",\"Byvind\",\"Utomhustemp\",\"Köldeffekt\",\"Riktning\"]\n    }];\nnode.send({topic:\"Vindhastighet\",payload:sendArray});\nfunction toTimestamp(strDate){\n var datum = Date.parse(strDate);\n return Number((datum).toFixed());\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 421,
        "y": 1106,
        "wires": [
            []
        ]
    },
    {
        "id": "1d1c593e.bdd0c7",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "MQTT Broker",
        "tooltip": "",
        "group": "723a0250.fd7dcc",
        "order": 2,
        "width": "6",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 157,
        "y": 224,
        "wires": [
            [
                "68fb54e2.e8cb7c"
            ]
        ]
    },
    {
        "id": "3f2df90a.87e2f6",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "MQTT Topic",
        "tooltip": "",
        "group": "723a0250.fd7dcc",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "x": 317,
        "y": 322,
        "wires": [
            [
                "5a6f14bc.96beac"
            ]
        ]
    },
    {
        "id": "1dd16422.6e81ec",
        "type": "function",
        "z": "c191a5d.5d76258",
        "name": "",
        "func": "let config = msg.config;\nlet pluginName = env.get(\"Name\");\nif(config===undefined) return;\nif(config[pluginName]===undefined) {config[pluginName] = {}}\nconfig[pluginName][msg.topic] = msg.payload;\nnode.send({payload:config});",
        "outputs": 1,
        "noerr": 0,
        "x": 344,
        "y": 112,
        "wires": [
            [
                "b562cc0e.728b4"
            ]
        ]
    },
    {
        "id": "b562cc0e.728b4",
        "type": "nibe-output",
        "z": "c191a5d.5d76258",
        "server": "844659a2.8d8508",
        "name": "setConfig",
        "x": 529,
        "y": 112,
        "wires": [
            []
        ]
    },
    {
        "id": "eb6f8564.c5a668",
        "type": "nibe-request",
        "z": "c191a5d.5d76258",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 197,
        "y": 77,
        "wires": [
            [
                "1dd16422.6e81ec"
            ],
            []
        ]
    },
    {
        "id": "9110855e.8bfd98",
        "type": "function",
        "z": "c191a5d.5d76258",
        "name": "",
        "func": "    let topic = env.get(\"Function\");\n    //let language = \"SE\";\n    //if(msg.payload.system!==undefined && msg.payload.system.language!==undefined) {\n    //    language = msg.payload.system.language;\n    //}\n    let pluginName = env.get(\"Name\");\n    //let translate = global.get('translate');\n    //let info = topic;\n    //if(translate!==undefined && translate.dash!==undefined && translate.dash[topic]!==undefined && translate.dash[topic][language]!==undefined) {\n    //    info = translate.dash[topic][language]\n    //}\n\n    if(topic!==undefined) {\n        if(msg.payload[pluginName]===undefined) {\n            msg.payload[pluginName] = {};\n        }\n        if(msg.payload[pluginName][topic]!==undefined) {\n            node.send({payload:msg.payload[pluginName][topic],topic:\"Start\"});\n            //if(info!==topic) {\n            //node.send({label:info});    \n            //}\n            node.send([null,{topic:\"config\",payload:msg.payload}]);\n        }\n        //if(pluginName==\"info\") {\n        //    node.send({label:info});\n        //}\n    }",
        "outputs": 2,
        "noerr": 0,
        "x": 330,
        "y": 161,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "68fb54e2.e8cb7c",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "mqtt",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 395,
        "y": 224,
        "wires": [
            [
                "1d1c593e.bdd0c7",
                "b4a9d18b.4c69a",
                "6bc64440.7be37c"
            ],
            []
        ]
    },
    {
        "id": "2b22f2ea.5b3ece",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "mqtt",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "topic",
                "type": "str"
            }
        ],
        "x": 664,
        "y": 322,
        "wires": [
            [
                "2ff3d6e8.48ee3a"
            ],
            []
        ]
    },
    {
        "id": "c559c6e7.c4b388",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "Latitud",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "a8bf2b6e.6abc18",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "lat",
        "x": 820,
        "y": 525,
        "wires": [
            [
                "ba1e9bfe.f81a78"
            ]
        ]
    },
    {
        "id": "3698a0bc.b86fc",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "Longitud",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "a8bf2b6e.6abc18",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "lon",
        "x": 830,
        "y": 574,
        "wires": [
            [
                "18984de6.08fc72"
            ]
        ]
    },
    {
        "id": "97d47914.109668",
        "type": "comment",
        "z": "b7f67da0.fbf1",
        "name": "Husdata",
        "info": "",
        "x": 697,
        "y": 490,
        "wires": []
    },
    {
        "id": "6b8355d0.18512c",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "cpr_tot_kwh",
        "x": 609,
        "y": 1134,
        "wires": [
            [
                "c1d7dd0f.8b712"
            ],
            []
        ]
    },
    {
        "id": "c1d7dd0f.8b712",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "cpr_hw_kwh",
        "x": 770,
        "y": 1134,
        "wires": [
            [
                "d34de900.a6d0d8"
            ],
            []
        ]
    },
    {
        "id": "99ffc02f.7bb77",
        "type": "ui_chart",
        "z": "b7f67da0.fbf1",
        "name": "Kompressorförbrukning",
        "group": "1d61b1b5.3ea93e",
        "order": 5,
        "width": 0,
        "height": 0,
        "label": "",
        "chartType": "pie",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#d20000",
            "#0000ff",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 1139,
        "y": 1127,
        "wires": [
            []
        ]
    },
    {
        "id": "d34de900.a6d0d8",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "if(msg.cpr_tot_kwh!==undefined && msg.cpr_tot_kwh!==0) {\n    let hide = {\n        \"group\":\n            {\"show\":\n                [\"Startsida_Kompressorförbrukning\"]\n            }\n        }\n    node.send([null,null,{payload:hide}]);\n    node.send({topic:\"Värme\",payload:Number((msg.cpr_tot_kwh-msg.cpr_hw_kwh).toFixed(0))});\n    node.send([null,{topic:\"Varmvatten\",payload:Number(msg.cpr_hw_kwh.toFixed(0))}]);\n} else {\n    let hide = {\n        \"group\":\n            {\"hide\":\n                [\"Startsida_Kompressorförbrukning\"]\n            }\n        }\n    node.send([null,null,{payload:hide}]);\n}\n",
        "outputs": 3,
        "noerr": 0,
        "x": 918,
        "y": 1134,
        "wires": [
            [
                "99ffc02f.7bb77",
                "a508560f.9d9228"
            ],
            [
                "b7aacf55.4c083",
                "99ffc02f.7bb77"
            ],
            [
                "bbeace10.c8e3d"
            ]
        ]
    },
    {
        "id": "a5330dfd.4dd73",
        "type": "inject",
        "z": "b7f67da0.fbf1",
        "name": "",
        "topic": "",
        "payload": "[]",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 918,
        "y": 1092,
        "wires": [
            [
                "99ffc02f.7bb77"
            ]
        ]
    },
    {
        "id": "a508560f.9d9228",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "1d61b1b5.3ea93e",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "{{msg.topic}}",
        "format": "{{msg.payload}} kWh",
        "layout": "row-left",
        "x": 1065,
        "y": 1225,
        "wires": []
    },
    {
        "id": "b7aacf55.4c083",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "1d61b1b5.3ea93e",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "{{msg.topic}}",
        "format": "{{msg.payload}} kWh",
        "layout": "row-left",
        "x": 1065,
        "y": 1183,
        "wires": []
    },
    {
        "id": "116b9a89.73baf5",
        "type": "ui_ui_control",
        "z": "b7f67da0.fbf1",
        "name": "",
        "events": "change",
        "x": 130,
        "y": 1134,
        "wires": [
            [
                "67efbfba.ccf4a"
            ]
        ]
    },
    {
        "id": "67efbfba.ccf4a",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Startsida",
        "func": "if(msg.name==\"Startsida\") {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 277,
        "y": 1134,
        "wires": [
            [
                "1803ad9d.9710a2"
            ]
        ]
    },
    {
        "id": "1803ad9d.9710a2",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "60",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 437,
        "y": 1134,
        "wires": [
            [
                "6b8355d0.18512c"
            ]
        ]
    },
    {
        "id": "257d3e61.f15db2",
        "type": "ui_text_input",
        "z": "df0dd648.98daa8",
        "name": "Klart väder",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "d342c0ba.f2418",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "number",
        "delay": "0",
        "topic": "clear",
        "x": 196,
        "y": 630,
        "wires": [
            [
                "bc73fbe5.bdfd48"
            ]
        ]
    },
    {
        "id": "a1d2b301.cca65",
        "type": "ui_text_input",
        "z": "df0dd648.98daa8",
        "name": "Mestadels klart väder",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "d342c0ba.f2418",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "number",
        "delay": "0",
        "topic": "mostly_clear",
        "x": 191,
        "y": 679,
        "wires": [
            [
                "bac43b6a.ac8a48"
            ]
        ]
    },
    {
        "id": "3aa1cf7c.e15ef",
        "type": "ui_text_input",
        "z": "df0dd648.98daa8",
        "name": "Halvklart väder",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "d342c0ba.f2418",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "number",
        "delay": "0",
        "topic": "half_clear",
        "x": 171,
        "y": 728,
        "wires": [
            [
                "22b888d6.4e5778"
            ]
        ]
    },
    {
        "id": "6e9d06f1.c9ebc8",
        "type": "ui_switch",
        "z": "df0dd648.98daa8",
        "name": "Aktivera Solfaktor",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "d342c0ba.f2418",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "sun_enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 195,
        "y": 903,
        "wires": [
            [
                "c84a3009.de52b"
            ]
        ]
    },
    {
        "id": "2aa7811b.637b2e",
        "type": "ui_switch",
        "z": "df0dd648.98daa8",
        "name": "Aktivera Vindfaktor",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "455ba55e.e91e8c",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "wind_enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 188,
        "y": 812,
        "wires": [
            [
                "3f21aae7.95c2e6"
            ]
        ]
    },
    {
        "id": "a8deecfc.3d34b",
        "type": "ui_slider",
        "z": "358baec9.c8b902",
        "name": "Inomhus börvärde",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "a2cfe148.70708",
        "order": 6,
        "width": "12",
        "height": "1",
        "passthru": false,
        "outs": "end",
        "topic": "",
        "min": "5",
        "max": "30",
        "step": "0.5",
        "x": 832,
        "y": 280,
        "wires": [
            [
                "e9e08f7a.850de"
            ]
        ]
    },
    {
        "id": "5e3504d0.fd3ffc",
        "type": "ui_slider",
        "z": "358baec9.c8b902",
        "name": "Utomhustemp blockering",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "95b0af9c.89089",
        "order": 2,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "outdoor_set",
        "min": "8",
        "max": "26",
        "step": "1",
        "x": 726,
        "y": 756,
        "wires": [
            [
                "589ea604.984ac8"
            ]
        ]
    },
    {
        "id": "8a3192fa.29d1d",
        "type": "ui_slider",
        "z": "358baec9.c8b902",
        "name": "Faktor för Inomhusgivare",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "a2cfe148.70708",
        "order": 7,
        "width": "12",
        "height": "1",
        "passthru": false,
        "outs": "end",
        "topic": "inside_factor",
        "min": "0",
        "max": "6",
        "step": "0.1",
        "x": 768,
        "y": 441,
        "wires": [
            [
                "7e1732cb.c8f15c"
            ]
        ]
    },
    {
        "id": "e9e08f7a.850de",
        "type": "nibe-output",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_set_s1",
        "x": 1004,
        "y": 329,
        "wires": [
            [
                "880a8a15.a3fa68"
            ]
        ]
    },
    {
        "id": "8df4a3c.164c26",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_set_s1",
        "x": 472,
        "y": 301,
        "wires": [
            [],
            [
                "bc50dbcc.0268c8",
                "880a8a15.a3fa68"
            ]
        ]
    },
    {
        "id": "43a637b0.9a2d78",
        "type": "ui_ui_control",
        "z": "358baec9.c8b902",
        "name": "",
        "events": "all",
        "x": 102,
        "y": 301,
        "wires": [
            [
                "a3bbe686.2f1518"
            ]
        ]
    },
    {
        "id": "a3bbe686.2f1518",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "Inomhusreglering",
        "func": "var timeSaved = context.get('time')||(Date.now()-1000);\nvar time = Date.now();\nif(msg.name==\"Inomhusreglering\") {\n    if(time>timeSaved) {\n        context.set('time',(time+30000));\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 272,
        "y": 301,
        "wires": [
            [
                "d6176cc8.3e0d3",
                "87a83c1.3cd9fc"
            ]
        ]
    },
    {
        "id": "bc50dbcc.0268c8",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "outdoor_set",
        "x": 434,
        "y": 700,
        "wires": [
            [],
            [
                "432a1d50.84fbc4",
                "c2f6cea2.a8ed"
            ]
        ]
    },
    {
        "id": "589ea604.984ac8",
        "type": "nibe-output",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "outdoor_set",
        "x": 896,
        "y": 707,
        "wires": [
            [
                "c2f6cea2.a8ed"
            ]
        ]
    },
    {
        "id": "432a1d50.84fbc4",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_factor_s1",
        "x": 451,
        "y": 406,
        "wires": [
            [],
            [
                "947f9547.f50a58"
            ]
        ]
    },
    {
        "id": "7e1732cb.c8f15c",
        "type": "nibe-output",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_factor_s1",
        "x": 934,
        "y": 399,
        "wires": [
            [
                "947f9547.f50a58"
            ]
        ]
    },
    {
        "id": "8b79bac6.370258",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "lat",
                "type": "str"
            }
        ],
        "x": 1133,
        "y": 525,
        "wires": [
            [
                "24df5e7e.26cf62"
            ],
            []
        ]
    },
    {
        "id": "3118479a.5faed8",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "lon",
                "type": "str"
            }
        ],
        "x": 1133,
        "y": 574,
        "wires": [
            [
                "f0ecc454.9aff08"
            ],
            []
        ]
    },
    {
        "id": "bc73fbe5.bdfd48",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "clear",
                "type": "str"
            }
        ],
        "x": 405,
        "y": 630,
        "wires": [
            [
                "257d3e61.f15db2"
            ],
            []
        ]
    },
    {
        "id": "bac43b6a.ac8a48",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "mostly_clear",
                "type": "str"
            }
        ],
        "x": 405,
        "y": 679,
        "wires": [
            [
                "a1d2b301.cca65"
            ],
            []
        ]
    },
    {
        "id": "22b888d6.4e5778",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "half_clear",
                "type": "str"
            }
        ],
        "x": 405,
        "y": 728,
        "wires": [
            [
                "3aa1cf7c.e15ef"
            ],
            []
        ]
    },
    {
        "id": "3f21aae7.95c2e6",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "wind_enable",
                "type": "str"
            }
        ],
        "x": 405,
        "y": 812,
        "wires": [
            [
                "9489e9a0.cd1268",
                "5688e3a3.e0f76c"
            ],
            []
        ]
    },
    {
        "id": "c84a3009.de52b",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "sun_enable",
                "type": "str"
            }
        ],
        "x": 405,
        "y": 861,
        "wires": [
            [
                "740712c9.2bd05c",
                "ef12f1e2.57a45"
            ],
            []
        ]
    },
    {
        "id": "e2a1ad3d.f8237",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "wind_factor_n",
                "type": "str"
            }
        ],
        "x": 1161,
        "y": 735,
        "wires": [
            [
                "3e9a73d2.df1c3c"
            ],
            []
        ]
    },
    {
        "id": "21ec51aa.8d21ce",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "wind_factor_s",
                "type": "str"
            }
        ],
        "x": 1161,
        "y": 784,
        "wires": [
            [
                "e0568cfa.ce37d"
            ],
            []
        ]
    },
    {
        "id": "7ea5d6a2.6b6f78",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "wind_factor_w",
                "type": "str"
            }
        ],
        "x": 1161,
        "y": 833,
        "wires": [
            [
                "c0ca403c.4cd65"
            ],
            []
        ]
    },
    {
        "id": "66f72656.28acb8",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "wind_factor_e",
                "type": "str"
            }
        ],
        "x": 1161,
        "y": 882,
        "wires": [
            [
                "de90adfc.3a51d"
            ],
            []
        ]
    },
    {
        "id": "4b0bab33.266894",
        "type": "ui_ui_control",
        "z": "b7f67da0.fbf1",
        "name": "",
        "events": "all",
        "x": 270,
        "y": 546,
        "wires": [
            [
                "236045ec.27f9ca"
            ]
        ]
    },
    {
        "id": "236045ec.27f9ca",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Inställningar",
        "func": "var timeSaved = context.get('time')||(Date.now()-1000);\nvar time = Date.now();\nif(msg.name==\"Inställningar\") {\n    if(time>timeSaved) {\n        context.set('time',(time+30000));\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 434,
        "y": 546,
        "wires": [
            [
                "ed4672a6.2a277",
                "a2146cd8.91aae"
            ]
        ]
    },
    {
        "id": "5a6f14bc.96beac",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Add /",
        "func": "var value = msg.payload;\nvar check = value.endsWith(\"/\");\nif(check===false) {\n    value = value+\"/\";\n}\nmsg.payload = value;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 477,
        "y": 322,
        "wires": [
            [
                "2b22f2ea.5b3ece"
            ]
        ]
    },
    {
        "id": "ec0195eb.b769a8",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_s1",
                "type": "str"
            }
        ],
        "x": 132,
        "y": 322,
        "wires": [
            [
                "d82520c2.25525"
            ],
            []
        ]
    },
    {
        "id": "4f685464.ce3e7c",
        "type": "ui_switch",
        "z": "df0dd648.98daa8",
        "name": "Aktivera",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "7e910a08.c6c984",
        "order": 2,
        "width": "6",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "weather/enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 529,
        "y": 322,
        "wires": [
            [
                "c1f92f58.722e9"
            ]
        ]
    },
    {
        "id": "d92d33b1.e333d",
        "type": "nibe-request",
        "z": "c191a5d.5d76258",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 169,
        "y": 175,
        "wires": [
            [],
            [
                "9110855e.8bfd98"
            ]
        ]
    },
    {
        "id": "520d09d6.d3cbb8",
        "type": "inject",
        "z": "c191a5d.5d76258",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 133,
        "y": 231,
        "wires": [
            [
                "d92d33b1.e333d"
            ]
        ]
    },
    {
        "id": "a9a8b1e1.e176b",
        "type": "nibe-input",
        "z": "c191a5d.5d76258",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 92,
        "y": 126,
        "wires": [
            [
                "9110855e.8bfd98"
            ],
            []
        ]
    },
    {
        "id": "c1f92f58.722e9",
        "type": "nibe-weather",
        "z": "df0dd648.98daa8",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "sun": true,
        "wind": false,
        "adjust": "0.5",
        "hours": "8",
        "x": 458,
        "y": 245,
        "wires": [
            [],
            [
                "73f9e0db.d20a2"
            ]
        ]
    },
    {
        "id": "d9788d5a.89152",
        "type": "ui_button",
        "z": "df0dd648.98daa8",
        "name": "Uppdatera S1",
        "group": "7e910a08.c6c984",
        "order": 6,
        "width": "12",
        "height": "1",
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 262,
        "y": 259,
        "wires": [
            [
                "c1f92f58.722e9"
            ]
        ]
    },
    {
        "id": "ed4672a6.2a277",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "heatcurve_s1",
        "x": 143,
        "y": 595,
        "wires": [
            [],
            [
                "30804028.6c24b"
            ]
        ]
    },
    {
        "id": "2f31d75c.487a68",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "heatcurve_s1",
        "x": 598,
        "y": 595,
        "wires": [
            []
        ]
    },
    {
        "id": "33987348.04de5c",
        "type": "nibe-weather",
        "z": "df0dd648.98daa8",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s2",
        "sun": true,
        "wind": false,
        "adjust": "0",
        "hours": "1",
        "x": 633,
        "y": 462,
        "wires": [
            [
                "c6b38433.c27d98"
            ],
            []
        ]
    },
    {
        "id": "e7144dfe.63ec7",
        "type": "ui_button",
        "z": "df0dd648.98daa8",
        "name": "Uppdatera S2",
        "group": "197ce413.27432c",
        "order": 6,
        "width": "12",
        "height": "1",
        "passthru": false,
        "label": "Uppdatera",
        "tooltip": "Begär ny väderdata och uppdatera grafen med nya värden.",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 500,
        "y": 581,
        "wires": [
            [
                "33987348.04de5c"
            ]
        ]
    },
    {
        "id": "27f7876f.904e08",
        "type": "ui_slider",
        "z": "df0dd648.98daa8",
        "name": "Prognostid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "7e910a08.c6c984",
        "order": 3,
        "width": "6",
        "height": "1",
        "passthru": false,
        "outs": "end",
        "topic": "home/hours",
        "min": "0",
        "max": "24",
        "step": "1",
        "x": 406,
        "y": 175,
        "wires": [
            [
                "c1f92f58.722e9"
            ]
        ]
    },
    {
        "id": "65733a0b.1018c4",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "hours_s1",
                "type": "str"
            }
        ],
        "x": 118,
        "y": 161,
        "wires": [
            [
                "2101f443.d5731c"
            ],
            []
        ]
    },
    {
        "id": "6321d043.e7772",
        "type": "ui_slider",
        "z": "df0dd648.98daa8",
        "name": "",
        "label": "Prognostid",
        "tooltip": "",
        "group": "197ce413.27432c",
        "order": 3,
        "width": "6",
        "height": "1",
        "passthru": false,
        "outs": "end",
        "topic": "home/hours",
        "min": "0",
        "max": "24",
        "step": "1",
        "x": 441,
        "y": 413,
        "wires": [
            [
                "33987348.04de5c"
            ]
        ]
    },
    {
        "id": "90f9072d.c6e398",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "hours_s2",
                "type": "str"
            }
        ],
        "x": 111,
        "y": 420,
        "wires": [
            [
                "cd8e0c19.c8c85"
            ],
            []
        ]
    },
    {
        "id": "c6b38433.c27d98",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "Enable/Disable",
        "func": "if(msg.enabled!==undefined && msg.enabled===false) {\n    node.send(msg);\n    let hide = {\n        \"group\":\n            {\"hide\":\n                [\"Prognosreglering_Prognosreglering_S2\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n} else if(msg.enabled===true) {\n    let hide = {\n        \"group\":\n            {\"show\":\n                [\"Prognosreglering_Prognosreglering_S2\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 766,
        "y": 539,
        "wires": [
            [
                "6321d043.e7772",
                "c23343b.fab5cc",
                "bc5ca6e8.482d18"
            ],
            [
                "c65b6d8f.e1f51"
            ]
        ]
    },
    {
        "id": "5eaea9fd.2ab8b8",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "Host",
        "tooltip": "",
        "group": "723a0250.fd7dcc",
        "order": 5,
        "width": "6",
        "height": "1",
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "host",
        "x": 295,
        "y": 378,
        "wires": [
            [
                "8e2dcb3b.b540d8"
            ]
        ]
    },
    {
        "id": "8e2dcb3b.b540d8",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "mqtt",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "host",
                "type": "str"
            }
        ],
        "x": 475,
        "y": 378,
        "wires": [
            [
                "e15ebfa.d82e94"
            ],
            []
        ]
    },
    {
        "id": "3eed3ea7.c66072",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "Port",
        "tooltip": "",
        "group": "723a0250.fd7dcc",
        "order": 6,
        "width": "6",
        "height": "1",
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "port",
        "x": 302,
        "y": 420,
        "wires": [
            [
                "be65b446.64ee38"
            ]
        ]
    },
    {
        "id": "be65b446.64ee38",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "mqtt",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "port",
                "type": "str"
            }
        ],
        "x": 475,
        "y": 420,
        "wires": [
            [
                "a923c708.719db8"
            ],
            []
        ]
    },
    {
        "id": "7cc82e4d.8f653",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "User",
        "tooltip": "",
        "group": "723a0250.fd7dcc",
        "order": 7,
        "width": "6",
        "height": "1",
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "user",
        "x": 302,
        "y": 462,
        "wires": [
            [
                "50364127.011b3"
            ]
        ]
    },
    {
        "id": "50364127.011b3",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "mqtt",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "user",
                "type": "str"
            }
        ],
        "x": 475,
        "y": 462,
        "wires": [
            [
                "25889506.584bea"
            ],
            []
        ]
    },
    {
        "id": "b4c7f670.d5d7a8",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "mqtt",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "pass",
                "type": "str"
            }
        ],
        "x": 489,
        "y": 504,
        "wires": [
            [
                "8626d815.9571a8"
            ],
            []
        ]
    },
    {
        "id": "6fe84622.e973e8",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "Password",
        "tooltip": "",
        "group": "723a0250.fd7dcc",
        "order": 8,
        "width": "6",
        "height": "1",
        "passthru": false,
        "mode": "password",
        "delay": "0",
        "topic": "pass",
        "x": 305,
        "y": 504,
        "wires": [
            [
                "b4c7f670.d5d7a8"
            ]
        ]
    },
    {
        "id": "d25aa0c5.71b29",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "adjust_s1",
                "type": "str"
            }
        ],
        "x": 643,
        "y": 735,
        "wires": [
            [
                "e0074a53.36d978"
            ],
            []
        ]
    },
    {
        "id": "3976a9c5.383436",
        "type": "ui_slider",
        "z": "b7f67da0.fbf1",
        "name": "Kurvjustering S2",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "ea24545a.5d7038",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "adjust_s2",
        "min": "-6",
        "max": "6",
        "step": "0.5",
        "x": 220,
        "y": 819,
        "wires": [
            [
                "c216385f.b7bea8"
            ]
        ]
    },
    {
        "id": "c216385f.b7bea8",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "adjust_s2",
                "type": "str"
            }
        ],
        "x": 412,
        "y": 819,
        "wires": [
            [
                "7fef39f9.6ecc28"
            ],
            []
        ]
    },
    {
        "id": "d5d861a9.d7ae9",
        "type": "ui_slider",
        "z": "b7f67da0.fbf1",
        "name": "Värmekurva S1",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "605e2041.0137e",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "",
        "min": "0",
        "max": "15",
        "step": "1",
        "x": 402,
        "y": 595,
        "wires": [
            [
                "2f31d75c.487a68"
            ]
        ]
    },
    {
        "id": "1870fc41.cbc664",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "heatcurve_s2",
        "x": 591,
        "y": 644,
        "wires": [
            [],
            [
                "98de0442.e782d8"
            ]
        ]
    },
    {
        "id": "73df1de4.6aa284",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "heatcurve_s2",
        "x": 1088,
        "y": 630,
        "wires": [
            []
        ]
    },
    {
        "id": "350136be.28c46a",
        "type": "ui_slider",
        "z": "b7f67da0.fbf1",
        "name": "Värmekurva S2",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "ea24545a.5d7038",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "",
        "min": "0",
        "max": "15",
        "step": "1",
        "x": 871,
        "y": 700,
        "wires": [
            [
                "73df1de4.6aa284"
            ]
        ]
    },
    {
        "id": "a2146cd8.91aae",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "supply_s2",
        "x": 193,
        "y": 665,
        "wires": [
            [],
            [
                "6a959097.836b1"
            ]
        ]
    },
    {
        "id": "f6e7533e.8d656",
        "type": "exec",
        "z": "df0dd648.98daa8",
        "command": "sudo mount -o remount,ro /",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 414,
        "y": 105,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "c6de94c3.8844f8",
        "type": "inject",
        "z": "df0dd648.98daa8",
        "name": "Starta",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 141,
        "y": 105,
        "wires": [
            [
                "f6e7533e.8d656"
            ]
        ]
    },
    {
        "id": "191d7af8.9d5725",
        "type": "ui_switch",
        "z": "df0dd648.98daa8",
        "name": "",
        "label": "Aktivera",
        "tooltip": "",
        "group": "197ce413.27432c",
        "order": 2,
        "width": "6",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "weather/enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 410,
        "y": 476,
        "wires": [
            [
                "33987348.04de5c"
            ]
        ]
    },
    {
        "id": "aab00c37.39668",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_s2",
                "type": "str"
            }
        ],
        "x": 139,
        "y": 462,
        "wires": [
            [
                "c23343b.fab5cc"
            ],
            []
        ]
    },
    {
        "id": "d46527de.09f758",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Add Registers",
        "func": "var register = global.get('register');\nlet icons = {\n    \"\":\"fa-bars\",\n    \"°C\":\"fa-thermometer-three-quarters\",\n    \"A\":\"fa-flash\",\n    \"Hz\":\"fa-bar-chart\",\n    \"min\":\"fa-clock-o\",\n    \"h\":\"fa-clock-o\",\n    \"m\":\"fa-clock-o\",\n    \"kWh\":\"fa-area-chart\",\n    \"W\":\"fa-flash\",\n    \"l/m\":\"fa-leaf\",\n    \"%RH\":\"fa-cloud\",\n    \"%\":\"fa-percent\"\n}\nif(register===undefined) return;\nlet config = msg.payload;\nvar outRegister = [];\nvar remove = [];\nfor( var i = 0; i < register.length; i++){\n    outRegister[i] = {};\n    outRegister[i].title = register[i].register+\" (\"+register[i].mode+\") (\"+register[i].size+\"): \"+register[i].titel;\n    outRegister[i].description = register[i].info;\n    outRegister[i].register = register[i].register;\n    outRegister[i].mode = register[i].mode;\n    outRegister[i].unit = register[i].unit;\n    outRegister[i].icon_name = icons[register[i].unit];\n    for( var n = 0; n < config.registers.length; n++){\n        if(config.registers[n]===register[i].register) {\n            outRegister[i].isChecked = true;\n            let word = register[i].register+\": \"+register[i].titel;\n            remove.push({[word]:register[i].register});\n        }\n    }\n    if(register[i].register==\"45001\") outRegister[i].icon_name = \"fa-warning\";\n    if(register[i].register==\"10001\") outRegister[i].icon_name = \"fa-warning\";\n}\nif(outRegister!==undefined && outRegister!==[]) {\n    node.send({payload:outRegister});\n}\nif(remove!==undefined && remove!==[]) {\n    node.send([null,{options:remove}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 500,
        "y": 1379,
        "wires": [
            [
                "bd1f8046.e4efe"
            ],
            [
                "a845852f.e7dfd8"
            ]
        ]
    },
    {
        "id": "bd1f8046.e4efe",
        "type": "ui_list",
        "z": "b7f67da0.fbf1",
        "group": "4f8b35d1.5c8fec",
        "name": "Register",
        "order": 4,
        "width": "12",
        "height": "16",
        "lineType": "three",
        "actionType": "check",
        "allowHTML": false,
        "outputs": 1,
        "topic": "",
        "x": 676,
        "y": 1379,
        "wires": [
            [
                "3c0e48ab.ada8f8"
            ]
        ]
    },
    {
        "id": "3c0e48ab.ada8f8",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Add/Remove Registers",
        "func": "if(msg.payload.isChecked===true) {\n    node.send({topic:\"addRegister\",payload:msg.payload.register});\n} else if (msg.payload.isChecked===false) {\n    node.send({topic:\"removeRegister\",payload:msg.payload.register});\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 866,
        "y": 1379,
        "wires": [
            [
                "1b0cc4df.6a668b"
            ]
        ]
    },
    {
        "id": "1b0cc4df.6a668b",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "",
        "x": 1085,
        "y": 1379,
        "wires": [
            []
        ]
    },
    {
        "id": "c6cddead.51a4d",
        "type": "nibe-input",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 134,
        "y": 1379,
        "wires": [
            [
                "d46527de.09f758",
                "4249c2be.4caddc"
            ],
            []
        ]
    },
    {
        "id": "79bf305.f523ad",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Data",
        "func": "var data = global.get('data');\nlet icons = {\n    \"\":\"fa-bars\",\n    \"°C\":\"fa-thermometer-three-quarters\",\n    \"A\":\"fa-flash\",\n    \"Hz\":\"fa-bar-chart\",\n    \"min\":\"fa-clock-o\",\n    \"h\":\"fa-clock-o\",\n    \"m\":\"fa-clock-o\",\n    \"kWh\":\"fa-area-chart\",\n    \"W\":\"fa-flash\",\n    \"l/m\":\"fa-leaf\",\n    \"%RH\":\"fa-cloud\",\n    \"%\":\"fa-percent\"\n}\nvar config = msg.payload;\nif(config===undefined) return;\n\nlet time = Date.now();\nif(data===undefined) return;\nvar outRegister = [];\nfor( var n = 0; n < config.registers.length; n++){\n    for( var i = 0; i < data.length; i++){\n        if(config.registers[n]==data[i].register) {\n            outRegister[n] = {};\n            outRegister[n].title = `${data[i].register}, ${data[i].titel}`;\n            outRegister[n].description = `${data[i].data} ${data[i].unit}`;\n            outRegister[n].register = data[i].register;\n            outRegister[n].icon_name = icons[data[i].unit];\n            outRegister[n].isChecked = data[i].isChecked;\n            if(data[i].register==\"45001\") outRegister[n].icon_name = \"fa-warning\";\n            if(data[i].register==\"10001\") outRegister[n].icon_name = \"fa-warning\";\n        }\n    }\n    \n}\noutRegister.sort((a, b) => (a.register > b.register) ? 1 : -1)\nif(outRegister!==undefined && outRegister!==[]) {\n    node.send({payload:outRegister});\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 421,
        "y": 1624,
        "wires": [
            []
        ]
    },
    {
        "id": "7af5eaeb.53f964",
        "type": "inject",
        "z": "b7f67da0.fbf1",
        "name": "",
        "topic": "check",
        "payload": "",
        "payloadType": "date",
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "x": 139,
        "y": 1624,
        "wires": [
            [
                "5e0de75.c411d18"
            ]
        ]
    },
    {
        "id": "353f9a08.a4fce6",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "var data = global.get('data');\nvar time = Date.now();\nif(data===undefined) return;\nif(msg.payload.isChecked!==undefined) {\n        let index = data.findIndex(n => n.register == msg.payload.register);\n    if(index!==-1) {\n        data[index].isChecked = msg.payload.isChecked;\n        global.set('data',data);\n    } else {\n        \n    }\n} else {\n    for( var i = 0; i < data.length; i++){\n        if(data[i].isChecked===true) {\n            if(data[i].raw_data>-3276) {\n                node.send({topic:data[i].titel,payload:data[i].raw_data,timestamp:time});\n            }\n        }\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 777,
        "y": 1680,
        "wires": [
            [
                "bdd50741.a958d8"
            ]
        ]
    },
    {
        "id": "7add9b61.438214",
        "type": "inject",
        "z": "b7f67da0.fbf1",
        "name": "",
        "topic": "check",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "x": 580,
        "y": 1680,
        "wires": [
            [
                "353f9a08.a4fce6"
            ]
        ]
    },
    {
        "id": "bdd50741.a958d8",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1008,
        "y": 1722,
        "wires": []
    },
    {
        "id": "9489e9a0.cd1268",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "Enable/Disable",
        "func": "msg = {\n    enabled:msg.payload\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 633,
        "y": 812,
        "wires": [
            [
                "b60d4de3.23883",
                "e735aa57.d29b58",
                "55c116af.5af4a8",
                "e2f4d0a0.1d759"
            ]
        ]
    },
    {
        "id": "740712c9.2bd05c",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "Enable/Disable",
        "func": "msg = {\n    enabled:msg.payload\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 633,
        "y": 868,
        "wires": [
            [
                "dafc111.c0d85f",
                "2f9e6dfa.632c72",
                "5068e548.54541c"
            ]
        ]
    },
    {
        "id": "56ef8656.34a448",
        "type": "ui_switch",
        "z": "df0dd648.98daa8",
        "name": "Aktivera Prognoskorrigering",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "33ed6fb8.2f3ce",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "forecast_adjust",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 218,
        "y": 980,
        "wires": [
            [
                "ff911f0f.b33a1"
            ]
        ]
    },
    {
        "id": "ff911f0f.b33a1",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "weather",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "forecast_adjust",
                "type": "str"
            }
        ],
        "x": 461,
        "y": 980,
        "wires": [
            [
                "56ef8656.34a448"
            ],
            []
        ]
    },
    {
        "id": "c65b6d8f.e1f51",
        "type": "ui_ui_control",
        "z": "df0dd648.98daa8",
        "name": "Disable Group S2",
        "events": "all",
        "x": 1035,
        "y": 595,
        "wires": [
            []
        ]
    },
    {
        "id": "122b1739.bf0d69",
        "type": "ui_ui_control",
        "z": "b7f67da0.fbf1",
        "name": "",
        "events": "change",
        "x": 144,
        "y": 1428,
        "wires": [
            [
                "45726bd6.629654"
            ]
        ]
    },
    {
        "id": "45726bd6.629654",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Datahantering",
        "func": "if(msg.name==\"Datahantering\") {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 311,
        "y": 1428,
        "wires": [
            [
                "4048162e.e23ad8"
            ]
        ]
    },
    {
        "id": "4048162e.e23ad8",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "60",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 514,
        "y": 1428,
        "wires": [
            [
                "bd243274.ffbda"
            ]
        ]
    },
    {
        "id": "bd243274.ffbda",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 666,
        "y": 1428,
        "wires": [
            [],
            [
                "d46527de.09f758"
            ]
        ]
    },
    {
        "id": "7767041b.f6a2ac",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "New Inside sensors",
        "func": "let topic = msg.payload.topic;\nlet name = msg.payload.name;\nlet mqtt = msg.payload.mqtt;\n\nlet config = msg.config;\nif(config.home.inside_sensors===undefined) config.home.inside_sensors = [];\nif(name!==\"\") {\n    let newSensor = true;\n    for (const arr of config.home.inside_sensors) {\n        if(arr.register!==undefined && arr.register===topic) {\n            newSensor = false;\n            node.error('Inomhusgivare',{topic:\"Inomhusgivare\",payload:\"Givare finns redan\"})\n        }\n    }\n    if(newSensor===true) {\n        let source = \"nibe\";\n        if(mqtt===true) {\n            source = \"mqtt\";\n        }\n        config.home.inside_sensors.push({name:name,register:topic,source:source});\n        node.send({topic:\"addSensor\",payload:config});\n    }\n    \n}",
        "outputs": 1,
        "noerr": 0,
        "x": 741,
        "y": 1820,
        "wires": [
            [
                "af5403b7.bf541"
            ]
        ]
    },
    {
        "id": "fc464c80.f957e",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1086,
        "y": 2051,
        "wires": []
    },
    {
        "id": "e20b901b.2d06d",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 519,
        "y": 1820,
        "wires": [
            [
                "7767041b.f6a2ac"
            ],
            []
        ]
    },
    {
        "id": "130a1b17.cc1ea5",
        "type": "ui_form",
        "z": "b7f67da0.fbf1",
        "name": "Lägg till sensor",
        "label": "",
        "group": "fb207b28.da59b8",
        "order": 2,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "MQTT",
                "value": "mqtt",
                "type": "checkbox",
                "required": false
            },
            {
                "label": "Name",
                "value": "name",
                "type": "text",
                "required": true
            },
            {
                "label": "Register / Topic",
                "value": "topic",
                "type": "text",
                "required": true
            }
        ],
        "formValue": {
            "mqtt": false,
            "name": "",
            "topic": ""
        },
        "payload": "",
        "submit": "Add",
        "cancel": "Cancel",
        "topic": "",
        "x": 311,
        "y": 1841,
        "wires": [
            [
                "e20b901b.2d06d"
            ]
        ]
    },
    {
        "id": "1ce07a10.589406",
        "type": "ui_dropdown",
        "z": "b7f67da0.fbf1",
        "name": "Ta bort",
        "label": "",
        "tooltip": "",
        "place": "",
        "group": "fb207b28.da59b8",
        "order": 4,
        "width": "12",
        "height": "1",
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "removeSensor",
        "x": 1058,
        "y": 1883,
        "wires": [
            [
                "fc464c80.f957e",
                "af5403b7.bf541"
            ]
        ]
    },
    {
        "id": "e9b65b68.0cdfb8",
        "type": "nibe-input",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 533,
        "y": 1883,
        "wires": [
            [
                "2498c1b9.89a73e"
            ],
            []
        ]
    },
    {
        "id": "2498c1b9.89a73e",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "var sensors = msg.payload.home.inside_sensors||[];\nvar output = [];\nif(sensors.length!==0) {\n    for (const arr of sensors) {\n        let name = `${arr.name} / ${arr.register}`\n        output.push({[name]:arr})\n    }\n}\nif(output!==undefined) {\n    node.send({options:output});\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 834,
        "y": 1883,
        "wires": [
            [
                "1ce07a10.589406"
            ]
        ]
    },
    {
        "id": "af5403b7.bf541",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "",
        "x": 1155,
        "y": 1827,
        "wires": [
            []
        ]
    },
    {
        "id": "aa92aa28.ba94f8",
        "type": "catch",
        "z": "b7f67da0.fbf1",
        "name": "",
        "scope": [
            "7767041b.f6a2ac"
        ],
        "uncaught": false,
        "x": 610,
        "y": 1953,
        "wires": [
            [
                "70afba29.2d0e34"
            ]
        ]
    },
    {
        "id": "70afba29.2d0e34",
        "type": "ui_toast",
        "z": "b7f67da0.fbf1",
        "position": "bottom right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 881,
        "y": 2107,
        "wires": []
    },
    {
        "id": "88479ffd.f321c",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "let config = msg.config;\nif(config.home.inside_sensors!==undefined) {\n    let i = config.home.inside_sensors.findIndex(i => i.register == msg.payload.register);\n    if(i!==-1) {\n        config.home.inside_sensors.splice(i,1);\n        node.send({topic:\"setConfig\",payload:config});\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1240,
        "y": 1946,
        "wires": [
            []
        ]
    },
    {
        "id": "fbe205f1.95af88",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 1100,
        "y": 1981,
        "wires": [
            [
                "88479ffd.f321c"
            ],
            []
        ]
    },
    {
        "id": "112e4ce5.d4a8c3",
        "type": "ui_dropdown",
        "z": "df0dd648.98daa8",
        "name": "Välj inomhusgivare S1",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "33ed6fb8.2f3ce",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "weather/sensor",
        "x": 793,
        "y": 371,
        "wires": [
            [
                "c1f92f58.722e9"
            ]
        ]
    },
    {
        "id": "10e30751.e4e639",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "",
        "func": "var sensors = msg.payload.home.inside_sensors||[];\nvar output = [\"Ingen\"];\nfor (const arr of sensors) {\n    output.push(arr.name)\n}\nif(output!==undefined && output!==[]) {\n    node.send({options:output});\n    node.send({payload:msg.payload.weather.sensor_s1})\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 449,
        "y": 371,
        "wires": [
            [
                "430863d3.1bcaac"
            ]
        ]
    },
    {
        "id": "334236ca.6e53ba",
        "type": "nibe-input",
        "z": "df0dd648.98daa8",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 85,
        "y": 371,
        "wires": [
            [
                "10e30751.e4e639"
            ],
            []
        ]
    },
    {
        "id": "e9a893c0.59865",
        "type": "ui_ui_control",
        "z": "b7f67da0.fbf1",
        "name": "",
        "events": "change",
        "x": 214,
        "y": 2016,
        "wires": [
            [
                "a22ff0ff.aa4fa"
            ]
        ]
    },
    {
        "id": "a22ff0ff.aa4fa",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Inställningar",
        "func": "if(msg.name==\"Inställningar\") {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 371,
        "y": 2016,
        "wires": [
            [
                "f7fce578.ff4a68"
            ]
        ]
    },
    {
        "id": "f7fce578.ff4a68",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "60",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 584,
        "y": 2016,
        "wires": [
            [
                "e021eb6c.058688"
            ]
        ]
    },
    {
        "id": "e021eb6c.058688",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 736,
        "y": 2016,
        "wires": [
            [],
            [
                "2498c1b9.89a73e"
            ]
        ]
    },
    {
        "id": "72520bf5.692d14",
        "type": "nibe-input",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 134,
        "y": 546,
        "wires": [
            [
                "dff05253.9f618"
            ],
            []
        ]
    },
    {
        "id": "dff05253.9f618",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "",
        "func": "let config = msg.payload;\nlet lang = config.system.language;\nif(lang===undefined) lang = \"SE\";\nlet translate = global.get('translate');\nif(translate===undefined) return;\nvar sensors = msg.payload.home.inside_sensors||[];\nvar output = [\"Ingen\"];\nfor (const arr of sensors) {\n    output.push(arr.name)\n}\nif(output!==undefined && output!==[]) {\n    node.send({options:output,label:translate.dash.indoor_sensor_label[lang]});\n    if(msg.payload.indoor!==undefined) {\n        node.send({payload:msg.payload.indoor.sensor_s1,label:translate.dash.indoor_sensor_label[lang]})\n    }\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 428,
        "y": 546,
        "wires": [
            [
                "f421e95f.a41718"
            ]
        ]
    },
    {
        "id": "f421e95f.a41718",
        "type": "ui_dropdown",
        "z": "358baec9.c8b902",
        "name": "Välj inomhusgivare",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "a2cfe148.70708",
        "order": 9,
        "width": "0",
        "height": "0",
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "indoor/sensor",
        "x": 636,
        "y": 546,
        "wires": [
            [
                "fdd4d594.2498b8"
            ]
        ]
    },
    {
        "id": "fdd4d594.2498b8",
        "type": "nibe-indoor",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "adjust": "0.5",
        "x": 864,
        "y": 497,
        "wires": [
            [
                "7c62f68b.7e53a8"
            ],
            [
                "96122fbe.f0ca2"
            ]
        ]
    },
    {
        "id": "d68a22ce.9289d",
        "type": "ui_button",
        "z": "358baec9.c8b902",
        "name": "Uppdatera S1",
        "group": "a2cfe148.70708",
        "order": 12,
        "width": "12",
        "height": "1",
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 661,
        "y": 490,
        "wires": [
            [
                "fdd4d594.2498b8"
            ]
        ]
    },
    {
        "id": "c0a999e9.8d63b8",
        "type": "ui_switch",
        "z": "358baec9.c8b902",
        "name": "Aktivera Gradminut återställning",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "95b0af9c.89089",
        "order": 3,
        "width": "12",
        "height": "2",
        "passthru": false,
        "decouple": "true",
        "topic": "dm_reset_enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 333,
        "y": 1512,
        "wires": [
            [
                "c3b3d118.e4f23"
            ]
        ]
    },
    {
        "id": "c3b3d118.e4f23",
        "type": "subflow:c191a5d.5d76258",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "dm_reset_enable",
                "type": "str"
            }
        ],
        "x": 594,
        "y": 1512,
        "wires": [
            [
                "bb501ea0.7f712",
                "45c4e89b.42f168"
            ],
            []
        ]
    },
    {
        "id": "5e1062d0.a33cbc",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "a2cfe148.70708",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Inomhustemperatur S1",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}} ºC",
        "layout": "row-spread",
        "x": 1206,
        "y": 217,
        "wires": []
    },
    {
        "id": "7c62f68b.7e53a8",
        "type": "switch",
        "z": "358baec9.c8b902",
        "name": "Data",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Inomhustemperatur",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Avvikelse",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Kurvjustering",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1065,
        "y": 490,
        "wires": [
            [
                "c23e2c09.d88a6"
            ],
            [
                "cf0c0b96.d635f8"
            ],
            [
                "3a656a22.a89f06"
            ]
        ]
    },
    {
        "id": "61436d60.0601e4",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "70965431.b26cbc",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "Utomhustemperatur",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}} ºC",
        "layout": "row-spread",
        "x": 1241,
        "y": 854,
        "wires": []
    },
    {
        "id": "5f8c6837.106e18",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "70965431.b26cbc",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Gradminuter",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}} ºM",
        "layout": "row-spread",
        "x": 1232,
        "y": 805,
        "wires": []
    },
    {
        "id": "67e507d8.25dac8",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_enable_s1",
        "x": 440,
        "y": 252,
        "wires": [
            [
                "d23336a5.00c4a8"
            ],
            [
                "8df4a3c.164c26"
            ]
        ]
    },
    {
        "id": "8ebe60ad.11b1d",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "70965431.b26cbc",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Senast uppdaterad",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1294,
        "y": 917,
        "wires": []
    },
    {
        "id": "e78514aa.0d9f28",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "",
        "func": "msg.payload = getFormattedDate(msg.raw.timestamp);\nreturn msg;\nfunction getFormattedDate() {\n    var date = new Date();\n\n    var month = date.getMonth() + 1;\n    var day = date.getDate();\n    var hour = date.getHours();\n    var min = date.getMinutes();\n    var sec = date.getSeconds();\n\n    month = (month < 10 ? \"0\" : \"\") + month;\n    day = (day < 10 ? \"0\" : \"\") + day;\n    hour = (hour < 10 ? \"0\" : \"\") + hour;\n    min = (min < 10 ? \"0\" : \"\") + min;\n    sec = (sec < 10 ? \"0\" : \"\") + sec;\n\n    var str = hour + \":\" + min + \":\" + sec;\n\n    /*alert(str);*/\n\n    return str;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 981,
        "y": 917,
        "wires": [
            [
                "9a67d60e.ba8808"
            ]
        ]
    },
    {
        "id": "5725972f.b219a8",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "a2cfe148.70708",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Avvikelse",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}} %",
        "layout": "row-spread",
        "x": 1313,
        "y": 301,
        "wires": []
    },
    {
        "id": "cf0c0b96.d635f8",
        "type": "range",
        "z": "358baec9.c8b902",
        "minin": "1",
        "maxin": "2",
        "minout": "0",
        "maxout": "100",
        "action": "scale",
        "round": true,
        "property": "payload",
        "name": "",
        "x": 1152,
        "y": 301,
        "wires": [
            [
                "59eddd7.b42cd24"
            ]
        ]
    },
    {
        "id": "c475b1a1.ae577",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "a2cfe148.70708",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "Kurvjustering",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1211,
        "y": 259,
        "wires": []
    },
    {
        "id": "8dd4be0a.86e46",
        "type": "nibe-price",
        "z": "960078e.e3e6d88",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "adjust": "0",
        "x": 790,
        "y": 245,
        "wires": [
            [
                "63612ac7.366764",
                "9179d381.0be36",
                "d00a5f55.781ef"
            ],
            [
                "63612ac7.366764"
            ]
        ]
    },
    {
        "id": "3925bdab.14e9a2",
        "type": "ui_switch",
        "z": "960078e.e3e6d88",
        "name": "",
        "label": "NibePis Elprisreglering",
        "tooltip": "",
        "group": "f481a5f0.f9f1c8",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "price/enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 527,
        "y": 959,
        "wires": [
            [
                "321fde4.84f6d22",
                "aa3b6866.eabab8",
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "eafa7076.636ee",
        "type": "ui_dropdown",
        "z": "960078e.e3e6d88",
        "name": "HW Very high price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "2e9c7d75.ee6312",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "Ekonomi (0)",
                "value": "0",
                "type": "str"
            },
            {
                "label": "Normal (1)",
                "value": "1",
                "type": "str"
            },
            {
                "label": "Lyx (2)",
                "value": "2",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "hotwater_very_expensive",
        "x": 1238,
        "y": 1099,
        "wires": [
            [
                "40e36211.562a3c"
            ]
        ]
    },
    {
        "id": "4a4b467b.cb3d98",
        "type": "ui_dropdown",
        "z": "960078e.e3e6d88",
        "name": "HW Price normal",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "2e9c7d75.ee6312",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "Ekonomi (0)",
                "value": "0",
                "type": "str"
            },
            {
                "label": "Normal (1)",
                "value": "1",
                "type": "str"
            },
            {
                "label": "Lyx (2)",
                "value": "2",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "hotwater_normal",
        "x": 1238,
        "y": 1190,
        "wires": [
            [
                "58a6446.c8ceebc"
            ]
        ]
    },
    {
        "id": "64b8af88.aedae",
        "type": "ui_dropdown",
        "z": "960078e.e3e6d88",
        "name": "HW Price low",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "2e9c7d75.ee6312",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "Ekonomi (0)",
                "value": "0",
                "type": "str"
            },
            {
                "label": "Normal (1)",
                "value": "1",
                "type": "str"
            },
            {
                "label": "Lyx (2)",
                "value": "2",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "hotwater_cheap",
        "x": 1228,
        "y": 1239,
        "wires": [
            [
                "5ea44899.ef5278"
            ]
        ]
    },
    {
        "id": "3b93422b.85e62e",
        "type": "ui_dropdown",
        "z": "960078e.e3e6d88",
        "name": "HW Very low price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "2e9c7d75.ee6312",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "Ekonomi (0)",
                "value": "0",
                "type": "str"
            },
            {
                "label": "Normal (1)",
                "value": "1",
                "type": "str"
            },
            {
                "label": "Lyx (2)",
                "value": "2",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "hotwater_very_cheap",
        "x": 1238,
        "y": 1288,
        "wires": [
            [
                "57585f07.0f133"
            ]
        ]
    },
    {
        "id": "e0b7517f.586f3",
        "type": "ui_switch",
        "z": "960078e.e3e6d88",
        "name": "Varmvattenreglering",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "2e9c7d75.ee6312",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "hotwater_enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 1409,
        "y": 1400,
        "wires": [
            [
                "d67cd90b.4e8bd8"
            ]
        ]
    },
    {
        "id": "b18004d5.977448",
        "type": "ui_text_input",
        "z": "960078e.e3e6d88",
        "name": "",
        "label": "Tibber Token",
        "tooltip": "",
        "group": "f481a5f0.f9f1c8",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "token",
        "x": 1281,
        "y": 840,
        "wires": [
            [
                "73a31dd2.de8774"
            ]
        ]
    },
    {
        "id": "9179d381.0be36",
        "type": "ui_chart",
        "z": "960078e.e3e6d88",
        "name": "Elprisreglering S1",
        "group": "90803197.41c34",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "dd HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 916,
        "y": 49,
        "wires": [
            []
        ]
    },
    {
        "id": "8af5cb53.d25198",
        "type": "ui_ui_control",
        "z": "960078e.e3e6d88",
        "name": "",
        "events": "all",
        "x": 95,
        "y": 854,
        "wires": [
            [
                "912b5ed8.d07cf"
            ]
        ]
    },
    {
        "id": "912b5ed8.d07cf",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "Elprisreglering",
        "func": "var timeSaved = context.get('time')||(Date.now()-1000);\nvar time = Date.now();\nif(msg.name==\"Elprisreglering\") {\n    if(time>timeSaved) {\n        context.set('time',(time+60000));\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 276,
        "y": 854,
        "wires": [
            [
                "1e4f140c.04c97c",
                "419d4955.0dded8",
                "749fe356.3ce75c"
            ]
        ]
    },
    {
        "id": "1e4f140c.04c97c",
        "type": "nibe-request",
        "z": "960078e.e3e6d88",
        "server": "844659a2.8d8508",
        "name": "price_enable",
        "x": 469,
        "y": 854,
        "wires": [
            [],
            [
                "9ff28997.48cac8",
                "d383b3f8.c2437",
                "b1268c57.e21f8"
            ]
        ]
    },
    {
        "id": "54bb4384.e1936c",
        "type": "ui_switch",
        "z": "960078e.e3e6d88",
        "name": "",
        "label": "Nibes Elprisreglering",
        "tooltip": "",
        "group": "f481a5f0.f9f1c8",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "",
        "style": "",
        "onvalue": "30",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "10",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 527,
        "y": 917,
        "wires": [
            []
        ]
    },
    {
        "id": "d54ff528.d710e8",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 111,
        "y": 910,
        "wires": [
            [
                "ca69923.4d49f7"
            ],
            [
                "217bd6b8.16c73a"
            ]
        ]
    },
    {
        "id": "2ec7e694.30d2ea",
        "type": "ui_dropdown",
        "z": "960078e.e3e6d88",
        "name": "",
        "label": "Datakälla",
        "tooltip": "Välj vart elprisuppgifter ska hämtas från",
        "place": "Välj datakälla",
        "group": "f481a5f0.f9f1c8",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [],
        "payload": "",
        "topic": "source",
        "x": 228,
        "y": 1015,
        "wires": [
            [
                "f6c2eadb.af1c28"
            ]
        ]
    },
    {
        "id": "f6c2eadb.af1c28",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "source",
                "type": "str"
            }
        ],
        "x": 391,
        "y": 1057,
        "wires": [
            [
                "2ec7e694.30d2ea"
            ],
            [
                "dc3a27b1.8a8ef8"
            ]
        ]
    },
    {
        "id": "4d63b4e4.90710c",
        "type": "ui_button",
        "z": "960078e.e3e6d88",
        "name": "Uppdatera S1",
        "group": "90803197.41c34",
        "order": 3,
        "width": 12,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 619,
        "y": 49,
        "wires": [
            [
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "68d91eb2.2d481",
        "type": "ui_switch",
        "z": "960078e.e3e6d88",
        "name": "Aktivera S1",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "1b40f24f.7b6d9e",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "price/enable_heat",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 518,
        "y": 112,
        "wires": [
            [
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "12912295.62786d",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_heat_s1",
                "type": "str"
            }
        ],
        "x": 104,
        "y": 98,
        "wires": [
            [
                "4b74034e.97b88c"
            ],
            []
        ]
    },
    {
        "id": "254cff77.34a55",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_heat_s2",
                "type": "str"
            }
        ],
        "x": 111,
        "y": 777,
        "wires": [
            [
                "ebb4c96d.141e78"
            ],
            []
        ]
    },
    {
        "id": "4849d6b9.2a3868",
        "type": "ui_switch",
        "z": "960078e.e3e6d88",
        "name": "Aktivera S2",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "94305680.d32c48",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "price/enable_heat",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 490,
        "y": 777,
        "wires": [
            [
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "360796e8.919dfa",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "token",
                "type": "str"
            }
        ],
        "x": 1231,
        "y": 952,
        "wires": [
            [
                "5a685251.39ba2c"
            ],
            []
        ]
    },
    {
        "id": "aa3b6866.eabab8",
        "type": "nibe-price",
        "z": "960078e.e3e6d88",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s2",
        "adjust": "0",
        "x": 790,
        "y": 777,
        "wires": [
            [
                "ef64204.7fdb6e",
                "92d4347e.266668"
            ],
            []
        ]
    },
    {
        "id": "44279d43.2995f4",
        "type": "ui_form",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "Send value",
        "group": "bd199d65.157fc",
        "order": 4,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Register",
                "value": "register",
                "type": "number",
                "required": true
            },
            {
                "label": "Value",
                "value": "value",
                "type": "number",
                "required": true
            }
        ],
        "formValue": {
            "register": "",
            "value": ""
        },
        "payload": "",
        "submit": "Send",
        "cancel": "",
        "topic": "",
        "x": 325,
        "y": 1533,
        "wires": [
            [
                "2effd06.0f5ca3"
            ]
        ]
    },
    {
        "id": "4539bf17.179d5",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "",
        "x": 742,
        "y": 1533,
        "wires": [
            [
                "5e0de75.c411d18"
            ]
        ]
    },
    {
        "id": "2effd06.0f5ca3",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "msg.topic = msg.payload.register;\nmsg.payload = msg.payload.value;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 526,
        "y": 1533,
        "wires": [
            [
                "4539bf17.179d5"
            ]
        ]
    },
    {
        "id": "5a685251.39ba2c",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "Hide token",
        "func": "if(msg.payload!==\"\" && msg.payload!==undefined) {\n    msg.payload = \"Token inlagd\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1064,
        "y": 840,
        "wires": [
            [
                "b18004d5.977448"
            ]
        ]
    },
    {
        "id": "73a31dd2.de8774",
        "type": "switch",
        "z": "960078e.e3e6d88",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "Token inlagd",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1065,
        "y": 952,
        "wires": [
            [
                "360796e8.919dfa"
            ]
        ]
    },
    {
        "id": "63612ac7.366764",
        "type": "debug",
        "z": "960078e.e3e6d88",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 882,
        "y": 105,
        "wires": []
    },
    {
        "id": "40e36211.562a3c",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "hotwater_very_expensive",
                "type": "str"
            }
        ],
        "x": 839,
        "y": 1099,
        "wires": [
            [
                "3acfc69e.2e5b7a"
            ],
            []
        ]
    },
    {
        "id": "9e47d1c5.a1f6a",
        "type": "ui_dropdown",
        "z": "960078e.e3e6d88",
        "name": "HW Price high",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "2e9c7d75.ee6312",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "Ekonomi (0)",
                "value": "0",
                "type": "str"
            },
            {
                "label": "Normal (1)",
                "value": "1",
                "type": "str"
            },
            {
                "label": "Lyx (2)",
                "value": "2",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "hotwater_expensive",
        "x": 1228,
        "y": 1141,
        "wires": [
            [
                "21d246a8.2de9aa"
            ]
        ]
    },
    {
        "id": "21d246a8.2de9aa",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "hotwater_expensive",
                "type": "str"
            }
        ],
        "x": 839,
        "y": 1141,
        "wires": [
            [
                "8f047f2c.17ca2"
            ],
            []
        ]
    },
    {
        "id": "58a6446.c8ceebc",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "hotwater_normal",
                "type": "str"
            }
        ],
        "x": 839,
        "y": 1190,
        "wires": [
            [
                "4d894d01.bf0bd4"
            ],
            []
        ]
    },
    {
        "id": "5ea44899.ef5278",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "hotwater_cheap",
                "type": "str"
            }
        ],
        "x": 839,
        "y": 1239,
        "wires": [
            [
                "a5849259.9e6af"
            ],
            []
        ]
    },
    {
        "id": "57585f07.0f133",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "hotwater_very_cheap",
                "type": "str"
            }
        ],
        "x": 839,
        "y": 1281,
        "wires": [
            [
                "4d67c25.01caa3c"
            ],
            []
        ]
    },
    {
        "id": "d67cd90b.4e8bd8",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "hotwater_enable",
                "type": "str"
            }
        ],
        "x": 993,
        "y": 1400,
        "wires": [
            [
                "6d8f9864.7c5bd8"
            ],
            []
        ]
    },
    {
        "id": "40c00df0.72a6e4",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "S1 High price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "1b40f24f.7b6d9e",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/heat_expensive",
        "min": "-10",
        "max": "0",
        "step": 1,
        "x": 549,
        "y": 224,
        "wires": [
            [
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "b30b63c9.c96a9",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "S1 Low price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "1b40f24f.7b6d9e",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/heat_cheap",
        "min": "0",
        "max": 10,
        "step": 1,
        "x": 539,
        "y": 273,
        "wires": [
            [
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "b3a09f2.d70226",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "S1 Very low price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "1b40f24f.7b6d9e",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/heat_very_cheap",
        "min": "0",
        "max": 10,
        "step": 1,
        "x": 559,
        "y": 322,
        "wires": [
            [
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "1e82db4e.4957f5",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "heat_expensive_s1",
                "type": "str"
            }
        ],
        "x": 118,
        "y": 231,
        "wires": [
            [
                "2bf75acd.6e0c56"
            ],
            []
        ]
    },
    {
        "id": "c30269ad.b26128",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "S1 Very high price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "1b40f24f.7b6d9e",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/heat_very_expensive",
        "min": "-10",
        "max": "0",
        "step": 1,
        "x": 559,
        "y": 175,
        "wires": [
            [
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "a44c9b0.7de6a68",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "heat_very_expensive_s1",
                "type": "str"
            }
        ],
        "x": 118,
        "y": 182,
        "wires": [
            [
                "441f61ff.6102a"
            ],
            []
        ]
    },
    {
        "id": "59781121.2432f",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "heat_cheap_s1",
                "type": "str"
            }
        ],
        "x": 118,
        "y": 280,
        "wires": [
            [
                "505cc480.19349c"
            ],
            []
        ]
    },
    {
        "id": "2691b2ec.33f61e",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "heat_very_cheap_s1",
                "type": "str"
            }
        ],
        "x": 118,
        "y": 329,
        "wires": [
            [
                "cf92a1d0.7c1e4"
            ],
            []
        ]
    },
    {
        "id": "523b61b1.02fb1",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "e6946a7.5e1e698",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "Nuvarande elpris",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1119,
        "y": 203,
        "wires": []
    },
    {
        "id": "800a0005.55ffc",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "e6946a7.5e1e698",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Nuvarande Elprisnivå",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1255,
        "y": 245,
        "wires": []
    },
    {
        "id": "91d8769c.f63f68",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "",
        "func": "let config = msg.config;\nlet lang = config.system.language;\nif(lang===undefined) lang = \"SE\";\nlet translate = global.get('translate');\nif(translate===undefined) return;\nlet level = {\n    UNKNOWN: translate.dash.unknown[lang],\n    VERY_CHEAP: translate.dash.price_very_low[lang],\n    CHEAP: translate.dash.price_low[lang],\n    NORMAL:translate.dash.price_normal[lang],\n    EXPENSIVE: translate.dash.price_high[lang],\n    VERY_EXPENSIVE: translate.dash.price_very_high[lang]\n}\nif(msg.topic==\"Nuvarande Elpris\") {\n    node.send([{payload:`${msg.payload} ${translate.dash.currency[lang]}`}])\n} else if(msg.topic==\"Nuvarande Elprisnivå\") {\n    node.send([null,{payload:level[msg.payload]}])\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 841,
        "y": 168,
        "wires": [
            [
                "c2fe36ce.9b31c8"
            ],
            [
                "b5708131.42abc"
            ]
        ]
    },
    {
        "id": "dc3a27b1.8a8ef8",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "Enable/Disable Source",
        "func": "let source = msg.payload.price.source;\nif(source==\"tibber\") {\n    msg = {\n    enabled:true\n};\nreturn msg;\n} else if(source==\"nibe\") {\n    msg = {\n    enabled:false\n};\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 660,
        "y": 1050,
        "wires": [
            [
                "3b93422b.85e62e",
                "b18004d5.977448",
                "441f61ff.6102a",
                "cf92a1d0.7c1e4",
                "fb86684e.674ae8",
                "18e6dbef.c26bc4",
                "3acfc69e.2e5b7a"
            ]
        ]
    },
    {
        "id": "ef64204.7fdb6e",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "Enable/Disable",
        "func": "if(msg.enabled!==undefined) {\n    let hide = {\n        \"group\":\n            {\"hide\":\n                [\"Elprisreglering_Graf_S2\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n} else {\n    let hide = {\n        \"group\":\n            {\"show\":\n                [\"Elprisreglering_Graf_S2\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 1018,
        "y": 777,
        "wires": [
            [],
            [
                "a2a91bd1.6ad658"
            ]
        ]
    },
    {
        "id": "a2a91bd1.6ad658",
        "type": "ui_ui_control",
        "z": "960078e.e3e6d88",
        "name": "Disable Group S2",
        "events": "all",
        "x": 1224,
        "y": 749,
        "wires": [
            []
        ]
    },
    {
        "id": "217bd6b8.16c73a",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "Enable/Disable NibePi",
        "func": "let source = msg.payload.price.enable;\nif(source===true) {\n    msg = {\n    enabled:true\n};\nreturn msg;\n} else if(source===false) {\n    msg = {\n    enabled:false\n};\n\nreturn msg;\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1241,
        "y": 588,
        "wires": [
            [
                "2ec7e694.30d2ea",
                "b18004d5.977448",
                "8f047f2c.17ca2",
                "4d894d01.bf0bd4",
                "a5849259.9e6af",
                "4d67c25.01caa3c",
                "441f61ff.6102a",
                "2bf75acd.6e0c56",
                "505cc480.19349c",
                "cf92a1d0.7c1e4",
                "fb86684e.674ae8",
                "49bcf77d.cd5d98",
                "a637f228.74303",
                "18e6dbef.c26bc4",
                "ebb4c96d.141e78",
                "4b74034e.97b88c",
                "3acfc69e.2e5b7a",
                "6d8f9864.7c5bd8"
            ],
            [
                "8dd4be0a.86e46",
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "1bb82fc2.e8b78",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "S2 High price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "94305680.d32c48",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/heat_expensive",
        "min": "-10",
        "max": "0",
        "step": 1,
        "x": 493,
        "y": 609,
        "wires": [
            [
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "de834f9d.9b477",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "S2 Low price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "94305680.d32c48",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/heat_cheap",
        "min": "0",
        "max": 10,
        "step": 1,
        "x": 483,
        "y": 658,
        "wires": [
            [
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "b0a104eb.836b28",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "S2 Very low price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "94305680.d32c48",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/heat_very_cheap",
        "min": "0",
        "max": 10,
        "step": 1,
        "x": 503,
        "y": 714,
        "wires": [
            [
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "d2766d78.d5abf",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "heat_expensive_s2",
                "type": "str"
            }
        ],
        "x": 111,
        "y": 609,
        "wires": [
            [
                "49bcf77d.cd5d98"
            ],
            []
        ]
    },
    {
        "id": "d07cb165.8756a",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "S2 Very high price",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "94305680.d32c48",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/heat_very_expensive",
        "min": "-10",
        "max": "0",
        "step": 1,
        "x": 503,
        "y": 560,
        "wires": [
            [
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "5ed538ba.60f5e8",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "heat_very_expensive_s2",
                "type": "str"
            }
        ],
        "x": 111,
        "y": 560,
        "wires": [
            [
                "fb86684e.674ae8"
            ],
            []
        ]
    },
    {
        "id": "a3c9c25b.1c4fc",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "heat_cheap_s2",
                "type": "str"
            }
        ],
        "x": 111,
        "y": 658,
        "wires": [
            [
                "a637f228.74303"
            ],
            []
        ]
    },
    {
        "id": "eb82842d.507e48",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "heat_very_cheap_s2",
                "type": "str"
            }
        ],
        "x": 111,
        "y": 707,
        "wires": [
            [
                "18e6dbef.c26bc4"
            ],
            []
        ]
    },
    {
        "id": "9958a8f1.7abba8",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "f481a5f0.f9f1c8",
        "order": 2,
        "width": "12",
        "height": "2",
        "name": "SmartPrice Info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "x": 1487,
        "y": 658,
        "wires": []
    },
    {
        "id": "9ff28997.48cac8",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "Enable/Disable SmartPrice",
        "func": "let source = msg.payload;\nif(source==\"30\") {\n    msg = {\n    enabled:true\n};\nreturn msg;\n} else if(source==\"10\") {\n    msg = {\n    enabled:false\n};\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 792,
        "y": 686,
        "wires": [
            [
                "f3502562.d64188"
            ]
        ]
    },
    {
        "id": "f5bfde4f.200e",
        "type": "ui_dropdown",
        "z": "358baec9.c8b902",
        "name": "Inomhusreglering S1",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "",
        "group": "a2cfe148.70708",
        "order": 2,
        "width": "0",
        "height": "0",
        "passthru": false,
        "options": [],
        "payload": "",
        "topic": "site",
        "x": 429,
        "y": 154,
        "wires": [
            [
                "8cec67c8.150f68"
            ]
        ]
    },
    {
        "id": "d23336a5.00c4a8",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "",
        "func": "let nibe = msg.inside_enable_s1;\nlet config = msg.config;\nlet lang = config.system.language;\nif(lang===undefined) lang = \"SE\";\nlet translate = global.get('translate');\nif(translate===undefined) return;\nlet nibepi = msg.config.indoor.enable_s1;\nlet options = [ {[translate.dash.indoor_options_off[lang]]:\"off\"}, {[translate.dash.indoor_options_nibe[lang]]:\"nibe\"}, {[translate.dash.indoor_options_nibepi[lang]]:\"nibepi\"} ]\nmsg.topic = \"red\";\nmsg.label = translate.dash.indoor_options_label[lang];\nnode.send({options:options,label:translate.dash.indoor_options_label[lang]});\nif(nibe===1 && (nibepi===undefined || nibepi===false)) {\n    msg.payload = \"nibe\";\n} else if(nibe===0 && nibepi===true) {\n    msg.payload = \"nibepi\";\n} else {\n    msg.payload = \"off\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 246,
        "y": 154,
        "wires": [
            [
                "f5bfde4f.200e",
                "f65e7c49.0cfac"
            ]
        ]
    },
    {
        "id": "f65e7c49.0cfac",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "",
        "func": "let config = msg.config;\nlet topic = msg.topic;\nif(msg.payload==\"nibe\") {\n    //config.indoor.enable_s1 = false;\n    //config.indoor.sensor_s1 = undefined;\n    if(topic==\"site\") {\n        node.send([{topic:\"inside_enable_s1\",payload:1},{topic:\"indoor/enable\",payload:false},{enabled:true},{enabled:false}]);\n        node.send([null,{topic:\"indoor/sensor\",payload:undefined}])\n    } else {\n        node.send([null,null,{enabled:true},{enabled:false}]);\n    }\n    \n} else if(msg.payload==\"nibepi\") {\n    //config.indoor.enable_s1 = true;\n    if(topic==\"site\") {\n        node.send([{topic:\"inside_enable_s1\",payload:0},{topic:\"indoor/enable\",payload:true},{enabled:true},{enabled:true}]);\n    } else {\n        node.send([null,null,{enabled:true},{enabled:true}]);\n    }\n} else {\n    //config.indoor.enable_s1 = false;\n    //config.indoor.sensor_s1 = undefined;\n    if(topic==\"site\") {\n        node.send([{topic:\"inside_enable_s1\",payload:0},{topic:\"indoor/enable\",payload:false},{enabled:false},{enabled:false}]);\n        node.send([null,{topic:\"indoor/sensor\",payload:undefined}])\n    } else {\n        node.send([null,null,{enabled:false},{enabled:false}]);\n    }\n}",
        "outputs": 4,
        "noerr": 0,
        "x": 743,
        "y": 189,
        "wires": [
            [
                "f9a0b44f.224b78"
            ],
            [
                "fdd4d594.2498b8"
            ],
            [
                "880a8a15.a3fa68",
                "947f9547.f50a58",
                "1de35891.f49887",
                "45c4e89b.42f168",
                "66fc03ec.ccb5ac"
            ],
            [
                "f421e95f.a41718",
                "92856418.de77b8",
                "3a656a22.a89f06"
            ]
        ]
    },
    {
        "id": "d6176cc8.3e0d3",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 267,
        "y": 252,
        "wires": [
            [
                "67e507d8.25dac8"
            ],
            []
        ]
    },
    {
        "id": "8cec67c8.150f68",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 610,
        "y": 133,
        "wires": [
            [
                "f65e7c49.0cfac"
            ],
            []
        ]
    },
    {
        "id": "f9a0b44f.224b78",
        "type": "nibe-output",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "",
        "x": 945,
        "y": 147,
        "wires": [
            []
        ]
    },
    {
        "id": "d136e0d4.36424",
        "type": "ui_slider",
        "z": "358baec9.c8b902",
        "name": "Inomhusbörvärde S2",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "6ee1e12a.a6f04",
        "order": 6,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "",
        "min": "5",
        "max": "30",
        "step": "0.5",
        "x": 989,
        "y": 1078,
        "wires": [
            [
                "b78dec32.a1881"
            ]
        ]
    },
    {
        "id": "d5bb2eff.594fe",
        "type": "ui_slider",
        "z": "358baec9.c8b902",
        "name": "Faktor för Inomhusgivare",
        "label": "{{msg.label}}",
        "tooltip": "Ställ in hur mycket inomhus givare ska påverka framledningstemperaturen.",
        "group": "6ee1e12a.a6f04",
        "order": 7,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "inside_factor",
        "min": "0",
        "max": "6",
        "step": "0.1",
        "x": 915,
        "y": 1232,
        "wires": [
            [
                "f74bcb8.67d6438"
            ]
        ]
    },
    {
        "id": "b78dec32.a1881",
        "type": "nibe-output",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_set_s2",
        "x": 948,
        "y": 1134,
        "wires": [
            [
                "721aa32b.de616c"
            ]
        ]
    },
    {
        "id": "64fe7e0e.2c1d6",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_set_s2",
        "x": 479,
        "y": 1141,
        "wires": [
            [],
            [
                "2c965701.af9058",
                "721aa32b.de616c"
            ]
        ]
    },
    {
        "id": "6696956c.64474c",
        "type": "ui_ui_control",
        "z": "358baec9.c8b902",
        "name": "",
        "events": "all",
        "x": 109,
        "y": 1134,
        "wires": [
            [
                "81278907.1d9f08"
            ]
        ]
    },
    {
        "id": "81278907.1d9f08",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "Inomhusreglering",
        "func": "var timeSaved = context.get('time')||(Date.now()-1000);\nvar time = Date.now();\nif(msg.name==\"Inomhusreglering\") {\n    if(time>timeSaved) {\n        context.set('time',(time+30000));\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 251,
        "y": 1197,
        "wires": [
            [
                "b123c693.644da8"
            ]
        ]
    },
    {
        "id": "2c965701.af9058",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_factor_s2",
        "x": 479,
        "y": 1232,
        "wires": [
            [],
            [
                "4c09e022.c61bf"
            ]
        ]
    },
    {
        "id": "f74bcb8.67d6438",
        "type": "nibe-output",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_factor_s2",
        "x": 1130,
        "y": 1232,
        "wires": [
            [
                "4c09e022.c61bf"
            ]
        ]
    },
    {
        "id": "4990a4f.f34705c",
        "type": "nibe-input",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 141,
        "y": 1379,
        "wires": [
            [
                "47ac4ac3.4282f4"
            ],
            []
        ]
    },
    {
        "id": "47ac4ac3.4282f4",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "",
        "func": "let config = msg.payload;\nlet lang = config.system.language;\nif(lang===undefined) lang = \"SE\";\nlet translate = global.get('translate');\nif(translate===undefined) return;\nvar sensors = msg.payload.home.inside_sensors||[];\nvar output = [\"Ingen\"];\nfor (const arr of sensors) {\n    output.push(arr.name)\n}\nif(output!==undefined && output!==[]) {\n    node.send({options:output,label:translate.dash.indoor_sensor_label[lang]});\n    if(msg.payload.indoor!==undefined) {\n        node.send({payload:msg.payload.indoor.sensor_s2,label:translate.dash.indoor_sensor_label[lang]})\n    }\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 449,
        "y": 1379,
        "wires": [
            [
                "49524e59.d3921"
            ]
        ]
    },
    {
        "id": "49524e59.d3921",
        "type": "ui_dropdown",
        "z": "358baec9.c8b902",
        "name": "Välj Inomhusgivare",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "6ee1e12a.a6f04",
        "order": 9,
        "width": "0",
        "height": "0",
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "indoor/sensor",
        "x": 643,
        "y": 1379,
        "wires": [
            [
                "26c121a.21b7bde"
            ]
        ]
    },
    {
        "id": "26c121a.21b7bde",
        "type": "nibe-indoor",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s2",
        "adjust": "0",
        "x": 857,
        "y": 1330,
        "wires": [
            [
                "24024128.b41ebe",
                "76dc2468.d143ec"
            ],
            []
        ]
    },
    {
        "id": "98a2ba00.9574c8",
        "type": "ui_button",
        "z": "358baec9.c8b902",
        "name": "Uppdatera S2",
        "group": "6ee1e12a.a6f04",
        "order": 12,
        "width": "12",
        "height": "1",
        "passthru": false,
        "label": "Uppdatera",
        "tooltip": "Begär ny data och uppdatera grafen med nya värden.",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 654,
        "y": 1330,
        "wires": [
            [
                "26c121a.21b7bde"
            ]
        ]
    },
    {
        "id": "2f4cb05b.407d1",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "6ee1e12a.a6f04",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Inomhustemp S2",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}} ºC",
        "layout": "row-spread",
        "x": 1329,
        "y": 1050,
        "wires": []
    },
    {
        "id": "24024128.b41ebe",
        "type": "switch",
        "z": "358baec9.c8b902",
        "name": "Data",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Inomhustemperatur",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Utomhustemperatur",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Gradminuter",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Tid",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Avvikelse",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Kurvjustering",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 6,
        "x": 1072,
        "y": 1323,
        "wires": [
            [
                "b6daec46.8822a"
            ],
            [],
            [],
            [],
            [
                "8d1f9f48.44fef"
            ],
            [
                "2923a70.4a9a75a"
            ]
        ]
    },
    {
        "id": "38c0fc67.e35064",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "inside_enable_s2",
        "x": 447,
        "y": 1085,
        "wires": [
            [
                "15058f79.4342b1"
            ],
            [
                "64fe7e0e.2c1d6"
            ]
        ]
    },
    {
        "id": "8cf9b82c.df7338",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "6ee1e12a.a6f04",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Avvikelse",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}} %",
        "layout": "row-spread",
        "x": 1460,
        "y": 1134,
        "wires": []
    },
    {
        "id": "8d1f9f48.44fef",
        "type": "range",
        "z": "358baec9.c8b902",
        "minin": "1",
        "maxin": "2",
        "minout": "0",
        "maxout": "100",
        "action": "scale",
        "round": true,
        "property": "payload",
        "name": "",
        "x": 1159,
        "y": 1134,
        "wires": [
            [
                "5c86ba4a.ba2dc4"
            ]
        ]
    },
    {
        "id": "ced9439e.afef",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "6ee1e12a.a6f04",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "Kurvjustering",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1358,
        "y": 1092,
        "wires": []
    },
    {
        "id": "67f0bc49.0491c4",
        "type": "ui_dropdown",
        "z": "358baec9.c8b902",
        "name": "Inomhusreglering S2",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "",
        "group": "6ee1e12a.a6f04",
        "order": 2,
        "width": "0",
        "height": "0",
        "passthru": false,
        "options": [],
        "payload": "",
        "topic": "site",
        "x": 436,
        "y": 987,
        "wires": [
            [
                "f8a95348.53c3c"
            ]
        ]
    },
    {
        "id": "15058f79.4342b1",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "",
        "func": "let nibe = msg.inside_enable_s2;\nlet config = msg.config;\nlet lang = config.system.language;\nif(lang===undefined) lang = \"SE\";\nlet translate = global.get('translate');\nif(translate===undefined) return;\nlet nibepi = msg.config.indoor.enable_s2;\nlet options = [ {[translate.dash.indoor_options_off[lang]]:\"off\"}, {[translate.dash.indoor_options_nibe[lang]]:\"nibe\"}, {[translate.dash.indoor_options_nibepi[lang]]:\"nibepi\"} ]\nmsg.topic = \"red\";\nmsg.label = translate.dash.indoor_options_label[lang];\nnode.send({options:options,label:translate.dash.indoor_options_label[lang]});\nif(nibe===1 && (nibepi===undefined || nibepi===false)) {\n    msg.payload = \"nibe\";\n} else if(nibe===0 && nibepi===true) {\n    msg.payload = \"nibepi\";\n} else {\n    msg.payload = \"off\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 253,
        "y": 987,
        "wires": [
            [
                "67f0bc49.0491c4"
            ]
        ]
    },
    {
        "id": "edac8d3e.c5625",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "",
        "func": "let config = msg.config;\nlet topic = msg.topic;\nif(msg.payload==\"nibe\") {\n    //config.indoor.enable_s2 = false;\n    //config.indoor.sensor_s2 = undefined;\n    if(topic==\"site\") {\n        node.send([{topic:\"inside_enable_s2\",payload:1},{topic:\"indoor/enable\",payload:false},{enabled:true},{enabled:false}]);\n        node.send([null,{topic:\"indoor/sensor\",payload:undefined}])\n    } else {\n        node.send([null,null,{enabled:true},{enabled:false}]);\n    }\n    \n} else if(msg.payload==\"nibepi\") {\n    //config.indoor.enable_s2 = true;\n    if(topic==\"site\") {\n        node.send([{topic:\"inside_enable_s2\",payload:0},{topic:\"indoor/enable\",payload:true},{enabled:true},{enabled:true}]);\n    } else {\n        node.send([null,null,{enabled:true},{enabled:true}]);\n    }\n} else {\n    config.indoor.enable_s2 = false;\n    config.indoor.sensor_s2 = undefined;\n    if(topic==\"site\") {\n        node.send([{topic:\"inside_enable_s2\",payload:0},{topic:\"indoor/enable\",payload:false},{enabled:false},{enabled:false}]);\n        node.send([null,{topic:\"indoor/sensor\",payload:undefined}])\n    } else {\n        node.send([null,null,{enabled:false},{enabled:false}]);\n    }\n}",
        "outputs": 4,
        "noerr": 0,
        "x": 743,
        "y": 987,
        "wires": [
            [
                "f27d9d77.fbdb"
            ],
            [
                "26c121a.21b7bde"
            ],
            [
                "721aa32b.de616c",
                "4c09e022.c61bf",
                "fed1a642.dfbb18"
            ],
            [
                "49524e59.d3921"
            ]
        ]
    },
    {
        "id": "b123c693.644da8",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 274,
        "y": 1085,
        "wires": [
            [
                "38c0fc67.e35064",
                "8b9852c2.592fa"
            ],
            []
        ]
    },
    {
        "id": "f8a95348.53c3c",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 575,
        "y": 889,
        "wires": [
            [
                "edac8d3e.c5625"
            ],
            []
        ]
    },
    {
        "id": "f27d9d77.fbdb",
        "type": "nibe-output",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "",
        "x": 917,
        "y": 987,
        "wires": [
            []
        ]
    },
    {
        "id": "76dc2468.d143ec",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "Enable/Disable",
        "func": "if(msg.enabled!==undefined && msg.enabled===false) {\n    node.send(msg);\n    let hide = {\n        \"group\":\n            {\"hide\":\n                [\"Inomhusreglering_Inomhusreglering_S2\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n} else if(msg.enabled===true) {\n    let hide = {\n        \"group\":\n            {\"show\":\n                [\"Inomhusreglering_Inomhusreglering_S2\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 913,
        "y": 1407,
        "wires": [
            [],
            [
                "9410373f.75f968"
            ]
        ]
    },
    {
        "id": "9410373f.75f968",
        "type": "ui_ui_control",
        "z": "358baec9.c8b902",
        "name": "Disable Group S2",
        "events": "all",
        "x": 1133,
        "y": 1407,
        "wires": [
            []
        ]
    },
    {
        "id": "4711e827.788878",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "system",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "readonly",
                "type": "str"
            }
        ],
        "x": 1266,
        "y": 399,
        "wires": [
            [
                "a4e3fd6e.1230d"
            ],
            []
        ]
    },
    {
        "id": "9414a4e7.3d88c8",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "Read-only",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "da3c0db0.9c6aa",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "readonly",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 1057,
        "y": 399,
        "wires": [
            [
                "4711e827.788878"
            ]
        ]
    },
    {
        "id": "6a959097.836b1",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Enable/Disable",
        "func": "if(msg.payload<=-3275) {\n    let hide = {\n        \"group\":\n            {\"hide\":\n                [\"Inställningar_Värmekurva_S2\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n} else {\n    let hide = {\n        \"group\":\n            {\"show\":\n                [\"Inställningar_Värmekurva_S2\"]\n            }\n        }\n    node.send([msg,{payload:hide}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 367,
        "y": 665,
        "wires": [
            [
                "1870fc41.cbc664"
            ],
            [
                "b532e9d.acf2018"
            ]
        ]
    },
    {
        "id": "b532e9d.acf2018",
        "type": "ui_ui_control",
        "z": "b7f67da0.fbf1",
        "name": "Disable Group S2",
        "events": "all",
        "x": 601,
        "y": 686,
        "wires": [
            []
        ]
    },
    {
        "id": "fe91dfd1.92491",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "HA Discovery",
        "tooltip": "",
        "group": "723a0250.fd7dcc",
        "order": 3,
        "width": "6",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "discovery",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 157,
        "y": 273,
        "wires": [
            [
                "cdec2513.52ee18"
            ]
        ]
    },
    {
        "id": "cdec2513.52ee18",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "mqtt",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "discovery",
                "type": "str"
            }
        ],
        "x": 395,
        "y": 273,
        "wires": [
            [
                "fe91dfd1.92491"
            ],
            []
        ]
    },
    {
        "id": "536a060f.983278",
        "type": "nibe-hotwater",
        "z": "fa4686d6.c21688",
        "server": "844659a2.8d8508",
        "name": "",
        "enable_autoluxury": true,
        "enable_hw_priority": true,
        "autoluxury_diff": "20",
        "autoluxury_time": "10",
        "x": 752,
        "y": 245,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "cabc9c9b.934ca",
        "type": "ui_button",
        "z": "fa4686d6.c21688",
        "name": "Uppdatera",
        "group": "bcb5f9e4.9bc858",
        "order": 7,
        "width": 12,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 518,
        "y": 231,
        "wires": [
            [
                "536a060f.983278"
            ]
        ]
    },
    {
        "id": "9b8580ac.45b4c",
        "type": "ui_button",
        "z": "fa4686d6.c21688",
        "name": "Uppdatera",
        "group": "38b6d907.520796",
        "order": 5,
        "width": 12,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 518,
        "y": 273,
        "wires": [
            [
                "536a060f.983278"
            ]
        ]
    },
    {
        "id": "2fa37aef.af11c6",
        "type": "subflow:c191a5d.5d76258",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hotwater",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_autoluxury",
                "type": "str"
            }
        ],
        "x": 496,
        "y": 84,
        "wires": [
            [
                "b2f9e5a5.7c5a98"
            ],
            []
        ]
    },
    {
        "id": "50a77016.79477",
        "type": "ui_switch",
        "z": "fa4686d6.c21688",
        "name": "Aktivera Automatisk tillfällig lyx",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "bcb5f9e4.9bc858",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "enable_autoluxury",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 984,
        "y": 84,
        "wires": [
            [
                "2fa37aef.af11c6"
            ]
        ]
    },
    {
        "id": "7fdfc0b5.b1058",
        "type": "ui_switch",
        "z": "fa4686d6.c21688",
        "name": "Aktivera Varmvatten prioritet",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "38b6d907.520796",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "enable_hw_priority",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 974,
        "y": 140,
        "wires": [
            [
                "2678da12.da8146"
            ]
        ]
    },
    {
        "id": "2678da12.da8146",
        "type": "subflow:c191a5d.5d76258",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hotwater",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_hw_priority",
                "type": "str"
            }
        ],
        "x": 489,
        "y": 140,
        "wires": [
            [
                "4d33501c.dc725"
            ],
            []
        ]
    },
    {
        "id": "4fefdad9.0edc14",
        "type": "ui_slider",
        "z": "fa4686d6.c21688",
        "name": "Differens",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "bcb5f9e4.9bc858",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "diff",
        "min": "5",
        "max": "50",
        "step": "1",
        "x": 774,
        "y": 378,
        "wires": [
            [
                "9efc9a73.8d9468"
            ]
        ]
    },
    {
        "id": "9efc9a73.8d9468",
        "type": "subflow:c191a5d.5d76258",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hotwater",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "diff",
                "type": "str"
            }
        ],
        "x": 377,
        "y": 378,
        "wires": [
            [
                "f9059587.51b5e8"
            ],
            []
        ]
    },
    {
        "id": "61c95762.533568",
        "type": "ui_slider",
        "z": "fa4686d6.c21688",
        "name": "Tidfaktor",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "bcb5f9e4.9bc858",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "50",
        "step": "1",
        "x": 774,
        "y": 427,
        "wires": [
            [
                "34388b96.e63974"
            ]
        ]
    },
    {
        "id": "34388b96.e63974",
        "type": "subflow:c191a5d.5d76258",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hotwater",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "time",
                "type": "str"
            }
        ],
        "x": 377,
        "y": 427,
        "wires": [
            [
                "c36bde17.a828b"
            ],
            []
        ]
    },
    {
        "id": "9e4523cf.0fe29",
        "type": "ui_toast",
        "z": "b7f67da0.fbf1",
        "position": "bottom right",
        "displayTime": "7",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 706,
        "y": 21,
        "wires": []
    },
    {
        "id": "ae0eda11.749f58",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "Status",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "x": 498,
        "y": 70,
        "wires": []
    },
    {
        "id": "a95abf3c.1467c",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 507,
        "y": 21,
        "wires": [
            [
                "9e4523cf.0fe29"
            ]
        ]
    },
    {
        "id": "4ee74939.4db6e8",
        "type": "nibe-input",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "error",
        "x": 134,
        "y": 42,
        "wires": [
            [
                "a95abf3c.1467c",
                "ae0eda11.749f58"
            ],
            []
        ]
    },
    {
        "id": "22798341.63387c",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "Loggning på",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "97526682.5406d8",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 413,
        "y": 2226,
        "wires": [
            [
                "ad9a955e.bca628"
            ]
        ]
    },
    {
        "id": "ad9a955e.bca628",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 643,
        "y": 2226,
        "wires": [
            [
                "d464fe8e.e8ef7",
                "7c2f5c37.52f8d4"
            ],
            []
        ]
    },
    {
        "id": "df3307ec.65d498",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "INFO",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "97526682.5406d8",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "info",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 394,
        "y": 2275,
        "wires": [
            [
                "68bba490.cea85c"
            ]
        ]
    },
    {
        "id": "68bba490.cea85c",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "info",
                "type": "str"
            }
        ],
        "x": 643,
        "y": 2275,
        "wires": [
            [
                "c5443635.dd1e68"
            ],
            []
        ]
    },
    {
        "id": "d464fe8e.e8ef7",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Enable/Disable",
        "func": "if(msg.topic==\"Start\") {\n    msg = {\n    enabled:msg.payload\n};\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1046,
        "y": 2226,
        "wires": [
            [
                "c5443635.dd1e68",
                "23cf2be0.ec9df4",
                "fc61aa11.3533c8",
                "4d212125.d27d5",
                "43f513e6.278bac",
                "10a1363d.d965ca",
                "7dc0a2c4.3a9bec"
            ]
        ]
    },
    {
        "id": "c548dfa7.e7696",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "ERROR",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "97526682.5406d8",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "error",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 404,
        "y": 2324,
        "wires": [
            [
                "9f0b5119.f9854"
            ]
        ]
    },
    {
        "id": "9f0b5119.f9854",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "error",
                "type": "str"
            }
        ],
        "x": 643,
        "y": 2324,
        "wires": [
            [
                "c548dfa7.e7696"
            ],
            []
        ]
    },
    {
        "id": "4b9a995c.0f11b8",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "DEBUG",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "97526682.5406d8",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "debug",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 404,
        "y": 2373,
        "wires": [
            [
                "fbd484b.8d81e78"
            ]
        ]
    },
    {
        "id": "fbd484b.8d81e78",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "debug",
                "type": "str"
            }
        ],
        "x": 643,
        "y": 2373,
        "wires": [
            [
                "fc61aa11.3533c8"
            ],
            []
        ]
    },
    {
        "id": "3b259789.2e49a8",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "CORE",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "97526682.5406d8",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "core",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 394,
        "y": 2422,
        "wires": [
            [
                "d695de6d.24616"
            ]
        ]
    },
    {
        "id": "d695de6d.24616",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "core",
                "type": "str"
            }
        ],
        "x": 643,
        "y": 2422,
        "wires": [
            [
                "4d212125.d27d5"
            ],
            []
        ]
    },
    {
        "id": "3b6f4ac6.4ef9b6",
        "type": "mqtt in",
        "z": "b7f67da0.fbf1",
        "name": "",
        "topic": "nibe/#",
        "qos": "2",
        "datatype": "auto",
        "broker": "d7f6b34d.d13d6",
        "x": 911,
        "y": 462,
        "wires": [
            [
                "274b71aa.648abe"
            ]
        ]
    },
    {
        "id": "274b71aa.648abe",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "MQTT",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1059,
        "y": 462,
        "wires": []
    },
    {
        "id": "b4a9d18b.4c69a",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Enable/Disable",
        "func": "if(msg.topic==\"Start\") {\n    if(msg.payload===true) {\n        node.send({enabled:false});\n    } else {\n        node.send({enabled:true});\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 647,
        "y": 231,
        "wires": [
            [
                "2ff3d6e8.48ee3a",
                "e15ebfa.d82e94",
                "a923c708.719db8",
                "25889506.584bea",
                "8626d815.9571a8",
                "ae2fe9c8.8c98d8"
            ]
        ]
    },
    {
        "id": "485ac39d.e1262c",
        "type": "ui_ui_control",
        "z": "df0dd648.98daa8",
        "name": "",
        "events": "all",
        "x": 690,
        "y": 112,
        "wires": [
            [
                "b21fd6b9.6b28e8"
            ]
        ]
    },
    {
        "id": "b21fd6b9.6b28e8",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "Prognosreglering",
        "func": "var timeSaved = context.get('time')||(Date.now()-1000);\nvar time = Date.now();\nif(msg.name==\"Prognosreglering\") {\n    if(time>timeSaved) {\n        context.set('time',(time+30000));\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 860,
        "y": 112,
        "wires": [
            [
                "8a714b3a.55fa18"
            ]
        ]
    },
    {
        "id": "8a714b3a.55fa18",
        "type": "nibe-request",
        "z": "df0dd648.98daa8",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 1044,
        "y": 112,
        "wires": [
            [],
            [
                "10e30751.e4e639"
            ]
        ]
    },
    {
        "id": "87a83c1.3cd9fc",
        "type": "nibe-request",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 134,
        "y": 504,
        "wires": [
            [],
            [
                "dff05253.9f618"
            ]
        ]
    },
    {
        "id": "e0751200.e40b5",
        "type": "ui_switch",
        "z": "358baec9.c8b902",
        "name": "Aktivera Stoppa värmeproduktion",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "95b0af9c.89089",
        "order": 6,
        "width": "12",
        "height": "2",
        "passthru": false,
        "decouple": "true",
        "topic": "dm_reset_enable_stop",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 343,
        "y": 1561,
        "wires": [
            [
                "c5d3afd1.ce899"
            ]
        ]
    },
    {
        "id": "c5d3afd1.ce899",
        "type": "subflow:c191a5d.5d76258",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "dm_reset_enable_stop",
                "type": "str"
            }
        ],
        "x": 608,
        "y": 1561,
        "wires": [
            [
                "49abf480.acd38c",
                "66fc03ec.ccb5ac"
            ],
            []
        ]
    },
    {
        "id": "5abdd88.e5f8628",
        "type": "subflow:c191a5d.5d76258",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "dm_reset_stop_diff",
                "type": "str"
            }
        ],
        "x": 846,
        "y": 1757,
        "wires": [
            [
                "21e9ac6.4191454"
            ],
            []
        ]
    },
    {
        "id": "46fd6a28.346e94",
        "type": "ui_slider",
        "z": "358baec9.c8b902",
        "name": "Differens",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "95b0af9c.89089",
        "order": 7,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "dm_reset_stop_diff",
        "min": "0.5",
        "max": "3",
        "step": "0.1",
        "x": 571,
        "y": 1785,
        "wires": [
            [
                "5abdd88.e5f8628"
            ]
        ]
    },
    {
        "id": "bb2ea9a3.783e38",
        "type": "subflow:c191a5d.5d76258",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "dm_reset_slow_diff",
                "type": "str"
            }
        ],
        "x": 874,
        "y": 1701,
        "wires": [
            [
                "194ef259.d819be"
            ],
            []
        ]
    },
    {
        "id": "a56e3e6c.baf92",
        "type": "ui_slider",
        "z": "358baec9.c8b902",
        "name": "Differens",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "95b0af9c.89089",
        "order": 5,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "dm_reset_slow_diff",
        "min": "0.1",
        "max": "3",
        "step": "0.1",
        "x": 592,
        "y": 1736,
        "wires": [
            [
                "bb2ea9a3.783e38"
            ]
        ]
    },
    {
        "id": "49abf480.acd38c",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "Enable/Disable",
        "func": "msg = {\n    enabled:msg.payload\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 892,
        "y": 1561,
        "wires": [
            []
        ]
    },
    {
        "id": "bb501ea0.7f712",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "Enable/Disable",
        "func": "msg = {\n    enabled:msg.payload\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 892,
        "y": 1519,
        "wires": [
            []
        ]
    },
    {
        "id": "54f823ff.b8206c",
        "type": "ui_ui_control",
        "z": "eee76599.b5f0d8",
        "name": "",
        "events": "all",
        "x": 144,
        "y": 210,
        "wires": [
            [
                "b59bafd9.45e65"
            ]
        ]
    },
    {
        "id": "b59bafd9.45e65",
        "type": "function",
        "z": "eee76599.b5f0d8",
        "name": "Inställningar",
        "func": "var timeSaved = context.get('time')||(Date.now()-1000);\nvar time = Date.now();\nif(msg.name==\"Inställningar\") {\n    if(time>timeSaved) {\n        context.set('time',(time+30000));\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 294,
        "y": 210,
        "wires": [
            [
                "893baad1.277128",
                "7bac2960.6ef798",
                "e817a238.c8734",
                "6cbef66.4c31208"
            ]
        ]
    },
    {
        "id": "893baad1.277128",
        "type": "nibe-request",
        "z": "eee76599.b5f0d8",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 260,
        "y": 252,
        "wires": [
            [],
            [
                "d85ce7ca.219c78",
                "8820ada.454c85"
            ]
        ]
    },
    {
        "id": "d85ce7ca.219c78",
        "type": "function",
        "z": "eee76599.b5f0d8",
        "name": "Update list",
        "func": "var sensors = msg.payload.home.inside_sensors;\nvar output = [\"Ingen\"];\nif(sensors.length===0) {\n    return;\n}\nfor (const arr of sensors) {\n    output.push(arr.name)\n}\nif(output!==undefined && output!==[]) {\n    node.send({options:output});\n    if(msg.payload.indoor!==undefined) {\n        node.send({payload:msg.payload.rmu.sensor_s1})\n    }\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 434,
        "y": 308,
        "wires": [
            [
                "120d7487.c214bb"
            ]
        ]
    },
    {
        "id": "120d7487.c214bb",
        "type": "ui_dropdown",
        "z": "eee76599.b5f0d8",
        "name": "",
        "label": "Välj Inomhusgivare",
        "tooltip": "",
        "place": "Välj",
        "group": "ef983ace.21f138",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "rmu/sensor",
        "x": 622,
        "y": 308,
        "wires": [
            [
                "17916cf8.c093b3"
            ]
        ]
    },
    {
        "id": "dc42d90.1df3a28",
        "type": "subflow:c191a5d.5d76258",
        "z": "eee76599.b5f0d8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "rmu",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "sensor_s1",
                "type": "str"
            }
        ],
        "x": 237,
        "y": 308,
        "wires": [
            [],
            [
                "d85ce7ca.219c78"
            ]
        ]
    },
    {
        "id": "17916cf8.c093b3",
        "type": "nibe-rmu",
        "z": "eee76599.b5f0d8",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "sensor": "",
        "x": 738,
        "y": 371,
        "wires": [
            [
                "ed7a28da.800c78",
                "fe27461e.7e1e48"
            ],
            []
        ]
    },
    {
        "id": "15852af8.995215",
        "type": "inject",
        "z": "eee76599.b5f0d8",
        "name": "",
        "topic": "update",
        "payload": "Uppdatera",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 524,
        "y": 371,
        "wires": [
            [
                "17916cf8.c093b3"
            ]
        ]
    },
    {
        "id": "8820ada.454c85",
        "type": "function",
        "z": "eee76599.b5f0d8",
        "name": "Update list",
        "func": "var sensors = msg.payload.home.inside_sensors;\nvar output = [\"Ingen\"];\nif(sensors.length===0) {\n    return;\n}\nfor (const arr of sensors) {\n    output.push(arr.name)\n}\nif(output!==undefined && output!==[]) {\n    node.send({options:output});\n    if(msg.payload.indoor!==undefined) {\n        node.send({payload:msg.payload.rmu.sensor_s2})\n    }\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 434,
        "y": 441,
        "wires": [
            [
                "c9b16100.9942c"
            ]
        ]
    },
    {
        "id": "c9b16100.9942c",
        "type": "ui_dropdown",
        "z": "eee76599.b5f0d8",
        "name": "",
        "label": "Välj Inomhusgivare",
        "tooltip": "",
        "place": "Välj",
        "group": "32b15b25.77ef94",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "rmu/sensor",
        "x": 622,
        "y": 441,
        "wires": [
            [
                "9e04abe.ef6d058"
            ]
        ]
    },
    {
        "id": "9eada6bf.9eade8",
        "type": "subflow:c191a5d.5d76258",
        "z": "eee76599.b5f0d8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "rmu",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "sensor_s2",
                "type": "str"
            }
        ],
        "x": 237,
        "y": 441,
        "wires": [
            [],
            [
                "8820ada.454c85"
            ]
        ]
    },
    {
        "id": "9e04abe.ef6d058",
        "type": "nibe-rmu",
        "z": "eee76599.b5f0d8",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s2",
        "sensor": "",
        "x": 738,
        "y": 504,
        "wires": [
            [
                "66a2f83a.e878d8",
                "f86092a6.e0f16"
            ],
            []
        ]
    },
    {
        "id": "911f0c0d.14384",
        "type": "inject",
        "z": "eee76599.b5f0d8",
        "name": "",
        "topic": "update",
        "payload": "Uppdatera",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 524,
        "y": 504,
        "wires": [
            [
                "9e04abe.ef6d058"
            ]
        ]
    },
    {
        "id": "66a2f83a.e878d8",
        "type": "function",
        "z": "eee76599.b5f0d8",
        "name": "Enable/Disable",
        "func": "if(msg.enabled!==undefined && msg.enabled===true) {\n    let hide = {\n        \"group\":\n            {\"show\":\n                [\"Inställningar_RMU40_S2\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n} else if(msg.enabled===false) {\n    let hide = {\n        \"group\":\n            {\"hide\":\n                [\"Inställningar_RMU40_S2\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 913,
        "y": 588,
        "wires": [
            [],
            [
                "4ae37d2f.ae3654"
            ]
        ]
    },
    {
        "id": "4ae37d2f.ae3654",
        "type": "ui_ui_control",
        "z": "eee76599.b5f0d8",
        "name": "Disable Group S2",
        "events": "all",
        "x": 1133,
        "y": 588,
        "wires": [
            []
        ]
    },
    {
        "id": "ed7a28da.800c78",
        "type": "debug",
        "z": "eee76599.b5f0d8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 960,
        "y": 371,
        "wires": []
    },
    {
        "id": "f86092a6.e0f16",
        "type": "debug",
        "z": "eee76599.b5f0d8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 949,
        "y": 467,
        "wires": []
    },
    {
        "id": "bbeace10.c8e3d",
        "type": "ui_ui_control",
        "z": "b7f67da0.fbf1",
        "name": "Disable View",
        "events": "all",
        "x": 1204,
        "y": 1204,
        "wires": [
            []
        ]
    },
    {
        "id": "9961a077.ae64e",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "sensor_timeout",
                "type": "str"
            }
        ],
        "x": 559,
        "y": 1771,
        "wires": [
            [
                "7b2578fc.c91978"
            ],
            []
        ]
    },
    {
        "id": "85e36ab1.21f178",
        "type": "ui_slider",
        "z": "b7f67da0.fbf1",
        "name": "Timeout tid för MQTT givare",
        "label": "",
        "tooltip": "",
        "group": "fb207b28.da59b8",
        "order": 6,
        "width": "12",
        "height": "1",
        "passthru": false,
        "outs": "end",
        "topic": "sensor_timeout",
        "min": 0,
        "max": "120",
        "step": 1,
        "x": 302,
        "y": 1771,
        "wires": [
            [
                "9961a077.ae64e"
            ]
        ]
    },
    {
        "id": "bc033700.b4f528",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "true",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 974,
        "y": 119,
        "wires": [
            [
                "96e5be75.41ca7"
            ],
            [
                "96e5be75.41ca7"
            ],
            []
        ]
    },
    {
        "id": "8c94d6ec.86fc68",
        "type": "nibe-input",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "dM",
        "add": false,
        "x": 883,
        "y": 805,
        "wires": [
            [
                "57c7d6e4.195388"
            ],
            [
                "e78514aa.0d9f28"
            ]
        ]
    },
    {
        "id": "23951e95.29e3a2",
        "type": "nibe-input",
        "z": "358baec9.c8b902",
        "server": "844659a2.8d8508",
        "name": "outside",
        "add": false,
        "x": 883,
        "y": 854,
        "wires": [
            [
                "d5bece54.57aa"
            ],
            [
                "e78514aa.0d9f28"
            ]
        ]
    },
    {
        "id": "60eab66c.e5a1b8",
        "type": "ui_template",
        "z": "b7f67da0.fbf1",
        "group": "fe94277c.dcd118",
        "name": "",
        "order": 3,
        "width": "12",
        "height": "5",
        "format": "<p>{{msg.payload}}</p>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 1278,
        "y": 119,
        "wires": [
            []
        ]
    },
    {
        "id": "96e5be75.41ca7",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "var data = global.get('cmdLog')||[];\nlet time = Date.now();\nlet da = msg.payload//.replace('\\n','<br>')\nnode.send({payload:da});\n/*\ndata.unshift([da]);\nglobal.set('cmdLog',data);\nif(da!==undefined && da!==[]) {\n    node.send({payload:data});\n}*/",
        "outputs": 1,
        "noerr": 0,
        "x": 1128,
        "y": 119,
        "wires": [
            [
                "60eab66c.e5a1b8"
            ]
        ]
    },
    {
        "id": "db8da946.5afd58",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "Model",
        "env": [
            {
                "name": "Name",
                "value": "system",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "pump",
                "type": "str"
            }
        ],
        "x": 1051,
        "y": 714,
        "wires": [
            [
                "3a72bbe0.7394c4",
                "26b9d2b.d18782e"
            ],
            []
        ]
    },
    {
        "id": "c89baea1.1190b",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "Firmware",
        "env": [
            {
                "name": "Name",
                "value": "system",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "firmware",
                "type": "str"
            }
        ],
        "x": 1061,
        "y": 756,
        "wires": [
            [
                "d9877026.b0431"
            ],
            []
        ]
    },
    {
        "id": "3a72bbe0.7394c4",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "4a7ab836.172ae8",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Nibe",
        "label": "",
        "format": "Nibe {{msg.payload}}",
        "layout": "row-left",
        "x": 1226,
        "y": 714,
        "wires": []
    },
    {
        "id": "d9877026.b0431",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "4a7ab836.172ae8",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Firmware",
        "label": "",
        "format": "Firmware {{msg.payload}}",
        "layout": "row-left",
        "x": 1222,
        "y": 756,
        "wires": []
    },
    {
        "id": "e3908904.192158",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "Kör kommando",
        "tooltip": "Skriv ett kommando. Återkoppling i rutan nedan",
        "group": "fe94277c.dcd118",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "",
        "x": 780,
        "y": 119,
        "wires": [
            [
                "bc033700.b4f528"
            ]
        ]
    },
    {
        "id": "a06c6ec7.72b5e",
        "type": "ui_dropdown",
        "z": "b7f67da0.fbf1",
        "name": "Ta bort Register",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "",
        "group": "bd199d65.157fc",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "removeRegister",
        "x": 1025,
        "y": 1442,
        "wires": [
            [
                "1b0cc4df.6a668b"
            ]
        ]
    },
    {
        "id": "77e503d5.77b63c",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "",
        "func": "var sensors = msg.payload.home.inside_sensors||[];\nvar output = [\"Ingen\"];\nfor (const arr of sensors) {\n    output.push(arr.name)\n}\nif(output!==undefined && output!==[]) {\n    node.send({options:output});\n    if(msg.payload.price!==undefined) {\n        node.send({payload:msg.payload.price.sensor_s1})\n    }\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 428,
        "y": 420,
        "wires": [
            [
                "53e86819.c4da48"
            ]
        ]
    },
    {
        "id": "9c5f816f.d0c84",
        "type": "nibe-input",
        "z": "960078e.e3e6d88",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 134,
        "y": 420,
        "wires": [
            [
                "77e503d5.77b63c"
            ],
            []
        ]
    },
    {
        "id": "419d4955.0dded8",
        "type": "nibe-request",
        "z": "960078e.e3e6d88",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 134,
        "y": 378,
        "wires": [
            [],
            [
                "77e503d5.77b63c"
            ]
        ]
    },
    {
        "id": "5b35fb44.679dc4",
        "type": "ui_dropdown",
        "z": "960078e.e3e6d88",
        "name": "Välj Inomhusgivare",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "1b40f24f.7b6d9e",
        "order": 10,
        "width": "0",
        "height": "0",
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "price/sensor",
        "x": 706,
        "y": 420,
        "wires": [
            [
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "551009f1.15c058",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "Differens",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "1b40f24f.7b6d9e",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/temp_low",
        "min": "-3",
        "max": "2",
        "step": "0.1",
        "x": 1166,
        "y": 322,
        "wires": [
            [
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "84e8bdd0.e775f",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "temp_low_s1",
                "type": "str"
            }
        ],
        "x": 797,
        "y": 308,
        "wires": [
            [
                "baebbfcf.16886"
            ],
            []
        ]
    },
    {
        "id": "cf821e30.dde36",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "",
        "label": "Serieport",
        "tooltip": "",
        "group": "fe94277c.dcd118",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "port",
        "x": 1012,
        "y": 1491,
        "wires": [
            [
                "f0042dae.d44d"
            ]
        ]
    },
    {
        "id": "f0042dae.d44d",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "serial",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "port",
                "type": "str"
            }
        ],
        "x": 1189,
        "y": 1491,
        "wires": [
            [
                "cf821e30.dde36"
            ],
            []
        ]
    },
    {
        "id": "9a16797e.af4448",
        "type": "ui_button",
        "z": "b7f67da0.fbf1",
        "name": "Starta Samba",
        "group": "fe94277c.dcd118",
        "order": 6,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 402,
        "y": 2632,
        "wires": [
            [
                "7c23dc92.d4de34"
            ]
        ]
    },
    {
        "id": "7c23dc92.d4de34",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "sudo mount -o remount,rw /",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 645,
        "y": 2632,
        "wires": [
            [],
            [],
            [
                "53907b6b.f7ca84"
            ]
        ]
    },
    {
        "id": "53907b6b.f7ca84",
        "type": "switch",
        "z": "b7f67da0.fbf1",
        "name": "",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 870,
        "y": 2646,
        "wires": [
            [
                "431f5eda.16be7"
            ]
        ]
    },
    {
        "id": "431f5eda.16be7",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "sudo service smbd start",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1056,
        "y": 2646,
        "wires": [
            [],
            [],
            [
                "1028bc02.3efb04"
            ]
        ]
    },
    {
        "id": "1028bc02.3efb04",
        "type": "switch",
        "z": "b7f67da0.fbf1",
        "name": "",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 835,
        "y": 2723,
        "wires": [
            [
                "4b487231.b42a6c"
            ]
        ]
    },
    {
        "id": "4b487231.b42a6c",
        "type": "change",
        "z": "b7f67da0.fbf1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Samba startad.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 988,
        "y": 2723,
        "wires": [
            [
                "9a132183.4d71"
            ]
        ]
    },
    {
        "id": "9a132183.4d71",
        "type": "ui_toast",
        "z": "b7f67da0.fbf1",
        "position": "bottom right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 1245,
        "y": 2723,
        "wires": []
    },
    {
        "id": "c6b8ea30.00e938",
        "type": "ui_button",
        "z": "b7f67da0.fbf1",
        "name": "Stoppa samba",
        "group": "fe94277c.dcd118",
        "order": 7,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 325,
        "y": 2772,
        "wires": [
            [
                "b6efd9d4.d18858"
            ]
        ]
    },
    {
        "id": "b6efd9d4.d18858",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "sudo service smbd stop",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 565,
        "y": 2772,
        "wires": [
            [],
            [],
            [
                "38046291.6ece6e"
            ]
        ]
    },
    {
        "id": "38046291.6ece6e",
        "type": "switch",
        "z": "b7f67da0.fbf1",
        "name": "",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 871,
        "y": 2786,
        "wires": [
            [
                "d4c42e0f.896dd"
            ]
        ]
    },
    {
        "id": "fa2d2ae9.938078",
        "type": "ui_button",
        "z": "b7f67da0.fbf1",
        "name": "Starta om Node-RED",
        "group": "fe94277c.dcd118",
        "order": 8,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "restart",
        "payloadType": "str",
        "topic": "",
        "x": 282,
        "y": 2884,
        "wires": [
            [
                "796d2d88.6cda84",
                "5145a4a9.eb82ac",
                "f31de8d3.f09318"
            ]
        ]
    },
    {
        "id": "7e7da779.2a9ea8",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "sudo service nodered restart",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1093,
        "y": 2849,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "85d5ca03.843578",
        "type": "ui_button",
        "z": "b7f67da0.fbf1",
        "name": "Starta om NibePi hårdvara",
        "group": "fe94277c.dcd118",
        "order": 9,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "restart",
        "payloadType": "str",
        "topic": "",
        "x": 365,
        "y": 3052,
        "wires": [
            [
                "fb6e013f.6f056",
                "596b6fa.9e4849",
                "51fe480a.503c68"
            ]
        ]
    },
    {
        "id": "1601f8.7c0cee09",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "sudo reboot",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 805,
        "y": 3059,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "d4c42e0f.896dd",
        "type": "change",
        "z": "b7f67da0.fbf1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Samba stoppad.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 2786,
        "wires": [
            [
                "9a132183.4d71"
            ]
        ]
    },
    {
        "id": "d0af1b69.cb7df8",
        "type": "ui_text_input",
        "z": "df0dd648.98daa8",
        "name": "Latitud",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "33ed6fb8.2f3ce",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "lat",
        "x": 918,
        "y": 28,
        "wires": [
            [
                "c49768ba.b813b8"
            ]
        ]
    },
    {
        "id": "18e3ee8f.596ea1",
        "type": "ui_text_input",
        "z": "df0dd648.98daa8",
        "name": "Longitud",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "33ed6fb8.2f3ce",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "lon",
        "x": 928,
        "y": 77,
        "wires": [
            [
                "8dd7f637.d92b68"
            ]
        ]
    },
    {
        "id": "d3afa237.f2b84",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "lat",
                "type": "str"
            }
        ],
        "x": 1238,
        "y": 28,
        "wires": [
            [
                "d0af1b69.cb7df8"
            ],
            []
        ]
    },
    {
        "id": "4bd5cd01.e7f284",
        "type": "subflow:c191a5d.5d76258",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "lon",
                "type": "str"
            }
        ],
        "x": 1238,
        "y": 77,
        "wires": [
            [
                "18e3ee8f.596ea1"
            ],
            []
        ]
    },
    {
        "id": "d383b3f8.c2437",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "",
        "func": "var output = [{Tibber:\"tibber\"},{Nibe:\"nibe\"}];\nif(msg.payload===undefined || msg.payload===10) {\n    output = [{Tibber:\"tibber\"}];\n}\n\nnode.send({options:output});",
        "outputs": 1,
        "noerr": 0,
        "x": 127,
        "y": 1078,
        "wires": [
            [
                "2ec7e694.30d2ea"
            ]
        ]
    },
    {
        "id": "50e1598f.5e01d8",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "source",
                "type": "str"
            }
        ],
        "x": 419,
        "y": 1232,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "321fde4.84f6d22",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "",
        "func": "if(msg.payload===false) {\n    msg.payload = \"\";\n    msg.topic = \"source\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 246,
        "y": 1232,
        "wires": [
            [
                "50e1598f.5e01d8"
            ]
        ]
    },
    {
        "id": "e5304c27.2e273",
        "type": "ui_switch",
        "z": "ae9d7ce8.0991c",
        "name": "Aktivera",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "ad7a33f3.24adf",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "fan/enable",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 634,
        "y": 217,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "9a373f08.e2c5a",
        "type": "ui_switch",
        "z": "ae9d7ce8.0991c",
        "name": "Aktivera",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "b7178cee.09314",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "fan/enable_low",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 648,
        "y": 266,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "58301c4f.167164",
        "type": "ui_slider",
        "z": "ae9d7ce8.0991c",
        "name": "Luftflöde Låg",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "b7178cee.09314",
        "order": 4,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "fan/speed_low",
        "min": "0",
        "max": "350",
        "step": "1",
        "x": 644,
        "y": 364,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "ed6e5604.1f1578",
        "type": "nibe-fan",
        "z": "ae9d7ce8.0991c",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "adjust": "0.5",
        "x": 1008,
        "y": 336,
        "wires": [
            [
                "ab0bb3.7711f45",
                "cbe9662e.b59308"
            ],
            []
        ]
    },
    {
        "id": "4683a850.88e2a8",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 258,
        "y": 217,
        "wires": [
            [
                "46cb362b.e3bd18"
            ],
            [
                "a496d010.6c77",
                "6f0a5487.09f7cc",
                "525fec8e.3c2964"
            ]
        ]
    },
    {
        "id": "bcd35f12.d08cd",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_low",
                "type": "str"
            }
        ],
        "x": 258,
        "y": 266,
        "wires": [
            [
                "4fb8f950.939998"
            ],
            [
                "47ca21a6.83d04"
            ]
        ]
    },
    {
        "id": "b0cdbf5.a69164",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "speed_normal",
                "type": "str"
            }
        ],
        "x": 251,
        "y": 518,
        "wires": [
            [
                "7a08d76a.38e858"
            ],
            []
        ]
    },
    {
        "id": "719c398d.1630c8",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "speed_low",
                "type": "str"
            }
        ],
        "x": 258,
        "y": 371,
        "wires": [
            [
                "62e91b06.2bd804"
            ],
            []
        ]
    },
    {
        "id": "74d64c2d.aaa2a4",
        "type": "ui_switch",
        "z": "ae9d7ce8.0991c",
        "name": "Aktivera CO2 Givare",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "ad7a33f3.24adf",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "fan/enable_co2",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 667,
        "y": 462,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "22979e72.4c48e2",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_co2",
                "type": "str"
            }
        ],
        "x": 251,
        "y": 469,
        "wires": [
            [
                "b7396421.f16d78"
            ],
            [
                "7a6dc14e.40cc7",
                "cb402e2a.43c7e"
            ]
        ]
    },
    {
        "id": "a76c0feb.f55a6",
        "type": "ui_button",
        "z": "ae9d7ce8.0991c",
        "name": "Uppdatera",
        "group": "ad7a33f3.24adf",
        "order": 8,
        "width": 12,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 644,
        "y": 175,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "abc6da05.fbe198",
        "type": "ui_ui_control",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "events": "all",
        "x": 130,
        "y": 952,
        "wires": [
            [
                "c5f6096b.79b828"
            ]
        ]
    },
    {
        "id": "c5f6096b.79b828",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "Lufthastighet",
        "func": "var timeSaved = context.get('time')||(Date.now()-1000);\nvar time = Date.now();\nif(msg.name==\"Automatiskt luftflöde\") {\n    if(time>timeSaved) {\n        context.set('time',(time+30000));\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 280,
        "y": 952,
        "wires": [
            [
                "b8e637ad.f4c198"
            ]
        ]
    },
    {
        "id": "b8e637ad.f4c198",
        "type": "nibe-request",
        "z": "ae9d7ce8.0991c",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 323,
        "y": 994,
        "wires": [
            [],
            [
                "996fbcf2.8cd2b",
                "ac979e91.e8a4c",
                "9e8f4c75.ef72d"
            ]
        ]
    },
    {
        "id": "589ada4b.bd1974",
        "type": "nibe-input",
        "z": "ae9d7ce8.0991c",
        "server": "844659a2.8d8508",
        "name": "Config",
        "add": false,
        "x": 323,
        "y": 1036,
        "wires": [
            [
                "996fbcf2.8cd2b"
            ],
            []
        ]
    },
    {
        "id": "996fbcf2.8cd2b",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "func": "let config = msg.payload;\nlet lang = config.system.language;\nif(lang===undefined) lang = \"SE\";\nlet translate = global.get('translate');\nif(translate===undefined) return;\nvar sensors = msg.payload.home.inside_sensors||[];\nvar output = [\"Ingen\"];\nfor (const arr of sensors) {\n    output.push(arr.name)\n}\nif(output!==undefined && output!==[]) {\n    node.send({options:output,label:translate.dash.fan_sensor_label[lang]});\n    if(msg.payload.fan!==undefined) {\n        node.send({payload:msg.payload.fan.sensor,label:translate.dash.fan_sensor_label[lang]})\n    }\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 617,
        "y": 1036,
        "wires": [
            [
                "ae39397.22484c8"
            ]
        ]
    },
    {
        "id": "ae39397.22484c8",
        "type": "ui_dropdown",
        "z": "ae9d7ce8.0991c",
        "name": "Välj CO2 givare",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "",
        "group": "ad7a33f3.24adf",
        "order": 4,
        "width": "0",
        "height": "0",
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "fan/sensor",
        "x": 906,
        "y": 1050,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "a496d010.6c77",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "Enable/Disable Fan",
        "func": "let source = msg.payload.fan.enable;\nif(source===true) {\n    msg = {\n    enabled:true\n};\nreturn msg;\n} else if(source===false) {\n    msg = {\n    enabled:false\n};\n\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 944,
        "y": 497,
        "wires": [
            [
                "ae39397.22484c8",
                "9afd1d9d.fc55b",
                "120e18c1.6bce77",
                "f7ffcb08.7c4128",
                "4fb8f950.939998",
                "62e91b06.2bd804",
                "b7396421.f16d78",
                "7a08d76a.38e858",
                "c4f73ece.224b5",
                "2d8f11d6.fe82de",
                "cb29fcde.4a3bd",
                "24ba7f9c.ccab9",
                "31898f8e.9c3d",
                "8e5ae09.f256e2",
                "2a8bb9ee.8258e6",
                "5fd406d7.a70ab8"
            ]
        ]
    },
    {
        "id": "7a6dc14e.40cc7",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "Enable/Disable CO2",
        "func": "let source = msg.payload.fan.enable_co2;\nlet fan = msg.payload.fan.enable;\n\nif(fan===true && source===true) {\n    msg = {\n    enabled:true\n};\nreturn msg;\n} else if(fan===false || source===false) {\n    msg = {\n    enabled:false\n};\n\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 828,
        "y": 105,
        "wires": [
            [
                "ae39397.22484c8",
                "ff775621.5daa28",
                "69cb86c.33ef078",
                "f86faed6.52fd8"
            ]
        ]
    },
    {
        "id": "47ca21a6.83d04",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "Enable/Disable Low Speed",
        "func": "let source = msg.payload.fan.enable_low;\nlet fan = msg.payload.fan.enable;\nif(fan===true && source===true) {\n    msg = {\n    enabled:true\n};\nreturn msg;\n} else if(fan===false || source===false) {\n    msg = {\n    enabled:false\n};\n\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1100,
        "y": 105,
        "wires": [
            [
                "62e91b06.2bd804",
                "4d633d1.7e155c4"
            ]
        ]
    },
    {
        "id": "92d4347e.266668",
        "type": "ui_chart",
        "z": "960078e.e3e6d88",
        "name": "Elprisreglering S2",
        "group": "ab2b8fca.17eca",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "dd HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 1028,
        "y": 539,
        "wires": [
            []
        ]
    },
    {
        "id": "e324889.d71b078",
        "type": "ui_button",
        "z": "960078e.e3e6d88",
        "name": "Uppdatera S2",
        "group": "ab2b8fca.17eca",
        "order": 3,
        "width": 12,
        "height": 1,
        "passthru": false,
        "label": "Uppdatera",
        "tooltip": "Begär ny data och uppdatera med nya värden.",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 311,
        "y": 511,
        "wires": [
            [
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "ab0bb3.7711f45",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "Enable/Disable",
        "func": "if(msg.enabled!==undefined && msg.enabled===false) {\n    node.send(msg);\n    let hide = {\n        \"tabs\":\n            {\"hide\":\n                [\"Lufthastighet\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n} else if(msg.enabled===true) {\n    let hide = {\n        \"tabs\":\n            {\"show\":\n                [\"Lufthastighet\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 1116,
        "y": 560,
        "wires": [
            [],
            [
                "facd1c67.c3335"
            ]
        ]
    },
    {
        "id": "facd1c67.c3335",
        "type": "ui_ui_control",
        "z": "ae9d7ce8.0991c",
        "name": "Disable Group FAN",
        "events": "all",
        "x": 1203,
        "y": 665,
        "wires": [
            []
        ]
    },
    {
        "id": "d66d8ffa.7d44e",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "speed_high",
                "type": "str"
            }
        ],
        "x": 244,
        "y": 665,
        "wires": [
            [
                "f86faed6.52fd8"
            ],
            []
        ]
    },
    {
        "id": "30a5c5df.10574a",
        "type": "ui_slider",
        "z": "ae9d7ce8.0991c",
        "name": "Luftflöde",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "2ed5a2d7.ca08ce",
        "order": 4,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "fan/speed_high",
        "min": "0",
        "max": "350",
        "step": "1",
        "x": 592,
        "y": 672,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "6ffbfe56.1c967",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "low_co2_limit",
                "type": "str"
            }
        ],
        "x": 258,
        "y": 322,
        "wires": [
            [
                "685f2dfd.acbc94"
            ],
            []
        ]
    },
    {
        "id": "f648d408.d5b588",
        "type": "ui_slider",
        "z": "ae9d7ce8.0991c",
        "name": "Gränsvärde CO2",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "b7178cee.09314",
        "order": 3,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "fan/low_co2_limit",
        "min": "450",
        "max": "2000",
        "step": "25",
        "x": 664,
        "y": 315,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "e0513d92.b889e",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "low_cpr_freq",
                "type": "str"
            }
        ],
        "x": 251,
        "y": 420,
        "wires": [
            [
                "4d633d1.7e155c4"
            ],
            []
        ]
    },
    {
        "id": "e5a59b16.947138",
        "type": "ui_slider",
        "z": "ae9d7ce8.0991c",
        "name": "Kompressorfrekvens",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "b7178cee.09314",
        "order": 5,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "fan/low_cpr_freq",
        "min": "0",
        "max": "120",
        "step": "1",
        "x": 667,
        "y": 413,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "cb402e2a.43c7e",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "Enable/Disable CO2",
        "func": "let source = msg.payload.fan.enable_co2;\nlet low = msg.payload.fan.enable_low;\n\nif(low===true && source===true) {\n    msg = {\n    enabled:true\n};\nreturn msg;\n} else if(low===false || source===false) {\n    msg = {\n    enabled:false\n};\n\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 401,
        "y": 56,
        "wires": [
            [
                "685f2dfd.acbc94",
                "62c930be.810ba"
            ]
        ]
    },
    {
        "id": "d1a7d601.f79028",
        "type": "ui_switch",
        "z": "ae9d7ce8.0991c",
        "name": "Aktivera öka luftflöde",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "2ed5a2d7.ca08ce",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "fan/enable_high",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 611,
        "y": 609,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "bc4f9345.f18b2",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_high",
                "type": "str"
            }
        ],
        "x": 244,
        "y": 616,
        "wires": [
            [
                "69cb86c.33ef078"
            ],
            []
        ]
    },
    {
        "id": "19d59f35.ad8c81",
        "type": "ui_text",
        "z": "ae9d7ce8.0991c",
        "group": "b7178cee.09314",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Sänk luftflöde",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1326,
        "y": 245,
        "wires": []
    },
    {
        "id": "77fb0198.0185f",
        "type": "ui_text",
        "z": "ae9d7ce8.0991c",
        "group": "2ed5a2d7.ca08ce",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Öka luftflöde",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1316,
        "y": 301,
        "wires": []
    },
    {
        "id": "79edcd08.1549e4",
        "type": "ui_button",
        "z": "ae9d7ce8.0991c",
        "name": "Kalibrera",
        "group": "7c351fda.75426",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "fan/filter_value",
        "x": 1292,
        "y": 854,
        "wires": [
            [
                "bca3f91a.05d358",
                "69cad340.fdb3ac"
            ]
        ]
    },
    {
        "id": "a843b767.1617d8",
        "type": "ui_switch",
        "z": "ae9d7ce8.0991c",
        "name": "Aktivera Filterövervakning",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "7c351fda.75426",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "fan/enable_filter",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 656,
        "y": 749,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "6eb1a695.518348",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_filter",
                "type": "str"
            }
        ],
        "x": 258,
        "y": 749,
        "wires": [
            [
                "c4f73ece.224b5"
            ],
            []
        ]
    },
    {
        "id": "c7e4714f.38ce",
        "type": "ui_text",
        "z": "ae9d7ce8.0991c",
        "group": "7c351fda.75426",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Filterrengöring",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1319,
        "y": 357,
        "wires": []
    },
    {
        "id": "69cad340.fdb3ac",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "func": "node.send({topic:\"fan/filter_value_low\",payload:-1});\nnode.send({topic:\"fan/filter_value_normal\",payload:-1});\nnode.send({topic:\"fan/filter_cleaned\",payload:Date.now()})",
        "outputs": 1,
        "noerr": 0,
        "x": 834,
        "y": 812,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "ac979e91.e8a4c",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "func": "if(msg.payload.fan.filter_cleaned!==undefined) {\n    msg.payload = getFormattedDate(new Date(msg.payload.fan.filter_cleaned));\nreturn msg;\n}\n\nfunction getFormattedDate(date) {\n    var year = date.getFullYear();\n    var month = date.getMonth() + 1;\n    var day = date.getDate();\n    var hour = date.getHours();\n    var min = date.getMinutes();\n    var sec = date.getSeconds();\n\n    month = (month < 10 ? \"0\" : \"\") + month;\n    day = (day < 10 ? \"0\" : \"\") + day;\n    hour = (hour < 10 ? \"0\" : \"\") + hour;\n    min = (min < 10 ? \"0\" : \"\") + min;\n    sec = (sec < 10 ? \"0\" : \"\") + sec;\n\n    var str = year+\"-\"+month+\"-\"+day+\" \"+hour + \":\" + min;\n\n    /*alert(str);*/\n\n    return str;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 889,
        "wires": [
            [
                "2d8f11d6.fe82de"
            ]
        ]
    },
    {
        "id": "dfda48a5.0eeb08",
        "type": "ui_text",
        "z": "ae9d7ce8.0991c",
        "group": "7c351fda.75426",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Senaste kalibrering",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 846,
        "y": 889,
        "wires": []
    },
    {
        "id": "6f0a5487.09f7cc",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "Enable/Disable Filter clean",
        "func": "let source = msg.payload.fan.enable_filter;\nlet fan = msg.payload.fan.enable;\n\nif(fan===true && source===true) {\n    msg = {\n    enabled:true\n};\nreturn msg;\n} else if(fan===false || source===false) {\n    msg = {\n    enabled:false\n};\n\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1170,
        "y": 728,
        "wires": [
            [
                "cb29fcde.4a3bd",
                "2d8f11d6.fe82de",
                "24ba7f9c.ccab9"
            ]
        ]
    },
    {
        "id": "bca3f91a.05d358",
        "type": "nibe-request",
        "z": "ae9d7ce8.0991c",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 302,
        "y": 889,
        "wires": [
            [],
            [
                "ac979e91.e8a4c"
            ]
        ]
    },
    {
        "id": "cbe9662e.b59308",
        "type": "switch",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Filtereffektivitet",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 449,
        "y": 945,
        "wires": [
            [
                "24ba7f9c.ccab9"
            ]
        ]
    },
    {
        "id": "d823fe7b.5a50b",
        "type": "ui_text",
        "z": "ae9d7ce8.0991c",
        "group": "7c351fda.75426",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Effektivitet",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}} %",
        "layout": "row-spread",
        "x": 763,
        "y": 952,
        "wires": []
    },
    {
        "id": "c49768ba.b813b8",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "",
        "func": "let len = msg.payload.length;\nif(len>8) {\n    msg.payload = msg.payload.slice(0, 8)\n}\nif(msg.payload.includes(',')) {\n    msg.payload = msg.payload.replace(',','.');\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1058,
        "y": 28,
        "wires": [
            [
                "d3afa237.f2b84"
            ]
        ]
    },
    {
        "id": "8dd7f637.d92b68",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "",
        "func": "let len = msg.payload.length;\nif(len>8) {\n    msg.payload = msg.payload.slice(0, 8)\n}\nif(msg.payload.includes(',')) {\n    msg.payload = msg.payload.replace(',','.');\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1058,
        "y": 77,
        "wires": [
            [
                "4bd5cd01.e7f284"
            ]
        ]
    },
    {
        "id": "ba1e9bfe.f81a78",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "let len = msg.payload.length;\nif(len>8) {\n    msg.payload = msg.payload.slice(0, 8)\n}\nif(msg.payload.includes(',')) {\n    msg.payload = msg.payload.replace(',','.');\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 967,
        "y": 525,
        "wires": [
            [
                "8b79bac6.370258"
            ]
        ]
    },
    {
        "id": "18984de6.08fc72",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "let len = msg.payload.length;\nif(len>8) {\n    msg.payload = msg.payload.slice(0, 8)\n}\nif(msg.payload.includes(',')) {\n    msg.payload = msg.payload.replace(',','.');\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 967,
        "y": 574,
        "wires": [
            [
                "3118479a.5faed8"
            ]
        ]
    },
    {
        "id": "f6b17d9d.b4c6e",
        "type": "inject",
        "z": "b7f67da0.fbf1",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "1200",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 301,
        "y": 3759,
        "wires": [
            [
                "4ed7b706.b4b118"
            ]
        ]
    },
    {
        "id": "c73f62f9.35885",
        "type": "http request",
        "z": "b7f67da0.fbf1",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 819,
        "y": 3640,
        "wires": [
            [
                "94043003.338d"
            ]
        ]
    },
    {
        "id": "5258d0c8.5b55d",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "var config = msg.config;\nvar flows = msg.flows_ts;\nvar nodered = msg.nodered_ts;\nvar nibepi = msg.nibepi_ts;\nmsg.info = msg.payload;\nlet release = config.update.release;\nif(release.includes('snapshot')) {\nif(flows>config.update.flows || config.update.flows===undefined || nodered>config.update.nodered || config.update.nodered===undefined || nibepi>config.update.nibepi || config.update.nibepi===undefined) {\n    newUpdate();\n} else {\n    node.send({enabled:false});\n    node.send([null,null,null,{enabled:false,payload:\"\"}]);\n}\n} else {\n    let version;\n    let newVersion;\n    newVersion = msg.version.replace(/\\./g,\"\");\n    if(newVersion.length===2) newVersion = newVersion+\"0\";\n    newVersion = Number(newVersion);\n    if(config.update.version!==undefined) {\n        version = config.update.version.replace(/\\./g,\"\");\n        if(version.length===2) version = version+\"0\";\n        version = Number(version);\n    }\n    if(version===undefined || version<newVersion) {\n        newUpdate();\n    } else {\n        node.send({enabled:false});\n        node.send([null,null,null,{enabled:false,payload:\"\"}]);\n    }\n}\nfunction toTimestamp(strDate) {\n    var datum = Date.parse(strDate);\n    return Number((datum).toFixed());\n}\nfunction newUpdate() {\n    node.send([null,null,{payload:\"Ny uppdatering tillgängling\"}]);\n    node.send([null,null,null,{enabled:true,payload:msg.info}]);\n    node.send({enabled:true});\n    msg.topic = \"timestamp\";\n    node.send([null,msg]);\n}",
        "outputs": 4,
        "noerr": 0,
        "x": 1072,
        "y": 3689,
        "wires": [
            [
                "6dc5ee8e.c7dff"
            ],
            [
                "45747834.4faa58"
            ],
            [
                "b306062e.fd90b8"
            ],
            [
                "28a0d61e.83686a"
            ]
        ]
    },
    {
        "id": "94043003.338d",
        "type": "xml",
        "z": "b7f67da0.fbf1",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 967,
        "y": 3640,
        "wires": [
            [
                "c9bb3f92.46ce"
            ]
        ]
    },
    {
        "id": "35a698b.0a7a168",
        "type": "ui_button",
        "z": "b7f67da0.fbf1",
        "name": "Kolla efter uppdateringar",
        "group": "d814a7db.5cdc38",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 257,
        "y": 3717,
        "wires": [
            [
                "4ed7b706.b4b118"
            ]
        ]
    },
    {
        "id": "91a0740e.6b2bd8",
        "type": "ui_dropdown",
        "z": "b7f67da0.fbf1",
        "name": "Version",
        "label": "Version",
        "tooltip": "",
        "place": "Version",
        "group": "d814a7db.5cdc38",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "1.1 Beta",
                "value": "master",
                "type": "str"
            },
            {
                "label": "1.1-Snapshot",
                "value": "snapshot",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "release",
        "x": 179,
        "y": 3584,
        "wires": [
            [
                "4ed7b706.b4b118",
                "aec4152f.dac168",
                "deed783f.d98498"
            ]
        ]
    },
    {
        "id": "5c76619d.bbf42",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "let config = msg.config;\nif(config.update===undefined) return;\nif(config.update.release===undefined) return;\nif(config.update.release==\"master\" || config.update.release==\"english\") {\n    msg.url = \"https://github.com/anerdins/node-red-contrib-nibepi/commits/master.atom\";\n} else if(config.update.release==\"snapshot\" || config.update.release==\"snapshot-EN\") {\n    msg.url = \"https://github.com/anerdins/node-red-contrib-nibepi/commits/snapshot.atom\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 645,
        "y": 3640,
        "wires": [
            [
                "c73f62f9.35885"
            ]
        ]
    },
    {
        "id": "4ed7b706.b4b118",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 453,
        "y": 3696,
        "wires": [
            [
                "38a6e41d.bbf2fc"
            ],
            []
        ]
    },
    {
        "id": "12696e02.7efa42",
        "type": "ui_button",
        "z": "b7f67da0.fbf1",
        "name": "Uppdatera NibePi",
        "group": "d814a7db.5cdc38",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "update",
        "x": 398,
        "y": 4172,
        "wires": [
            [
                "2615b7fa.27ee48",
                "1530f51e.2bcddb"
            ]
        ]
    },
    {
        "id": "45747834.4faa58",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "if(msg.topic==\"timestamp\") {\n    context.set('save',msg);\n} else if(msg.topic==\"update\") {\n    let config = msg.config;\n    msg = context.get('save');\n    if(msg===undefined) return;\n    node.send(msg)\n    node.send([null,{payload:\"Letar efter Node-RED mappen...\"}])\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 939,
        "y": 3724,
        "wires": [
            [
                "aa4bd201.8ed27"
            ],
            [
                "b306062e.fd90b8"
            ]
        ]
    },
    {
        "id": "e12a676c.8d8b18",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "find / -type f -name 'flows.json' 2>/dev/null | sed -r 's|/[^/]+$||' |sort |uniq",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 551,
        "y": 3829,
        "wires": [
            [
                "d86e4714.abb088"
            ],
            [],
            []
        ]
    },
    {
        "id": "b306062e.fd90b8",
        "type": "ui_toast",
        "z": "b7f67da0.fbf1",
        "position": "bottom right",
        "displayTime": "30",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 1196,
        "y": 3759,
        "wires": []
    },
    {
        "id": "d86e4714.abb088",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "let len = (msg.payload.match(/\\n/g) || []).length;\nlet release = msg.config.update.release;\nif(release.includes('snapshot')) release = \"snapshot\";\nif(len>1) {\n    node.send([null,{payload:\"Flera Node-RED mappar hittade, avbryter..\"}])\n} else if(len===1) {\n    let path = msg.payload;\n    path = path.replace('\\n','');\n    msg.path = path;\n    msg.payload = `sudo mount -o remount,rw / && cd ${path} && npm uninstall node-red-contrib-nibepi && npm install --save anerdins/node-red-contrib-nibepi#${release}`\n    node.send([msg,{payload:\"Node-RED mapp hittad.\\nUppdaterar...\"}])\n} else {\n    node.send([null,{payload:\"Node-RED mapp inte hittad. Avbryter.\"}])\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 925,
        "y": 3836,
        "wires": [
            [
                "b484a46d.2b3da8"
            ],
            [
                "b306062e.fd90b8"
            ]
        ]
    },
    {
        "id": "41ce5656.0a7778",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Update modules",
        "x": 1263,
        "y": 3857,
        "wires": [
            [],
            [],
            [
                "e19707f8.8ba388"
            ]
        ]
    },
    {
        "id": "ce6c9aaf.cb21b8",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 771,
        "y": 3717,
        "wires": [
            [
                "b578486a.7078d8",
                "b27c8dd9.02c3e",
                "44d61721.dc1b18"
            ],
            []
        ]
    },
    {
        "id": "49987b8d.2c48a4",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "let config = msg.config;\nif(config.update===undefined) return;\nif(config.update.release===undefined) return;\nlet url = \"https://github.com/anerdins/nibepi/commits/master.atom\";\nif(config.update.release==\"master\") {\n    url = \"https://github.com/anerdins/nibepi/commits/master.atom\";\n} else if(config.update.release==\"english\") {\n    url = \"https://github.com/anerdins/nibepi/commits/master.atom\";\n} else if(config.update.release==\"snapshot\") {\n    url = \"https://github.com/anerdins/nibepi/commits/snapshot.atom\";\n} else if(config.update.release==\"snapshot-EN\") {\n    url = \"https://github.com/anerdins/nibepi/commits/snapshot.atom\";\n}\nmsg.url = url;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 771,
        "y": 3591,
        "wires": [
            [
                "e1247ca8.92464"
            ]
        ]
    },
    {
        "id": "fc85e8f6.e60e88",
        "type": "xml",
        "z": "b7f67da0.fbf1",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 1065,
        "y": 3591,
        "wires": [
            [
                "c073c1d0.ff677"
            ]
        ]
    },
    {
        "id": "e1247ca8.92464",
        "type": "http request",
        "z": "b7f67da0.fbf1",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 917,
        "y": 3591,
        "wires": [
            [
                "fc85e8f6.e60e88"
            ]
        ]
    },
    {
        "id": "e19707f8.8ba388",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "if(msg.payload.code===0) {\n    let config = msg.config;\n    msg.payload = `sudo mount -o remount,rw / && cd /tmp && wget https://raw.githubusercontent.com/anerdins/nibepi-flow/${config.update.release}/flows.json && cd /tmp && mv -f flows.json ${msg.path}/flows.json`;\n    node.send({payload:\"Laddar ner nya flöden till Node-RED\"});\n    node.send([null,msg]);\n} else {\n    node.send({payload:\"Uppdatering misslyckades.\"});\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 530,
        "y": 4018,
        "wires": [
            [
                "b306062e.fd90b8"
            ],
            [
                "23964a7b.8ed066"
            ]
        ]
    },
    {
        "id": "c9bb3f92.46ce",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "msg.nodered_ts = toTimestamp(msg.payload.feed.entry[0].updated[0]);\nreturn msg;\n\nfunction toTimestamp(strDate) {\n    var datum = Date.parse(strDate);\n    return Number((datum).toFixed());\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 645,
        "y": 3591,
        "wires": [
            [
                "49987b8d.2c48a4"
            ]
        ]
    },
    {
        "id": "c073c1d0.ff677",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "msg.nibepi_ts = toTimestamp(msg.payload.feed.entry[0].updated[0]);\nlet config = msg.config;\nmsg.url = `https://raw.githubusercontent.com/anerdins/nibepi-flow/${config.update.release}/update/VERSION`\nreturn msg;\n\nfunction toTimestamp(strDate) {\n    var datum = Date.parse(strDate);\n    return Number((datum).toFixed());\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 1191,
        "y": 3591,
        "wires": [
            [
                "8078efd.50ea21"
            ]
        ]
    },
    {
        "id": "18cf4e22.f69a12",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Reset after changing source",
        "func": "let config = msg.config;\nif(config.update===undefined) return;\nif(config.update.release===undefined) return;\nif(config.update.release!==msg.payload) {\n    config.update.nodered = undefined;\n    config.update.nibepi = undefined;\n    config.update.version = undefined;\n    config.update.flows = undefined;\n    node.send({payload:config});\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 442,
        "y": 3913,
        "wires": [
            [
                "de4b40e1.dc59f"
            ]
        ]
    },
    {
        "id": "248e79f9.40a626",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Update Node-RED flows",
        "x": 894,
        "y": 4074,
        "wires": [
            [],
            [],
            [
                "52a5b4de.76949c"
            ]
        ]
    },
    {
        "id": "52a5b4de.76949c",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "if(msg.payload.code===0) {\n    let config = msg.config;\n    node.send({payload:\"Uppdatering färdig, startar om Node-RED om 10 sekunder\"});\n    config.update.nodered = msg.nodered_ts;\n    config.update.nibepi = msg.nibepi_ts;\n    config.update.version = msg.version;\n    config.update.flows  = msg.flows_ts;\n    node.send([null,{payload:config}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 1190,
        "y": 4058,
        "wires": [
            [
                "b306062e.fd90b8"
            ],
            [
                "de4b40e1.dc59f",
                "236a4859.181cd8",
                "50a55b89.f1f2f4"
            ]
        ]
    },
    {
        "id": "8078efd.50ea21",
        "type": "http request",
        "z": "b7f67da0.fbf1",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1190,
        "y": 3535,
        "wires": [
            [
                "a4011ffd.a20ff"
            ]
        ]
    },
    {
        "id": "a4011ffd.a20ff",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "let config = msg.config;\nmsg.version = msg.payload.replace('\\n','');\nmsg.url = `https://raw.githubusercontent.com/anerdins/nibepi-flow/${config.update.release}/update/INFO`\nreturn msg;\n\nfunction toTimestamp(strDate) {\n    var datum = Date.parse(strDate);\n    return Number((datum).toFixed());\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 1270,
        "y": 3638,
        "wires": [
            [
                "8277de5d.5fbb"
            ]
        ]
    },
    {
        "id": "8277de5d.5fbb",
        "type": "http request",
        "z": "b7f67da0.fbf1",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1290,
        "y": 3678,
        "wires": [
            [
                "5258d0c8.5b55d"
            ]
        ]
    },
    {
        "id": "28a0d61e.83686a",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "d814a7db.5cdc38",
        "order": 5,
        "width": "12",
        "height": "10",
        "name": "",
        "label": "{{msg.payload}}",
        "format": "",
        "layout": "row-left",
        "x": 1270,
        "y": 3798,
        "wires": []
    },
    {
        "id": "aa4bd201.8ed27",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 620,
        "y": 3766,
        "wires": [
            [
                "e12a676c.8d8b18"
            ]
        ]
    },
    {
        "id": "b484a46d.2b3da8",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1089,
        "y": 3850,
        "wires": [
            [
                "41ce5656.0a7778"
            ]
        ]
    },
    {
        "id": "23964a7b.8ed066",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 683,
        "y": 4060,
        "wires": [
            [
                "248e79f9.40a626"
            ]
        ]
    },
    {
        "id": "39529b5d.472af4",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "sudo service nodered restart",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Restart Node-RED",
        "x": 1196,
        "y": 4242,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "525036.2cc69fcc",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 977,
        "y": 4242,
        "wires": [
            [
                "39529b5d.472af4"
            ]
        ]
    },
    {
        "id": "aec4152f.dac168",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 190,
        "y": 3898,
        "wires": [
            [
                "18cf4e22.f69a12"
            ],
            []
        ]
    },
    {
        "id": "de4b40e1.dc59f",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "setConfig",
        "x": 907,
        "y": 3997,
        "wires": [
            []
        ]
    },
    {
        "id": "4d847a7a.c8ab04",
        "type": "ui_ui_control",
        "z": "b7f67da0.fbf1",
        "name": "",
        "events": "change",
        "x": 80,
        "y": 3658,
        "wires": [
            [
                "c283e2a2.d69fb"
            ]
        ]
    },
    {
        "id": "c283e2a2.d69fb",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Settings",
        "func": "if(msg.name==\"Settings\") {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 227,
        "y": 3658,
        "wires": [
            [
                "6c307fc7.0310d"
            ]
        ]
    },
    {
        "id": "6c307fc7.0310d",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "60",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 450,
        "y": 3658,
        "wires": [
            [
                "4ed7b706.b4b118"
            ]
        ]
    },
    {
        "id": "b27c8dd9.02c3e",
        "type": "change",
        "z": "b7f67da0.fbf1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Startar uppdatering",
                "tot": "str"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 903,
        "y": 3528,
        "wires": [
            [
                "b306062e.fd90b8"
            ]
        ]
    },
    {
        "id": "b578486a.7078d8",
        "type": "delay",
        "z": "b7f67da0.fbf1",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 833,
        "y": 3772,
        "wires": [
            [
                "45747834.4faa58"
            ]
        ]
    },
    {
        "id": "2615b7fa.27ee48",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Disable Update button",
        "func": "msg = {\n    enabled:false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 667,
        "y": 4130,
        "wires": [
            [
                "12696e02.7efa42"
            ]
        ]
    },
    {
        "id": "deed783f.d98498",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "release",
                "type": "str"
            }
        ],
        "x": 419,
        "y": 3584,
        "wires": [
            [
                "91a0740e.6b2bd8"
            ],
            []
        ]
    },
    {
        "id": "3d914215.23382e",
        "type": "function",
        "z": "51e88f22.62d4a",
        "name": "Set base path",
        "func": "var filename = msg.req.params.fn;\nvar basePath = \"/tmp/\";\nif(filename==\"config.json\") {\n    basePath = \"/etc/nibepi/\"\n}\n\n\n\n\nif(filename.includes(\"..\\\\\")){\n    msg.payload = \"Illegal file path\";\n    msg.statusCode = 405;//not allowed\n    return [null, msg];//fire output 2\n} else if(filename.includes(\"../\")){\n    msg.payload = \"Illegal file path\";\n    msg.statusCode = 405;//not allowed\n    return [null, msg];//fire output 2\n} \n//TODO: add more checks\n\nmsg.filename = basePath + filename;\nreturn [msg, null];//fire output 1\n\n\n",
        "outputs": 2,
        "noerr": 0,
        "x": 367,
        "y": 161,
        "wires": [
            [
                "427c7f2c.19d4a"
            ],
            [
                "ea437e79.1ed52"
            ]
        ]
    },
    {
        "id": "ea437e79.1ed52",
        "type": "http response",
        "z": "51e88f22.62d4a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 848,
        "y": 189,
        "wires": []
    },
    {
        "id": "427c7f2c.19d4a",
        "type": "file in",
        "z": "51e88f22.62d4a",
        "name": "",
        "filename": "",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 557,
        "y": 141,
        "wires": [
            [
                "ea437e79.1ed52"
            ]
        ]
    },
    {
        "id": "390ce923.2e6c06",
        "type": "catch",
        "z": "51e88f22.62d4a",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 187,
        "y": 241,
        "wires": [
            [
                "a63d0dba.f50ef",
                "d9cf9a8e.2293a8"
            ]
        ]
    },
    {
        "id": "a63d0dba.f50ef",
        "type": "function",
        "z": "51e88f22.62d4a",
        "name": "Set 404",
        "func": "msg.payload = msg.error;\nmsg.statusCode = 404;//resource not found\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 567,
        "y": 241,
        "wires": [
            [
                "ea437e79.1ed52"
            ]
        ]
    },
    {
        "id": "d9cf9a8e.2293a8",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 217,
        "y": 281,
        "wires": []
    },
    {
        "id": "73edb218.ca480c",
        "type": "ui_template",
        "z": "51e88f22.62d4a",
        "group": "4aaf21c9.38fb8",
        "name": "ui_temlplate - present download links on dashboard",
        "order": 0,
        "width": 0,
        "height": 0,
        "format": "<style>\n    var redirect = function() {\n    window.location.href = \"/files/nibepi.log\";\n    }\n</style>\n<div>\n\n<button onclick=\"redirect()\">Download</button>\n\n<div class=\"my_content_container\">\n    <a href=\"/files/nibepi.log\">Ladda ner logg</a>\n</div>\n    <a href=\"/files/config.json\">Download Config file</a>\n</div>\n\n    <style type=\"text/css\">\n.my_content_container a {\n    border-bottom: 1px solid #555555;\n    border-left: 1px solid #555555;\n    border-right: 1px solid #555555;\n    border-top: 1px solid #555555;\n    background: #a80202;\n    color: #FFFFFF;\n    display: block;\n    height: 2.5em;\n    padding: 0 1em;\n    width: 10em;       \n    text-decoration: \"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif\";\n}\n// :hover and :active styles left as an exercise for the reader.\n</style>",
        "storeOutMessages": false,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 557,
        "y": 321,
        "wires": [
            []
        ]
    },
    {
        "id": "e54e869e.f4a778",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "Create http endpoint <nodered>/files/xxx  where xxx is the file name to download",
        "info": "",
        "x": 407,
        "y": 101,
        "wires": []
    },
    {
        "id": "3a69f55a.5aab6a",
        "type": "http in",
        "z": "51e88f22.62d4a",
        "name": "",
        "url": "/files/:fn",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 197,
        "y": 161,
        "wires": [
            [
                "3d914215.23382e",
                "5fc73a10.3fa5e4"
            ]
        ]
    },
    {
        "id": "342405d6.d20f0a",
        "type": "ui_button",
        "z": "51e88f22.62d4a",
        "d": true,
        "name": "",
        "group": "97526682.5406d8",
        "order": 10,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Ladda ner logg",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 290,
        "y": 371,
        "wires": [
            [
                "8300d178.63ac6"
            ]
        ]
    },
    {
        "id": "8300d178.63ac6",
        "type": "http request",
        "z": "51e88f22.62d4a",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://localhost:1880/files/nibepi.log",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 469,
        "y": 371,
        "wires": [
            [
                "db0871dc.cf081",
                "342405d6.d20f0a"
            ]
        ]
    },
    {
        "id": "db0871dc.cf081",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 638,
        "y": 371,
        "wires": []
    },
    {
        "id": "5fc73a10.3fa5e4",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 365,
        "y": 210,
        "wires": []
    },
    {
        "id": "34e37b3f.91f4d4",
        "type": "ui_template",
        "z": "51e88f22.62d4a",
        "group": "db563368.2a2e6",
        "name": "blue",
        "order": 4,
        "width": "2",
        "height": "2",
        "format": "\n<md-button class=\"vibrate filled touched bigfont rounded\" style=\"background-color:#2980b9\"   ng-click=\"send({payload: 'Hello World'})\"> \n    Blue<br/>button\n</md-button> \n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 456,
        "y": 581,
        "wires": [
            []
        ]
    },
    {
        "id": "1f42f1c0.ade17e",
        "type": "ui_template",
        "z": "51e88f22.62d4a",
        "group": "db563368.2a2e6",
        "name": "red",
        "order": 2,
        "width": "2",
        "height": "2",
        "format": "\n<md-button class=\"vibrate filled touched bigfont rounded\" style=\"background-color:#c0392b\" ng-click=\"send({payload: 'Hello World'})\"> \n    Red<br/>button\n</md-button> \n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 456,
        "y": 501,
        "wires": [
            []
        ]
    },
    {
        "id": "50eaeaf7.460054",
        "type": "ui_template",
        "z": "51e88f22.62d4a",
        "group": "db563368.2a2e6",
        "name": "green",
        "order": 3,
        "width": "2",
        "height": "2",
        "format": "\n<md-button class=\"filled touched bigfont rounded vibrate\" style=\"background-color:#27ae60\" ng-click=\"send({payload: 'Hello World'})\"> \n    Green<br/>button\n</md-button> \n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 456,
        "y": 541,
        "wires": [
            []
        ]
    },
    {
        "id": "4450e418.ad604c",
        "type": "ui_template",
        "z": "51e88f22.62d4a",
        "group": "db563368.2a2e6",
        "name": "",
        "order": 5,
        "width": "2",
        "height": "1",
        "format": "\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#16a085\"   ng-click=\"send({payload: 'Hello World'})\"> \n    Blue<br/>button\n</md-button> \n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 466,
        "y": 661,
        "wires": [
            []
        ]
    },
    {
        "id": "325d5e4e.9c5862",
        "type": "ui_template",
        "z": "51e88f22.62d4a",
        "group": "db563368.2a2e6",
        "name": "",
        "order": 6,
        "width": "2",
        "height": "1",
        "format": "\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#e67e22\" ng-click=\"send({payload: 'Hello World'})\"> \n    Red<br/>button\n</md-button> \n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 466,
        "y": 621,
        "wires": [
            []
        ]
    },
    {
        "id": "8e2fcfe.d61853",
        "type": "ui_template",
        "z": "51e88f22.62d4a",
        "group": "db563368.2a2e6",
        "name": "on",
        "order": 7,
        "width": "1",
        "height": "1",
        "format": "\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#34495e\" ng-click=\"send({payload: 'Hello World'})\"> \n    On\n</md-button> \n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 456,
        "y": 701,
        "wires": [
            []
        ]
    },
    {
        "id": "1bfdfc43.688954",
        "type": "ui_template",
        "z": "51e88f22.62d4a",
        "group": "db563368.2a2e6",
        "name": "off",
        "order": 8,
        "width": "1",
        "height": "1",
        "format": "\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#8e44ad\" ng-click=\"send({payload: 'Hello World'})\"> \n    Off\n</md-button> \n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "x": 456,
        "y": 741,
        "wires": [
            []
        ]
    },
    {
        "id": "89764535.4921b8",
        "type": "ui_template",
        "z": "51e88f22.62d4a",
        "group": "db563368.2a2e6",
        "name": "stuff",
        "order": 0,
        "width": "0",
        "height": "0",
        "format": "<style>\n  .filled { \n      height: 100% !important;\n\n      padding: 0 !important;\n      margin: 0 !important;\n  }\n  .nr-dashboard-template {\n      padding: 0;\n      margin: 0;\n  }\n  \n  .rounded {\n  border-radius: 12px 12px 12px 12px;\n}\n \n   .bigfont {\n  font-size: 18px;\n}\n\n   .smallfont {\n  font-size: 12px;\n}\n  \n</style>\n\n<script>\n$('.vibrate').on('click', function() {\n  navigator.vibrate(100);\n});\n\nfunction restore_bg(x) {\n            $(this).css(\"background-color\", x);\n    };\n\n$('.touched').on('mousedown', function() {\n    \n    var x= $(this).css(\"background-color\");\n    $(this).css(\"background-color\", \"yellow\");\n    \n    setTimeout(restore_bg.bind(this,x),100);\n    navigator.vibrate(80);\n    });\n    \n</script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 336,
        "y": 501,
        "wires": [
            []
        ]
    },
    {
        "id": "399a6d3c.af0fb2",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "msg.flows_ts = toTimestamp(msg.payload.feed.entry[0].updated[0]);\nreturn msg;\n\nfunction toTimestamp(strDate) {\n    var datum = Date.parse(strDate);\n    return Number((datum).toFixed());\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 372,
        "y": 3451,
        "wires": [
            [
                "5c76619d.bbf42"
            ]
        ]
    },
    {
        "id": "3f6bdb98.dc2144",
        "type": "xml",
        "z": "b7f67da0.fbf1",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 694,
        "y": 3500,
        "wires": [
            [
                "399a6d3c.af0fb2"
            ]
        ]
    },
    {
        "id": "9b7681f.840428",
        "type": "http request",
        "z": "b7f67da0.fbf1",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 546,
        "y": 3500,
        "wires": [
            [
                "3f6bdb98.dc2144"
            ]
        ]
    },
    {
        "id": "38a6e41d.bbf2fc",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "",
        "func": "let config = msg.config;\nif(config.update===undefined) return;\nif(config.update.release===undefined) return;\nif(config.update.release==\"master\" || config.update.release==\"english\") {\n    msg.url = \"https://github.com/anerdins/nibepi-flow/commits/master.atom\";\n} else if(config.update.release==\"snapshot\" || config.update.release==\"snapshot-EN\") {\n    msg.url = \"https://github.com/anerdins/nibepi-flow/commits/snapshot.atom\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 372,
        "y": 3500,
        "wires": [
            [
                "9b7681f.840428"
            ]
        ]
    },
    {
        "id": "b62f2b0b.3d3248",
        "type": "ui_slider",
        "z": "ae9d7ce8.0991c",
        "name": "Gränsvärde CO2",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "2ed5a2d7.ca08ce",
        "order": 3,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "fan/high_co2_limit",
        "min": "450",
        "max": "2000",
        "step": "25",
        "x": 1112,
        "y": 56,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "bd230e5b.604cd",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "high_co2_limit",
                "type": "str"
            }
        ],
        "x": 629,
        "y": 49,
        "wires": [
            [
                "62c930be.810ba"
            ],
            []
        ]
    },
    {
        "id": "a0c72050.1c73a",
        "type": "ui_text",
        "z": "fa4686d6.c21688",
        "group": "bcb5f9e4.9bc858",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Automatisk tillfällig lyx info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 635,
        "y": 574,
        "wires": []
    },
    {
        "id": "bc411f62.b5f87",
        "type": "ui_text",
        "z": "fa4686d6.c21688",
        "group": "38b6d907.520796",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Varmvatten prioritet info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 635,
        "y": 658,
        "wires": []
    },
    {
        "id": "7bac2960.6ef798",
        "type": "nibe-request",
        "z": "eee76599.b5f0d8",
        "server": "844659a2.8d8508",
        "name": "rmu_s1",
        "x": 543,
        "y": 56,
        "wires": [
            [],
            [
                "12681ba5.6de514"
            ]
        ]
    },
    {
        "id": "60e3b487.efea2c",
        "type": "ui_switch",
        "z": "eee76599.b5f0d8",
        "name": "RMU S1",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "6356450b.b9318c",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 893,
        "y": 56,
        "wires": [
            [
                "a8806c73.18578"
            ]
        ]
    },
    {
        "id": "a8806c73.18578",
        "type": "nibe-output",
        "z": "eee76599.b5f0d8",
        "server": "844659a2.8d8508",
        "name": "rmu_s1",
        "x": 1138,
        "y": 56,
        "wires": [
            [
                "12681ba5.6de514"
            ]
        ]
    },
    {
        "id": "e817a238.c8734",
        "type": "nibe-request",
        "z": "eee76599.b5f0d8",
        "server": "844659a2.8d8508",
        "name": "rmu_s2",
        "x": 543,
        "y": 105,
        "wires": [
            [],
            [
                "71cddd89.5c64c4"
            ]
        ]
    },
    {
        "id": "f83ba770.b754d8",
        "type": "ui_switch",
        "z": "eee76599.b5f0d8",
        "name": "RMU S2",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "6356450b.b9318c",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 893,
        "y": 105,
        "wires": [
            [
                "4c596cb9.9e6a44"
            ]
        ]
    },
    {
        "id": "4c596cb9.9e6a44",
        "type": "nibe-output",
        "z": "eee76599.b5f0d8",
        "server": "844659a2.8d8508",
        "name": "rmu_s2",
        "x": 1138,
        "y": 105,
        "wires": [
            [
                "71cddd89.5c64c4"
            ]
        ]
    },
    {
        "id": "6cbef66.4c31208",
        "type": "nibe-request",
        "z": "eee76599.b5f0d8",
        "server": "844659a2.8d8508",
        "name": "rmu_s3",
        "x": 543,
        "y": 154,
        "wires": [
            [],
            [
                "a987e708.5634a8"
            ]
        ]
    },
    {
        "id": "f680e178.2e0ef",
        "type": "ui_switch",
        "z": "eee76599.b5f0d8",
        "name": "RMU S3",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "6356450b.b9318c",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 893,
        "y": 154,
        "wires": [
            [
                "f9cc9213.15fb9"
            ]
        ]
    },
    {
        "id": "f9cc9213.15fb9",
        "type": "nibe-output",
        "z": "eee76599.b5f0d8",
        "server": "844659a2.8d8508",
        "name": "rmu_s3",
        "x": 1138,
        "y": 154,
        "wires": [
            [
                "a987e708.5634a8"
            ]
        ]
    },
    {
        "id": "b41bece3.1e5d4",
        "type": "ui_template",
        "z": "b7f67da0.fbf1",
        "group": "fe94277c.dcd118",
        "name": "Avancerat 1",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<p>\n    Här går det att köra enkla SSH kommandon på NibePi.<br>\n</p>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 791,
        "y": 77,
        "wires": [
            []
        ]
    },
    {
        "id": "fe27461e.7e1e48",
        "type": "function",
        "z": "eee76599.b5f0d8",
        "name": "Enable/Disable",
        "func": "if(msg.enabled!==undefined && msg.enabled===true) {\n    let hide = {\n        \"group\":\n            {\"show\":\n                [\"Inställningar_RMU40_S1\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n} else if(msg.enabled===false) {\n    let hide = {\n        \"group\":\n            {\"hide\":\n                [\"Inställningar_RMU40_S1\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 990,
        "y": 315,
        "wires": [
            [],
            [
                "c7cde5a3.053a28"
            ]
        ]
    },
    {
        "id": "c7cde5a3.053a28",
        "type": "ui_ui_control",
        "z": "eee76599.b5f0d8",
        "name": "Disable Group S1",
        "events": "all",
        "x": 1217,
        "y": 308,
        "wires": [
            []
        ]
    },
    {
        "id": "655c24ec.f9bbdc",
        "type": "ui_text_input",
        "z": "b7f67da0.fbf1",
        "name": "Fastighetens storlek",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "a8bf2b6e.6abc18",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "number",
        "delay": "0",
        "topic": "size",
        "x": 1549,
        "y": 238,
        "wires": [
            [
                "6de034de.5247fc"
            ]
        ]
    },
    {
        "id": "6de034de.5247fc",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "size",
                "type": "str"
            }
        ],
        "x": 1119,
        "y": 238,
        "wires": [
            [
                "d2d81f6.b578ce"
            ],
            []
        ]
    },
    {
        "id": "67261556.74310c",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_dm_boost",
                "type": "str"
            }
        ],
        "x": 356,
        "y": 1274,
        "wires": [
            [
                "8e5ae09.f256e2"
            ],
            []
        ]
    },
    {
        "id": "d71ebd3b.ad766",
        "type": "ui_switch",
        "z": "ae9d7ce8.0991c",
        "name": "Aktivera",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "ffc74889.8cb7c8",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "fan/enable_dm_boost",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 823,
        "y": 1267,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "be8822b2.3c387",
        "type": "ui_slider",
        "z": "ae9d7ce8.0991c",
        "name": "Luftflöde",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "ffc74889.8cb7c8",
        "order": 5,
        "width": "0",
        "height": "0",
        "passthru": false,
        "outs": "end",
        "topic": "fan/dm_boost_value",
        "min": "0",
        "max": "350",
        "step": "1",
        "x": 823,
        "y": 1316,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "a8750e84.a53ad",
        "type": "subflow:c191a5d.5d76258",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "dm_boost_value",
                "type": "str"
            }
        ],
        "x": 356,
        "y": 1323,
        "wires": [
            [
                "2a8bb9ee.8258e6"
            ],
            []
        ]
    },
    {
        "id": "81922b16.db9638",
        "type": "ui_text",
        "z": "ae9d7ce8.0991c",
        "group": "ffc74889.8cb7c8",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Gradminut boost",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1350,
        "y": 406,
        "wires": []
    },
    {
        "id": "d78784c9.e2bbc8",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "Automatiskt luftflöde",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "97526682.5406d8",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "fan",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 444,
        "y": 2471,
        "wires": [
            [
                "9ba7c561.6e6b08"
            ]
        ]
    },
    {
        "id": "9ba7c561.6e6b08",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "fan",
                "type": "str"
            }
        ],
        "x": 663,
        "y": 2471,
        "wires": [
            [
                "43f513e6.278bac"
            ],
            []
        ]
    },
    {
        "id": "4249c2be.4caddc",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 322,
        "y": 1344,
        "wires": []
    },
    {
        "id": "b0e24ccb.86c35",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "Spara grafer",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "da3c0db0.9c6aa",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "save_graph",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 378,
        "y": 2107,
        "wires": [
            [
                "aa96a81d.82d6c8"
            ]
        ]
    },
    {
        "id": "aa96a81d.82d6c8",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "system",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "save_graph",
                "type": "str"
            }
        ],
        "x": 630,
        "y": 2107,
        "wires": [
            [
                "4d561a36.50fd34"
            ],
            []
        ]
    },
    {
        "id": "796d2d88.6cda84",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "saveGraph",
        "x": 777,
        "y": 2912,
        "wires": [
            [
                "7e7da779.2a9ea8"
            ]
        ]
    },
    {
        "id": "fb6e013f.6f056",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "saveGraph",
        "x": 588,
        "y": 3024,
        "wires": [
            [
                "1601f8.7c0cee09"
            ]
        ]
    },
    {
        "id": "236a4859.181cd8",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "saveGraph",
        "x": 1099,
        "y": 4123,
        "wires": [
            [
                "525036.2cc69fcc"
            ]
        ]
    },
    {
        "id": "5e0de75.c411d18",
        "type": "nibe-request",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 253,
        "y": 1582,
        "wires": [
            [],
            [
                "79bf305.f523ad"
            ]
        ]
    },
    {
        "id": "ec00f757.4cdbe8",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "datagraph",
        "x": 476,
        "y": 252,
        "wires": [
            [
                "d1515232.e5969",
                "8524887c.d97728"
            ],
            []
        ]
    },
    {
        "id": "d1515232.e5969",
        "type": "debug",
        "z": "65e6bc5.05f2644",
        "name": "Graph IN",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 690,
        "y": 294,
        "wires": []
    },
    {
        "id": "71de0e01.6c188",
        "type": "ui_chart",
        "z": "65e6bc5.05f2644",
        "name": "Graf",
        "group": "261b1f51.5c37e",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Data saknas",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 1100,
        "y": 231,
        "wires": [
            [
                "606c5425.846fec"
            ]
        ]
    },
    {
        "id": "54623482.22352c",
        "type": "ui_button",
        "z": "65e6bc5.05f2644",
        "name": "Uppdatera",
        "group": "261b1f51.5c37e",
        "order": 2,
        "width": "18",
        "height": "1",
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "update",
        "x": 623,
        "y": 140,
        "wires": [
            [
                "ec00f757.4cdbe8"
            ]
        ]
    },
    {
        "id": "63058c8e.1043f4",
        "type": "inject",
        "z": "65e6bc5.05f2644",
        "name": "",
        "topic": "",
        "payload": "[]",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 645,
        "y": 189,
        "wires": [
            [
                "71de0e01.6c188"
            ]
        ]
    },
    {
        "id": "4f2c3fe1.ee64c",
        "type": "inject",
        "z": "65e6bc5.05f2644",
        "name": "",
        "topic": "update",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 240,
        "y": 252,
        "wires": [
            [
                "ec00f757.4cdbe8"
            ]
        ]
    },
    {
        "id": "702b6eb2.c73b2",
        "type": "nibe-output",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "x": 1022,
        "y": 378,
        "wires": [
            []
        ]
    },
    {
        "id": "9ffa29c1.b3d8c8",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "Save graph registers",
        "func": "var data = global.get('data');\nvar time = Date.now();\nlet config = msg.config;\nif(config.data===undefined) config.data = {};\nif(config.data.graph===undefined) config.data.graph = [];\nif(msg.payload.isChecked===false) {\n    // Remove register\n    let index = config.data.graph.findIndex(n => n == msg.payload.register);\n    if(index!==-1) {\n        config.data.graph.splice(index);\n        node.send({topic:\"setConfig\",payload:config});\n    } else {\n        // Nothing to remove\n    }\n} else if(msg.payload.isChecked===true) {\n    let index = config.data.graph.findIndex(n => n == msg.payload.register);\n    if(index===-1) {\n        config.data.graph.push(msg.payload.register);\n        node.send({topic:\"setConfig\",payload:config});\n    } else {\n        // Register already exists\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 765,
        "y": 385,
        "wires": [
            [
                "702b6eb2.c73b2",
                "54e899fa.d59218"
            ]
        ]
    },
    {
        "id": "b58200b4.f0de1",
        "type": "nibe-request",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 554,
        "y": 385,
        "wires": [
            [
                "9ffa29c1.b3d8c8",
                "a9882946.4e8888"
            ],
            []
        ]
    },
    {
        "id": "39af3c28.745144",
        "type": "ui_list",
        "z": "65e6bc5.05f2644",
        "group": "bd199d65.157fc",
        "name": "Data",
        "order": 2,
        "width": "12",
        "height": "11",
        "lineType": "three",
        "actionType": "check",
        "allowHTML": false,
        "outputs": 1,
        "topic": "",
        "x": 414,
        "y": 385,
        "wires": [
            [
                "b58200b4.f0de1"
            ]
        ]
    },
    {
        "id": "7209703c.94e2",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "registers_selected",
        "x": 234,
        "y": 385,
        "wires": [
            [
                "39af3c28.745144",
                "910decb4.e0a23"
            ],
            []
        ]
    },
    {
        "id": "850769c.f7b9598",
        "type": "inject",
        "z": "65e6bc5.05f2644",
        "name": "",
        "topic": "update",
        "payload": "",
        "payloadType": "date",
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 177,
        "y": 315,
        "wires": [
            [
                "7209703c.94e2"
            ]
        ]
    },
    {
        "id": "910decb4.e0a23",
        "type": "debug",
        "z": "65e6bc5.05f2644",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 533,
        "y": 336,
        "wires": []
    },
    {
        "id": "96122fbe.f0ca2",
        "type": "debug",
        "z": "358baec9.c8b902",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1233,
        "y": 567,
        "wires": []
    },
    {
        "id": "6d821dfd.4142d4",
        "type": "ui_ui_control",
        "z": "65e6bc5.05f2644",
        "name": "",
        "events": "all",
        "x": 333,
        "y": 700,
        "wires": [
            [
                "90aa5691.0f27d8",
                "8524887c.d97728",
                "9e36c8ff.1ecbf8",
                "db88bff5.9059f",
                "fb9ec5ab.879b38",
                "4f496004.61176",
                "82a3ab6e.f68b98",
                "74dba304.b28b2c",
                "1ad79da9.daa052",
                "326e9c2d.201cd4"
            ]
        ]
    },
    {
        "id": "90aa5691.0f27d8",
        "type": "debug",
        "z": "65e6bc5.05f2644",
        "name": "UI",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1093,
        "y": 287,
        "wires": []
    },
    {
        "id": "8524887c.d97728",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Datahantering\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 785,
        "y": 217,
        "wires": [
            [
                "71de0e01.6c188",
                "dc988b21.09bf38"
            ],
            [
                "ec00f757.4cdbe8"
            ]
        ]
    },
    {
        "id": "606c5425.846fec",
        "type": "debug",
        "z": "65e6bc5.05f2644",
        "name": "Graph OUT",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1246,
        "y": 231,
        "wires": []
    },
    {
        "id": "dc988b21.09bf38",
        "type": "debug",
        "z": "65e6bc5.05f2644",
        "name": "NODE",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 981,
        "y": 140,
        "wires": []
    },
    {
        "id": "11630e74.8dac82",
        "type": "inject",
        "z": "65e6bc5.05f2644",
        "name": "",
        "topic": "time",
        "payload": "3",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 211,
        "y": 462,
        "wires": [
            [
                "ec00f757.4cdbe8"
            ]
        ]
    },
    {
        "id": "96e42b24.7aaa78",
        "type": "ui_slider",
        "z": "65e6bc5.05f2644",
        "name": "Tid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "261b1f51.5c37e",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 217,
        "y": 504,
        "wires": [
            [
                "ec00f757.4cdbe8"
            ]
        ]
    },
    {
        "id": "c298bb69.805ce8",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "start_1",
        "x": 451,
        "y": 623,
        "wires": [
            [
                "9e36c8ff.1ecbf8"
            ],
            []
        ]
    },
    {
        "id": "e36871c4.db782",
        "type": "ui_chart",
        "z": "65e6bc5.05f2644",
        "name": "Värmeinformation",
        "group": "a8bf2b6e.6abc18",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "{{msg.label}}",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 979,
        "y": 616,
        "wires": [
            []
        ]
    },
    {
        "id": "b71782d0.0b1ed",
        "type": "ui_slider",
        "z": "65e6bc5.05f2644",
        "name": "Tid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "a8bf2b6e.6abc18",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 246,
        "y": 623,
        "wires": [
            [
                "c298bb69.805ce8"
            ]
        ]
    },
    {
        "id": "a9882946.4e8888",
        "type": "debug",
        "z": "65e6bc5.05f2644",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 578,
        "y": 446,
        "wires": []
    },
    {
        "id": "54e899fa.d59218",
        "type": "debug",
        "z": "65e6bc5.05f2644",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 932,
        "y": 455,
        "wires": []
    },
    {
        "id": "9dbabd89.67234",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "forecast_1",
        "x": 458,
        "y": 763,
        "wires": [
            [
                "db88bff5.9059f"
            ],
            []
        ]
    },
    {
        "id": "26eb3859.ff5d48",
        "type": "ui_chart",
        "z": "65e6bc5.05f2644",
        "name": "Prognostemperatur S1",
        "group": "7e910a08.c6c984",
        "order": 4,
        "width": "0",
        "height": "0",
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "Data ej tillgängligt",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 842,
        "y": 763,
        "wires": [
            []
        ]
    },
    {
        "id": "9e36c8ff.1ecbf8",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Startsida\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 652,
        "y": 623,
        "wires": [
            [
                "a63ca1a1.650e9"
            ],
            [
                "c298bb69.805ce8"
            ]
        ]
    },
    {
        "id": "db88bff5.9059f",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Prognosreglering\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 631,
        "y": 763,
        "wires": [
            [
                "26eb3859.ff5d48"
            ],
            [
                "9dbabd89.67234"
            ]
        ]
    },
    {
        "id": "41f84924.bc1198",
        "type": "ui_slider",
        "z": "65e6bc5.05f2644",
        "name": "Tid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "7e910a08.c6c984",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 246,
        "y": 763,
        "wires": [
            [
                "9dbabd89.67234"
            ]
        ]
    },
    {
        "id": "b8e45a29.097168",
        "type": "ui_button",
        "z": "b7f67da0.fbf1",
        "name": "Stäng av NibePi hårdvara",
        "group": "fe94277c.dcd118",
        "order": 10,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "shutdown",
        "payloadType": "str",
        "topic": "",
        "x": 306,
        "y": 3227,
        "wires": [
            [
                "5ef6c9b8.bf6d08",
                "ed4fa67e.2744f8",
                "ec83f4d1.c6a8a8"
            ]
        ]
    },
    {
        "id": "5ef6c9b8.bf6d08",
        "type": "nibe-output",
        "z": "b7f67da0.fbf1",
        "server": "844659a2.8d8508",
        "name": "saveGraph",
        "x": 552,
        "y": 3206,
        "wires": [
            [
                "7de64138.6b5d3"
            ]
        ]
    },
    {
        "id": "7de64138.6b5d3",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "sudo halt",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 745,
        "y": 3206,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "b881d2a8.569a4",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "hw_lux",
        "x": 458,
        "y": 896,
        "wires": [
            [
                "fb9ec5ab.879b38"
            ],
            []
        ]
    },
    {
        "id": "fb9ec5ab.879b38",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Varmvattenreglering\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 631,
        "y": 896,
        "wires": [
            [
                "878eb7cb.141428"
            ],
            [
                "b881d2a8.569a4"
            ]
        ]
    },
    {
        "id": "176a8ef5.3e5701",
        "type": "ui_slider",
        "z": "65e6bc5.05f2644",
        "name": "Tid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "bcb5f9e4.9bc858",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 246,
        "y": 896,
        "wires": [
            [
                "b881d2a8.569a4"
            ]
        ]
    },
    {
        "id": "878eb7cb.141428",
        "type": "ui_chart",
        "z": "65e6bc5.05f2644",
        "name": "Automatisk tillfällig lyx",
        "group": "bcb5f9e4.9bc858",
        "order": 5,
        "width": 0,
        "height": 0,
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 849,
        "y": 896,
        "wires": [
            []
        ]
    },
    {
        "id": "93ac06c3.827608",
        "type": "ui_chart",
        "z": "65e6bc5.05f2644",
        "name": "Varmvatten prioritet",
        "group": "38b6d907.520796",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 825,
        "y": 959,
        "wires": [
            []
        ]
    },
    {
        "id": "130583bb.67283c",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "hw_prio",
        "x": 458,
        "y": 959,
        "wires": [
            [
                "4f496004.61176"
            ],
            []
        ]
    },
    {
        "id": "4f496004.61176",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Varmvattenreglering\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 631,
        "y": 959,
        "wires": [
            [
                "93ac06c3.827608"
            ],
            [
                "130583bb.67283c"
            ]
        ]
    },
    {
        "id": "5662a415.06708c",
        "type": "ui_slider",
        "z": "65e6bc5.05f2644",
        "name": "Tid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "38b6d907.520796",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 246,
        "y": 959,
        "wires": [
            [
                "130583bb.67283c"
            ]
        ]
    },
    {
        "id": "49882825.7b48d8",
        "type": "ui_switch",
        "z": "65e6bc5.05f2644",
        "name": "Uppdatera grafer med data",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "da3c0db0.9c6aa",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "auto_update",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 337,
        "y": 70,
        "wires": [
            [
                "fa95fd50.94cac"
            ]
        ]
    },
    {
        "id": "fa95fd50.94cac",
        "type": "subflow:c191a5d.5d76258",
        "z": "65e6bc5.05f2644",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "system",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "auto_update",
                "type": "str"
            }
        ],
        "x": 587,
        "y": 70,
        "wires": [
            [
                "db88d24f.a6d11"
            ],
            []
        ]
    },
    {
        "id": "741e9555.45552c",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s2",
        "select": "forecast_1",
        "x": 465,
        "y": 819,
        "wires": [
            [
                "82a3ab6e.f68b98"
            ],
            []
        ]
    },
    {
        "id": "82a3ab6e.f68b98",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Prognosreglering\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 638,
        "y": 819,
        "wires": [
            [
                "1045d759.a961c9"
            ],
            [
                "741e9555.45552c"
            ]
        ]
    },
    {
        "id": "e8bbd657.4aa3b8",
        "type": "ui_slider",
        "z": "65e6bc5.05f2644",
        "name": "Tid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "197ce413.27432c",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 253,
        "y": 819,
        "wires": [
            [
                "741e9555.45552c"
            ]
        ]
    },
    {
        "id": "1045d759.a961c9",
        "type": "ui_chart",
        "z": "65e6bc5.05f2644",
        "name": "Prognostemperatur S2",
        "group": "197ce413.27432c",
        "order": 4,
        "width": "0",
        "height": "0",
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "System ej anslutet",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 842,
        "y": 819,
        "wires": [
            []
        ]
    },
    {
        "id": "1249eda5.8ac642",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "indoor_1",
        "x": 458,
        "y": 1022,
        "wires": [
            [
                "74dba304.b28b2c"
            ],
            []
        ]
    },
    {
        "id": "74dba304.b28b2c",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Inomhusreglering\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 631,
        "y": 1022,
        "wires": [
            [
                "5f434aee.4ca444"
            ],
            [
                "1249eda5.8ac642"
            ]
        ]
    },
    {
        "id": "a5f5926b.ba0a",
        "type": "ui_slider",
        "z": "65e6bc5.05f2644",
        "name": "Tid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "a2cfe148.70708",
        "order": 11,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 246,
        "y": 1022,
        "wires": [
            [
                "1249eda5.8ac642"
            ]
        ]
    },
    {
        "id": "6b58d375.81bc6c",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s2",
        "select": "indoor_1",
        "x": 465,
        "y": 1078,
        "wires": [
            [
                "1ad79da9.daa052"
            ],
            []
        ]
    },
    {
        "id": "1ad79da9.daa052",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Inomhusreglering\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 638,
        "y": 1078,
        "wires": [
            [
                "1b015e0a.ec6bc2"
            ],
            [
                "6b58d375.81bc6c"
            ]
        ]
    },
    {
        "id": "a83973b3.c3d1e",
        "type": "ui_slider",
        "z": "65e6bc5.05f2644",
        "name": "Tid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "6ee1e12a.a6f04",
        "order": 11,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 253,
        "y": 1078,
        "wires": [
            [
                "6b58d375.81bc6c"
            ]
        ]
    },
    {
        "id": "1b015e0a.ec6bc2",
        "type": "ui_chart",
        "z": "65e6bc5.05f2644",
        "name": "Inomhusreglering S2",
        "group": "6ee1e12a.a6f04",
        "order": 10,
        "width": "0",
        "height": "0",
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "Data ej tillgängligt ännu.",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 842,
        "y": 1078,
        "wires": [
            []
        ]
    },
    {
        "id": "5f434aee.4ca444",
        "type": "ui_chart",
        "z": "65e6bc5.05f2644",
        "name": "Inomhusreglering S1",
        "group": "a2cfe148.70708",
        "order": 10,
        "width": "0",
        "height": "0",
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "Data ej tillgängligt ännu.",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 835,
        "y": 1022,
        "wires": [
            []
        ]
    },
    {
        "id": "b982aa7.a56ab58",
        "type": "ui_chart",
        "z": "65e6bc5.05f2644",
        "name": "Automatiskt luftflöde",
        "group": "ad7a33f3.24adf",
        "order": 6,
        "width": "12",
        "height": "12",
        "label": "",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 842,
        "y": 1134,
        "wires": [
            []
        ]
    },
    {
        "id": "451cdade.53c734",
        "type": "nibe-graph",
        "z": "65e6bc5.05f2644",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "fan_1",
        "x": 465,
        "y": 1134,
        "wires": [
            [
                "326e9c2d.201cd4"
            ],
            []
        ]
    },
    {
        "id": "326e9c2d.201cd4",
        "type": "function",
        "z": "65e6bc5.05f2644",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Automatiskt luftflöde\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 638,
        "y": 1134,
        "wires": [
            [
                "b982aa7.a56ab58"
            ],
            [
                "451cdade.53c734"
            ]
        ]
    },
    {
        "id": "41a4486e.6ac608",
        "type": "ui_slider",
        "z": "65e6bc5.05f2644",
        "name": "Tid",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "ad7a33f3.24adf",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 253,
        "y": 1134,
        "wires": [
            [
                "451cdade.53c734"
            ]
        ]
    },
    {
        "id": "44d61721.dc1b18",
        "type": "change",
        "z": "b7f67da0.fbf1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Uppdatering pågår, rör inget... Invänta omstart.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1011,
        "y": 3899,
        "wires": [
            [
                "28a0d61e.83686a"
            ]
        ]
    },
    {
        "id": "b819b51e.7e2888",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "Diagnostik",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "97526682.5406d8",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "diagnostic",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 414,
        "y": 2520,
        "wires": [
            [
                "a6b3697.c8d4498"
            ]
        ]
    },
    {
        "id": "a6b3697.c8d4498",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "diagnostic",
                "type": "str"
            }
        ],
        "x": 663,
        "y": 2520,
        "wires": [
            [
                "10a1363d.d965ca"
            ],
            []
        ]
    },
    {
        "id": "5b3bd5b.489a32c",
        "type": "ui_switch",
        "z": "b7f67da0.fbf1",
        "name": "Prognosreglering",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "97526682.5406d8",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "weather",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 434,
        "y": 2569,
        "wires": [
            [
                "2764fba3.e4d1e4"
            ]
        ]
    },
    {
        "id": "2764fba3.e4d1e4",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "weather",
                "type": "str"
            }
        ],
        "x": 663,
        "y": 2569,
        "wires": [
            [
                "7dc0a2c4.3a9bec"
            ],
            []
        ]
    },
    {
        "id": "156d24ac.25da5b",
        "type": "ui_chart",
        "z": "27236b7a.3c2274",
        "name": "",
        "group": "3af8f7e6.d24338",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Drifttider",
        "chartType": "line",
        "legend": "true",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Ingen graf tillgänglig än",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "72",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#ff0000",
            "#004080",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 767,
        "y": 147,
        "wires": [
            []
        ]
    },
    {
        "id": "b1f34ef2.e9568",
        "type": "nibe-graph",
        "z": "27236b7a.3c2274",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "diagnostic_defrost",
        "x": 423,
        "y": 147,
        "wires": [
            [
                "9af4587d.39cc28",
                "592d06bd.f1bce8"
            ],
            []
        ]
    },
    {
        "id": "9af4587d.39cc28",
        "type": "function",
        "z": "27236b7a.3c2274",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Diagnostik\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 596,
        "y": 147,
        "wires": [
            [
                "156d24ac.25da5b"
            ],
            [
                "b1f34ef2.e9568"
            ]
        ]
    },
    {
        "id": "ce0658.913ce9a8",
        "type": "ui_slider",
        "z": "27236b7a.3c2274",
        "name": "",
        "label": "Tid",
        "tooltip": "",
        "group": "3af8f7e6.d24338",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "72",
        "step": 1,
        "x": 211,
        "y": 147,
        "wires": [
            [
                "b1f34ef2.e9568"
            ]
        ]
    },
    {
        "id": "592d06bd.f1bce8",
        "type": "function",
        "z": "27236b7a.3c2274",
        "name": "Enable/Disable",
        "func": "if(msg.enabled===false) {\n    let hide = {\n        \"group\":\n            {\"hide\":\n                [\"Diagnostik_Kompressoreffektivitet\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n} else {\n    let hide = {\n        \"group\":\n            {\"show\":\n                [\"Diagnostik_Kompressoreffektivitet\"]\n            }\n        }\n    node.send([null,{payload:hide}]);\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 794,
        "y": 196,
        "wires": [
            [],
            [
                "9ea7c2b5.47c55"
            ]
        ]
    },
    {
        "id": "9ea7c2b5.47c55",
        "type": "ui_ui_control",
        "z": "27236b7a.3c2274",
        "name": "Disable Group S2",
        "events": "all",
        "x": 1007,
        "y": 196,
        "wires": [
            []
        ]
    },
    {
        "id": "4948671e.3c3978",
        "type": "nibe-graph",
        "z": "27236b7a.3c2274",
        "server": "844659a2.8d8508",
        "name": "",
        "system": "s1",
        "select": "efficiency_graph",
        "x": 423,
        "y": 259,
        "wires": [
            [
                "2518a7e6.c9baa8"
            ],
            [
                "94e7615d.bd035"
            ]
        ]
    },
    {
        "id": "2518a7e6.c9baa8",
        "type": "function",
        "z": "27236b7a.3c2274",
        "name": "",
        "func": "var ui = msg.payload;\nvar name = msg.name;\nvar tab = \"Diagnostik\";\nvar graph = msg.graph;\nvar block = context.get('block')||{};\nif(ui==\"change\") {\n    if(name==tab) {\n        block[msg.socketid] = false;\n        node.send([null,{topic:\"update\"}])\n        \n    } else {\n        block[msg.socketid] = true;\n    }\n} else if(ui==\"lost\") {\n    block[msg.socketid] = true;\n}\nif(graph!==undefined) {\n    let blocked = true;\n    for (var object in block) {\n                    if (block.hasOwnProperty(object)) {\n                        if(block[object]===false) {\n                            blocked = false;\n                        }\n                    }\n                }\n    if(blocked===false) {\n        return msg;\n    } else if(blocked===true) {\n    node.send({payload:[]});\n}\n}\n\ncontext.set('block',block);",
        "outputs": 2,
        "noerr": 0,
        "x": 596,
        "y": 259,
        "wires": [
            [
                "c1ddf43e.eca518"
            ],
            [
                "4948671e.3c3978"
            ]
        ]
    },
    {
        "id": "fb927d2f.89856",
        "type": "ui_slider",
        "z": "27236b7a.3c2274",
        "name": "",
        "label": "Dagar",
        "tooltip": "",
        "group": "3af8f7e6.d24338",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "time",
        "min": 0,
        "max": "90",
        "step": 1,
        "x": 211,
        "y": 259,
        "wires": [
            [
                "4948671e.3c3978"
            ]
        ]
    },
    {
        "id": "c1ddf43e.eca518",
        "type": "ui_chart",
        "z": "27236b7a.3c2274",
        "name": "",
        "group": "3af8f7e6.d24338",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "Effektivitet",
        "chartType": "pie",
        "legend": "true",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "Ingen graf tillgänglig än",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "72",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#ff0000",
            "#004080",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 784,
        "y": 259,
        "wires": [
            []
        ]
    },
    {
        "id": "94e7615d.bd035",
        "type": "ui_text",
        "z": "27236b7a.3c2274",
        "group": "3af8f7e6.d24338",
        "order": 7,
        "width": "12",
        "height": "3",
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 757,
        "y": 315,
        "wires": []
    },
    {
        "id": "b45691c3.2405a",
        "type": "ui_ui_control",
        "z": "27236b7a.3c2274",
        "name": "",
        "events": "all",
        "x": 137,
        "y": 203,
        "wires": [
            [
                "9af4587d.39cc28",
                "2518a7e6.c9baa8"
            ]
        ]
    },
    {
        "id": "22fa46b9.2067fa",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "1b40f24f.7b6d9e",
        "order": 7,
        "width": "12",
        "height": "2",
        "name": "Info värme",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "col-center",
        "x": 1589,
        "y": 301,
        "wires": []
    },
    {
        "id": "b5e41612.13ed78",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "94305680.d32c48",
        "order": 7,
        "width": "12",
        "height": "2",
        "name": "Info värme",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "col-center",
        "x": 574,
        "y": 1386,
        "wires": []
    },
    {
        "id": "a55dd36.0c7fe3",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "temp_low_s2",
                "type": "str"
            }
        ],
        "x": 181,
        "y": 1421,
        "wires": [
            [
                "9a5f07b1.e95648"
            ],
            []
        ]
    },
    {
        "id": "d41292d7.71f9c",
        "type": "ui_slider",
        "z": "960078e.e3e6d88",
        "name": "Differens",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "94305680.d32c48",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "price/temp_low",
        "min": "-3",
        "max": "2",
        "step": "0.1",
        "x": 564,
        "y": 1442,
        "wires": [
            [
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "749fe356.3ce75c",
        "type": "nibe-request",
        "z": "960078e.e3e6d88",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 120,
        "y": 1288,
        "wires": [
            [],
            [
                "a7d38e8d.3912f"
            ]
        ]
    },
    {
        "id": "953c6e6b.cd62f",
        "type": "nibe-input",
        "z": "960078e.e3e6d88",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 120,
        "y": 1330,
        "wires": [
            [
                "a7d38e8d.3912f"
            ],
            []
        ]
    },
    {
        "id": "a7d38e8d.3912f",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "",
        "func": "var sensors = msg.payload.home.inside_sensors||[];\nvar output = [\"Ingen\"];\nfor (const arr of sensors) {\n    output.push(arr.name)\n}\nif(output!==undefined && output!==[]) {\n    node.send({options:output});\n    if(msg.payload.price!==undefined) {\n        node.send({payload:msg.payload.price.sensor_s2})\n    }\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 253,
        "y": 1316,
        "wires": [
            [
                "5cf6bf8.d338a4"
            ]
        ]
    },
    {
        "id": "4dfc1afe.d9ca64",
        "type": "ui_dropdown",
        "z": "960078e.e3e6d88",
        "name": "Välj Inomhusgivare",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Välj",
        "group": "94305680.d32c48",
        "order": 10,
        "width": "0",
        "height": "0",
        "passthru": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "price/sensor",
        "x": 587,
        "y": 1330,
        "wires": [
            [
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "d12fa6cf.081468",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_temp_s1",
                "type": "str"
            }
        ],
        "x": 1084,
        "y": 105,
        "wires": [
            [
                "78397971.cac8a8"
            ],
            []
        ]
    },
    {
        "id": "33724643.85cd6a",
        "type": "ui_switch",
        "z": "960078e.e3e6d88",
        "name": "Inomhusgivare S1",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "1b40f24f.7b6d9e",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "price/enable_temp",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 1525,
        "y": 140,
        "wires": [
            [
                "8dd4be0a.86e46"
            ]
        ]
    },
    {
        "id": "716b8844.bf4848",
        "type": "ui_switch",
        "z": "960078e.e3e6d88",
        "name": "Inomhusgivare S2",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "94305680.d32c48",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "price/enable_temp",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 594,
        "y": 1491,
        "wires": [
            [
                "aa3b6866.eabab8"
            ]
        ]
    },
    {
        "id": "6207d08.841933",
        "type": "subflow:c191a5d.5d76258",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "enable_temp_s2",
                "type": "str"
            }
        ],
        "x": 181,
        "y": 1470,
        "wires": [
            [
                "e1438a5e.e99d08"
            ],
            []
        ]
    },
    {
        "id": "8b9852c2.592fa",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "Enable/Disable",
        "func": "let enable = true;\nif(msg.config.system.pump==\"F370\" || msg.config.system.pump==\"F470\") {\n    enable = false;\n}\nmsg = {\n    enabled:enable\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 381,
        "y": 1442,
        "wires": [
            [
                "45c4e89b.42f168",
                "66fc03ec.ccb5ac",
                "21e9ac6.4191454",
                "194ef259.d819be"
            ]
        ]
    },
    {
        "id": "1530f51e.2bcddb",
        "type": "exec",
        "z": "b7f67da0.fbf1",
        "command": "cd /tmp && wget https://raw.githubusercontent.com/anerdins/nibepi-flow/master/update/update-bugfixes.sh && bash /tmp/update-bugfixes.sh && rm -R -f /tmp/update-bugfixes.sh",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1091,
        "y": 3395,
        "wires": [
            [
                "ce6c9aaf.cb21b8"
            ],
            [],
            []
        ]
    },
    {
        "id": "9b66b6cf.5a3668",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "NibePi Version",
        "env": [
            {
                "name": "Name",
                "value": "update",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "version",
                "type": "str"
            }
        ],
        "x": 1081,
        "y": 679,
        "wires": [
            [
                "8faacc60.30ba2"
            ],
            []
        ]
    },
    {
        "id": "8faacc60.30ba2",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "4a7ab836.172ae8",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "NibePi",
        "label": "",
        "format": "NibePi {{msg.payload}}",
        "layout": "row-left",
        "x": 1296,
        "y": 672,
        "wires": []
    },
    {
        "id": "16d56a4a.5b6d46",
        "type": "ui_template",
        "z": "b7f67da0.fbf1",
        "group": "fe94277c.dcd118",
        "name": "Avancerat 2",
        "order": 4,
        "width": 0,
        "height": 0,
        "format": "<p>\n    Välj vilken serieport NibePi ska kommunicera med värmepumpen på.<br>\n</p>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 966,
        "y": 70,
        "wires": [
            []
        ]
    },
    {
        "id": "e0c72072.da4e6",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "system",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "language",
                "type": "str"
            }
        ],
        "x": 1259,
        "y": 350,
        "wires": [
            [
                "2ba47fa0.3a966"
            ],
            []
        ]
    },
    {
        "id": "e3e6f96f.4410a8",
        "type": "ui_dropdown",
        "z": "b7f67da0.fbf1",
        "name": "Language",
        "label": "{{msg.label}}",
        "tooltip": "",
        "place": "Select option",
        "group": "da3c0db0.9c6aa",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "options": [
            {
                "label": "Svenska",
                "value": "SE",
                "type": "str"
            },
            {
                "label": "English",
                "value": "EN",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "language",
        "x": 1054,
        "y": 350,
        "wires": [
            [
                "e0c72072.da4e6"
            ]
        ]
    },
    {
        "id": "596b6fa.9e4849",
        "type": "trigger",
        "z": "b7f67da0.fbf1",
        "op1": "",
        "op2": "true",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "15",
        "extend": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 595,
        "y": 3073,
        "wires": [
            [
                "1601f8.7c0cee09"
            ]
        ]
    },
    {
        "id": "5145a4a9.eb82ac",
        "type": "trigger",
        "z": "b7f67da0.fbf1",
        "op1": "",
        "op2": "true",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "15",
        "extend": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 770,
        "y": 2870,
        "wires": [
            [
                "7e7da779.2a9ea8"
            ]
        ]
    },
    {
        "id": "ed4fa67e.2744f8",
        "type": "trigger",
        "z": "b7f67da0.fbf1",
        "op1": "",
        "op2": "true",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "15",
        "extend": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 560,
        "y": 3248,
        "wires": [
            [
                "7de64138.6b5d3"
            ]
        ]
    },
    {
        "id": "50a55b89.f1f2f4",
        "type": "trigger",
        "z": "b7f67da0.fbf1",
        "op1": "",
        "op2": "true",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "30",
        "extend": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 945,
        "y": 4158,
        "wires": [
            [
                "39529b5d.472af4"
            ]
        ]
    },
    {
        "id": "6c0b6981.c83b88",
        "type": "subflow:c191a5d.5d76258",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "info",
                "type": "str"
            },
            {
                "name": "Function",
                "value": "heatcurve_info",
                "type": "str"
            }
        ],
        "x": 419,
        "y": 882,
        "wires": [
            [
                "6e7ce78e.1a42c8"
            ],
            []
        ]
    },
    {
        "id": "dd0ea32d.95666",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "605e2041.0137e",
        "order": 2,
        "width": "12",
        "height": "2",
        "name": "Värmekurva S1",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 724,
        "y": 868,
        "wires": []
    },
    {
        "id": "136652e.48ad5ad",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "ea24545a.5d7038",
        "order": 2,
        "width": "12",
        "height": "2",
        "name": "Värmekurva S2",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 724,
        "y": 917,
        "wires": []
    },
    {
        "id": "cc633084.d7567",
        "type": "function",
        "z": "f947788.96a2488",
        "name": "",
        "func": "let config = msg.config;\n/*let enable = context.get('enable');\nif(enable===undefined) {\n    enable = true;\n}\nif(msg.enabled!==undefined) {\n    enable = msg.enabled;\n}\ncontext.set('enable',enable);\nmsg.enabled = enable;*/\n    let language = \"SE\";\n    if(config.system!==undefined && config.system.language!==undefined) {\n        language = config.system.language;\n    }\n    let name = env.get(\"Name\");\n    let translate = global.get('translate');\n    let info = name;\n    if(translate!==undefined && translate.dash!==undefined && translate.dash[name]!==undefined && translate.dash[name][language]!==undefined) {\n        info = translate.dash[name][language]\n    }\nmsg.label = info;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 435,
        "y": 84,
        "wires": [
            []
        ]
    },
    {
        "id": "70fe9173.84e56",
        "type": "nibe-request",
        "z": "f947788.96a2488",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 197,
        "y": 77,
        "wires": [
            [
                "cc633084.d7567"
            ],
            []
        ]
    },
    {
        "id": "30804028.6c24b",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "heatcurve_s1",
                "type": "str"
            }
        ],
        "x": 186,
        "y": 728,
        "wires": [
            [
                "d5d861a9.d7ae9"
            ]
        ]
    },
    {
        "id": "cf9e44f0.ed7da8",
        "type": "nibe-input",
        "z": "f947788.96a2488",
        "server": "844659a2.8d8508",
        "name": "Config",
        "add": false,
        "x": 106,
        "y": 154,
        "wires": [
            [
                "59edfea5.fe0e3"
            ],
            []
        ]
    },
    {
        "id": "59edfea5.fe0e3",
        "type": "change",
        "z": "f947788.96a2488",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "config",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 307,
        "y": 147,
        "wires": [
            [
                "cc633084.d7567"
            ]
        ]
    },
    {
        "id": "98de0442.e782d8",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "heatcurve_s2",
                "type": "str"
            }
        ],
        "x": 830,
        "y": 637,
        "wires": [
            [
                "350136be.28c46a"
            ]
        ]
    },
    {
        "id": "fcb52823.5a2a88",
        "type": "ui_slider",
        "z": "b7f67da0.fbf1",
        "name": "Kurvjustering S1",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "605e2041.0137e",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "outs": "end",
        "topic": "adjust_s1",
        "min": "-6",
        "max": "6",
        "step": "0.5",
        "x": 451,
        "y": 735,
        "wires": [
            [
                "d25aa0c5.71b29"
            ]
        ]
    },
    {
        "id": "26b9d2b.d18782e",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1240,
        "y": 805,
        "wires": []
    },
    {
        "id": "bd444c22.fd3fe",
        "type": "subflow:f947788.96a2488",
        "z": "eee76599.b5f0d8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "rmu_info",
                "type": "str"
            }
        ],
        "x": 147,
        "y": 91,
        "wires": [
            [
                "b27bdbc.af20328"
            ]
        ]
    },
    {
        "id": "b27bdbc.af20328",
        "type": "ui_text",
        "z": "eee76599.b5f0d8",
        "group": "6356450b.b9318c",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "RMU Info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 333,
        "y": 91,
        "wires": []
    },
    {
        "id": "a987e708.5634a8",
        "type": "subflow:f947788.96a2488",
        "z": "eee76599.b5f0d8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "rmu_s3",
                "type": "str"
            }
        ],
        "x": 739,
        "y": 154,
        "wires": [
            [
                "f680e178.2e0ef"
            ]
        ]
    },
    {
        "id": "71cddd89.5c64c4",
        "type": "subflow:f947788.96a2488",
        "z": "eee76599.b5f0d8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "rmu_s2",
                "type": "str"
            }
        ],
        "x": 739,
        "y": 105,
        "wires": [
            [
                "f83ba770.b754d8"
            ]
        ]
    },
    {
        "id": "12681ba5.6de514",
        "type": "subflow:f947788.96a2488",
        "z": "eee76599.b5f0d8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "rmu_s1",
                "type": "str"
            }
        ],
        "x": 739,
        "y": 56,
        "wires": [
            [
                "60e3b487.efea2c"
            ]
        ]
    },
    {
        "id": "56b0e966.9f8928",
        "type": "ui_template",
        "z": "eee76599.b5f0d8",
        "group": "605e2041.0137e",
        "name": "Change Group Name",
        "order": 3,
        "width": 0,
        "height": 0,
        "format": "<script>\n(function($scope) {\n$scope.oldGroupName = 'TEMP' // initial group placeholder name\n\n$scope.$watch('msg', function() {\n    if ($scope.msg){\n        $(\"p.nr-dashboard-cardtitle\").each(function(){\n            if($(this).text().trim() == $scope.oldGroupName.trim()){\n                p = $(this);\n                p.text($scope.msg.payload);\n                 $scope.oldGroupName = $scope.msg.payload\n            }\n        })\n    }\n });\n})(scope);\n</script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 744,
        "y": 665,
        "wires": [
            []
        ]
    },
    {
        "id": "a8b740ab.2232f",
        "type": "inject",
        "z": "eee76599.b5f0d8",
        "name": "",
        "topic": "Värmekurva S1",
        "payload": "Heatcurve S1",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 287,
        "y": 645,
        "wires": [
            [
                "56b0e966.9f8928"
            ]
        ]
    },
    {
        "id": "2f0e8fa4.09e9e",
        "type": "nibe-request",
        "z": "51e88f22.62d4a",
        "server": "844659a2.8d8508",
        "name": "40004",
        "x": 358,
        "y": 1120,
        "wires": [
            [
                "db3d9532.911528"
            ],
            [
                "7f469a56.aa4084"
            ]
        ]
    },
    {
        "id": "961d977d.5d8738",
        "type": "nibe-input",
        "z": "51e88f22.62d4a",
        "server": "844659a2.8d8508",
        "name": "40004",
        "add": false,
        "x": 148,
        "y": 840,
        "wires": [
            [
                "484d8eff.7a3e8"
            ],
            [
                "49559141.0908b"
            ]
        ]
    },
    {
        "id": "a1314430.a2cf38",
        "type": "nibe-output",
        "z": "51e88f22.62d4a",
        "server": "844659a2.8d8508",
        "name": "47260",
        "x": 393,
        "y": 1267,
        "wires": [
            [
                "9f60339c.5b275"
            ]
        ]
    },
    {
        "id": "484d8eff.7a3e8",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "Get only updated values in msg.payload",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 440,
        "y": 840,
        "wires": []
    },
    {
        "id": "49559141.0908b",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "Always updates when messages comes msg.payload",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 480,
        "y": 882,
        "wires": []
    },
    {
        "id": "b5e0c15.80c854",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "",
        "payload": "Original message",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 171,
        "y": 1120,
        "wires": [
            [
                "2f0e8fa4.09e9e"
            ]
        ]
    },
    {
        "id": "db3d9532.911528",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "msg.40004 is updated with the payload msg.40004_raw contains all json info",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 786,
        "y": 1120,
        "wires": []
    },
    {
        "id": "7f469a56.aa4084",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "msg.payload is updated with the request.",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 678,
        "y": 1155,
        "wires": []
    },
    {
        "id": "b186b23b.f23ca",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "Input node, first output only updates when the value is changed, the second output always updates, msg.raw contains the whole JSON with more information",
        "info": "",
        "x": 618,
        "y": 784,
        "wires": []
    },
    {
        "id": "d6bc12c6.cdc66",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "Request node, request a updated value from the heatpump, the first output will add the message to msg.40004 (example), the second output adds it to the msg.payload",
        "info": "",
        "x": 648,
        "y": 1064,
        "wires": []
    },
    {
        "id": "644968bc.2f9638",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 148,
        "y": 1267,
        "wires": [
            [
                "a1314430.a2cf38"
            ]
        ]
    },
    {
        "id": "9f60339c.5b275",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "Confirmation from the heatpump that the message has been ACKED and the new value is returned",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 872,
        "y": 1267,
        "wires": []
    },
    {
        "id": "ecf22247.d918f",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "Output node, sets the selected register to the value in msg.payload",
        "info": "",
        "x": 338,
        "y": 1211,
        "wires": []
    },
    {
        "id": "bbb21e7b.deeb5",
        "type": "nibe-input",
        "z": "51e88f22.62d4a",
        "server": "844659a2.8d8508",
        "name": "",
        "add": false,
        "x": 158,
        "y": 973,
        "wires": [
            [
                "d95f285e.f97cc8"
            ],
            [
                "6b25b40a.294a7c"
            ]
        ]
    },
    {
        "id": "ba25d0c0.5ac14",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "Unnamed node gets all the updates from every register that has been added or in the LOG.SET",
        "info": "",
        "x": 428,
        "y": 924,
        "wires": []
    },
    {
        "id": "d95f285e.f97cc8",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "Only updated values",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 422,
        "y": 966,
        "wires": []
    },
    {
        "id": "6b25b40a.294a7c",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "Every value, the same or not",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 442,
        "y": 1008,
        "wires": []
    },
    {
        "id": "ab590482.5973d8",
        "type": "nibe-output",
        "z": "51e88f22.62d4a",
        "server": "844659a2.8d8508",
        "name": "",
        "x": 413,
        "y": 1379,
        "wires": [
            [
                "ec421b0a.b24538"
            ]
        ]
    },
    {
        "id": "ec421b0a.b24538",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "Confirmation from the heatpump that the message has been ACKED and the new value is returned",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 886,
        "y": 1379,
        "wires": []
    },
    {
        "id": "8703a141.9b1d7",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "47260",
        "payload": "2",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 158,
        "y": 1379,
        "wires": [
            [
                "ab590482.5973d8"
            ]
        ]
    },
    {
        "id": "c593780e.fca208",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "No name in output node takes register from msg.topic, and the value from msg.payload",
        "info": "",
        "x": 398,
        "y": 1330,
        "wires": []
    },
    {
        "id": "2aff310e.3f473e",
        "type": "exec",
        "z": "51e88f22.62d4a",
        "command": "sudo mount -o remount,ro /",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Set READ-ONLY filesystem",
        "x": 421,
        "y": 1484,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "86c35404.f90ba8",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "Start",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 148,
        "y": 1484,
        "wires": [
            [
                "2aff310e.3f473e"
            ]
        ]
    },
    {
        "id": "d56ed3d5.cad59",
        "type": "exec",
        "z": "51e88f22.62d4a",
        "command": "sudo mount -o remount,rw /",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Set READ/WRITE filesystem",
        "x": 421,
        "y": 1547,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "a4ff0ae.7aa8cf8",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "Start",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 148,
        "y": 1547,
        "wires": [
            [
                "d56ed3d5.cad59"
            ]
        ]
    },
    {
        "id": "c48dd973.28e848",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "Double click a NibePi node and add a server, the MQTT broker is running in the background, if you want NibePi to publish values to it, enable it. Set serialport etc.",
        "info": "",
        "x": 621,
        "y": 1610,
        "wires": []
    },
    {
        "id": "f9372584.b0dd28",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "The MQTT Broker is running at 127.0.0.1:1883 with no auth.",
        "info": "",
        "x": 311,
        "y": 1652,
        "wires": []
    },
    {
        "id": "fc5f00c7.7286d",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "In the input node, you can easily add registers by checking the box, NibePi will request them regulary, the more registers added, the longer it will take for each message.",
        "info": "",
        "x": 641,
        "y": 1694,
        "wires": []
    },
    {
        "id": "418ce020.05b52",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "removeRegister",
        "payload": "47260",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 191,
        "y": 1806,
        "wires": [
            [
                "9e627456.20f808"
            ]
        ]
    },
    {
        "id": "df66d45.f437b28",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "addRegister",
        "payload": "47260",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 181,
        "y": 1848,
        "wires": [
            [
                "9e627456.20f808"
            ]
        ]
    },
    {
        "id": "9e627456.20f808",
        "type": "nibe-output",
        "z": "51e88f22.62d4a",
        "server": "844659a2.8d8508",
        "name": "",
        "x": 427,
        "y": 1827,
        "wires": [
            []
        ]
    },
    {
        "id": "ee8c77d1.15e4c8",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "Remove or add register with the output node, set the topic as in the example.",
        "info": "",
        "x": 361,
        "y": 1764,
        "wires": []
    },
    {
        "id": "d54bcc2c.58648",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "MQTT ALL",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 427,
        "y": 1953,
        "wires": []
    },
    {
        "id": "dc133679.8045f8",
        "type": "mqtt in",
        "z": "51e88f22.62d4a",
        "name": "MQTT IN : nibe/modbus/#",
        "topic": "nibe/modbus/#",
        "qos": "2",
        "datatype": "auto",
        "broker": "d7f6b34d.d13d6",
        "x": 201,
        "y": 1953,
        "wires": [
            [
                "d54bcc2c.58648"
            ]
        ]
    },
    {
        "id": "ed227deb.346f3",
        "type": "comment",
        "z": "51e88f22.62d4a",
        "name": "If MQTT is activated, messages will come here",
        "info": "",
        "x": 261,
        "y": 1904,
        "wires": []
    },
    {
        "id": "70dcd804.035618",
        "type": "mqtt out",
        "z": "51e88f22.62d4a",
        "name": "MQTT Out",
        "topic": "",
        "qos": "",
        "retain": "false",
        "broker": "d7f6b34d.d13d6",
        "x": 497,
        "y": 2198,
        "wires": []
    },
    {
        "id": "467893ef.aefb9c",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "nibe/modbus/47260/set",
        "payload": "2",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 201,
        "y": 2156,
        "wires": [
            [
                "70dcd804.035618"
            ]
        ]
    },
    {
        "id": "82186993.da9498",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "nibe/modbus/47260/set",
        "payload": "0",
        "payloadType": "num",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 201,
        "y": 2205,
        "wires": [
            [
                "70dcd804.035618"
            ]
        ]
    },
    {
        "id": "cfc5f2b7.6527b",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "nibe/modbus/47260/get",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 211,
        "y": 2254,
        "wires": [
            [
                "70dcd804.035618"
            ]
        ]
    },
    {
        "id": "be5a0d36.2427d",
        "type": "mqtt in",
        "z": "51e88f22.62d4a",
        "name": "MQTT IN : nibe/modbus/47260",
        "topic": "nibe/modbus/47260",
        "qos": "2",
        "datatype": "auto",
        "broker": "d7f6b34d.d13d6",
        "x": 221,
        "y": 2002,
        "wires": [
            [
                "8e9f1452.09deb8"
            ]
        ]
    },
    {
        "id": "bcc00ca8.70603",
        "type": "mqtt in",
        "z": "51e88f22.62d4a",
        "name": "MQTT IN : nibe/modbus/47260/raw",
        "topic": "nibe/modbus/47260/raw",
        "qos": "2",
        "datatype": "auto",
        "broker": "d7f6b34d.d13d6",
        "x": 231,
        "y": 2051,
        "wires": [
            [
                "e7931296.9676c"
            ]
        ]
    },
    {
        "id": "91f36ebd.7798e",
        "type": "mqtt in",
        "z": "51e88f22.62d4a",
        "name": "MQTT IN : nibe/modbus/47260/json",
        "topic": "nibe/modbus/47260/json",
        "qos": "2",
        "datatype": "auto",
        "broker": "d7f6b34d.d13d6",
        "x": 231,
        "y": 2100,
        "wires": [
            [
                "52f50f37.ba948"
            ]
        ]
    },
    {
        "id": "8e9f1452.09deb8",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "MQTT",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 442,
        "y": 2002,
        "wires": []
    },
    {
        "id": "e7931296.9676c",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "MQTT RAW",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 469,
        "y": 2051,
        "wires": []
    },
    {
        "id": "52f50f37.ba948",
        "type": "debug",
        "z": "51e88f22.62d4a",
        "name": "MQTT JSON",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 469,
        "y": 2100,
        "wires": []
    },
    {
        "id": "a04748d8.b32e28",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "nibe/modbus/47260/add",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 211,
        "y": 2303,
        "wires": [
            [
                "70dcd804.035618"
            ]
        ]
    },
    {
        "id": "f69f128a.a2528",
        "type": "inject",
        "z": "51e88f22.62d4a",
        "name": "",
        "topic": "nibe/modbus/47260/remove",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 221,
        "y": 2352,
        "wires": [
            [
                "70dcd804.035618"
            ]
        ]
    },
    {
        "id": "1e6943f1.f75bec",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "samba_stop",
                "type": "str"
            }
        ],
        "x": 151,
        "y": 2772,
        "wires": [
            [
                "c6b8ea30.00e938"
            ]
        ]
    },
    {
        "id": "65674d94.1354e4",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "samba_start",
                "type": "str"
            }
        ],
        "x": 221,
        "y": 2632,
        "wires": [
            [
                "9a16797e.af4448"
            ]
        ]
    },
    {
        "id": "3d89a58f.ea605a",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "nodered_restart",
                "type": "str"
            }
        ],
        "x": 88,
        "y": 2884,
        "wires": [
            [
                "fa2d2ae9.938078"
            ]
        ]
    },
    {
        "id": "38ade80e.04db18",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hw_restart",
                "type": "str"
            }
        ],
        "x": 151,
        "y": 3052,
        "wires": [
            [
                "85d5ca03.843578"
            ]
        ]
    },
    {
        "id": "d5adea24.6df6b8",
        "type": "ui_toast",
        "z": "b7f67da0.fbf1",
        "position": "bottom right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 1252,
        "y": 3122,
        "wires": []
    },
    {
        "id": "4fb17cc3.f28a34",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hw_shutdown",
                "type": "str"
            }
        ],
        "x": 95,
        "y": 3220,
        "wires": [
            [
                "b8e45a29.097168"
            ]
        ]
    },
    {
        "id": "51494516.03561c",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "mqtt_info",
                "type": "str"
            }
        ],
        "x": 690,
        "y": 371,
        "wires": [
            [
                "e0b66ecc.6577a"
            ]
        ]
    },
    {
        "id": "e0b66ecc.6577a",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "723a0250.fd7dcc",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "MQTT Info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 875,
        "y": 371,
        "wires": []
    },
    {
        "id": "4539d839.453aa8",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_info",
                "type": "str"
            }
        ],
        "x": 858,
        "y": 3458,
        "wires": [
            [
                "ebf3254f.bc6958"
            ]
        ]
    },
    {
        "id": "ebf3254f.bc6958",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "d814a7db.5cdc38",
        "order": 1,
        "width": "12",
        "height": "5",
        "name": "Uppdatering info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1060,
        "y": 3465,
        "wires": []
    },
    {
        "id": "3b047681.8aa9da",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_check",
                "type": "str"
            }
        ],
        "x": 67,
        "y": 3717,
        "wires": [
            [
                "35a698b.0a7a168"
            ]
        ]
    },
    {
        "id": "d1f0c353.34836",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 123,
        "y": 3976,
        "wires": [
            [
                "12696e02.7efa42"
            ]
        ]
    },
    {
        "id": "93cda2e0.58153",
        "type": "function",
        "z": "dd8aa486.3012f8",
        "name": "",
        "func": "let config = msg.config;\n    let language = \"SE\";\n    if(config.system!==undefined && config.system.language!==undefined) {\n        language = config.system.language;\n    }\n    let name = env.get(\"Name\");\n    let translate = global.get('translate');\n    let info = name;\n    if(translate!==undefined && translate.dash!==undefined && translate.dash[name]!==undefined && translate.dash[name][language]!==undefined) {\n        info = translate.dash[name][language]\n    }\nmsg.payload = info;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 414,
        "y": 77,
        "wires": [
            []
        ]
    },
    {
        "id": "c75ca11e.e1f13",
        "type": "nibe-request",
        "z": "dd8aa486.3012f8",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 197,
        "y": 77,
        "wires": [
            [
                "93cda2e0.58153"
            ],
            []
        ]
    },
    {
        "id": "ec83f4d1.c6a8a8",
        "type": "subflow:dd8aa486.3012f8",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hw_shutdown_info",
                "type": "str"
            }
        ],
        "x": 883,
        "y": 3150,
        "wires": [
            [
                "d5adea24.6df6b8"
            ]
        ]
    },
    {
        "id": "51fe480a.503c68",
        "type": "subflow:dd8aa486.3012f8",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hw_restart_info",
                "type": "str"
            }
        ],
        "x": 820,
        "y": 3017,
        "wires": [
            [
                "d5adea24.6df6b8"
            ]
        ]
    },
    {
        "id": "f31de8d3.f09318",
        "type": "subflow:dd8aa486.3012f8",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "nodered_restart_info",
                "type": "str"
            }
        ],
        "x": 491,
        "y": 2835,
        "wires": [
            [
                "9a132183.4d71"
            ]
        ]
    },
    {
        "id": "ee94cc08.32657",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "fb207b28.da59b8",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Extra givare",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 357,
        "y": 1953,
        "wires": []
    },
    {
        "id": "80b20370.bd903",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "extra_sensor_info",
                "type": "str"
            }
        ],
        "x": 168,
        "y": 1953,
        "wires": [
            [
                "ee94cc08.32657"
            ]
        ]
    },
    {
        "id": "94afbd2e.ccc35",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "extra_sensor_remove",
                "type": "str"
            }
        ],
        "x": 886,
        "y": 1946,
        "wires": [
            [
                "44bb3c4e.931764"
            ]
        ]
    },
    {
        "id": "6406b33a.110e7c",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "sensor_timeout",
                "type": "str"
            }
        ],
        "x": 165,
        "y": 1715,
        "wires": [
            [
                "2953aaac.686c76"
            ]
        ]
    },
    {
        "id": "2953aaac.686c76",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "fb207b28.da59b8",
        "order": 5,
        "width": "12",
        "height": "2",
        "name": "Timeout tid för MQTT givare",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 407,
        "y": 1715,
        "wires": []
    },
    {
        "id": "44bb3c4e.931764",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "fb207b28.da59b8",
        "order": 3,
        "width": "12",
        "height": "1",
        "name": "Ta bort sensor",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1186,
        "y": 1785,
        "wires": []
    },
    {
        "id": "6dc5ee8e.c7dff",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 382,
        "y": 4081,
        "wires": [
            [
                "12696e02.7efa42"
            ]
        ]
    },
    {
        "id": "a0a5fd31.68a1b",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "97526682.5406d8",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Loggning info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 542,
        "y": 2163,
        "wires": []
    },
    {
        "id": "d7cf1d1e.ef1df",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "loging_info",
                "type": "str"
            }
        ],
        "x": 340,
        "y": 2163,
        "wires": [
            [
                "a0a5fd31.68a1b"
            ]
        ]
    },
    {
        "id": "8c7b6645.bdb318",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "forecast_s1_info",
                "type": "str"
            }
        ],
        "x": 578,
        "y": 182,
        "wires": [
            [
                "e763eeff.586bd"
            ]
        ]
    },
    {
        "id": "e763eeff.586bd",
        "type": "ui_text",
        "z": "df0dd648.98daa8",
        "group": "7e910a08.c6c984",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Forecast S1 info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 766,
        "y": 182,
        "wires": []
    },
    {
        "id": "62320b85.ea46c4",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "forecast_s2_info",
                "type": "str"
            }
        ],
        "x": 830,
        "y": 455,
        "wires": [
            [
                "2a3a0126.36ddce"
            ]
        ]
    },
    {
        "id": "2a3a0126.36ddce",
        "type": "ui_text",
        "z": "df0dd648.98daa8",
        "group": "197ce413.27432c",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Forecast S2 info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1018,
        "y": 455,
        "wires": []
    },
    {
        "id": "d82520c2.25525",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 319,
        "y": 322,
        "wires": [
            [
                "4f685464.ce3e7c"
            ]
        ]
    },
    {
        "id": "6752641d.4b376c",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 95,
        "y": 245,
        "wires": [
            [
                "d9788d5a.89152"
            ]
        ]
    },
    {
        "id": "cd05c8b3.7acbe8",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "forecast_update_info",
                "type": "str"
            }
        ],
        "x": 1068,
        "y": 238,
        "wires": [
            [
                "4d5bf522.b62ddc"
            ]
        ]
    },
    {
        "id": "4d5bf522.b62ddc",
        "type": "ui_text",
        "z": "df0dd648.98daa8",
        "group": "7e910a08.c6c984",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "Update info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1246,
        "y": 238,
        "wires": []
    },
    {
        "id": "c56c7c7c.30f64",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "forecast_update_info",
                "type": "str"
            }
        ],
        "x": 991,
        "y": 511,
        "wires": [
            [
                "d539d647.df7c18"
            ]
        ]
    },
    {
        "id": "d539d647.df7c18",
        "type": "ui_text",
        "z": "df0dd648.98daa8",
        "group": "197ce413.27432c",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "Update info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1169,
        "y": 511,
        "wires": []
    },
    {
        "id": "2101f443.d5731c",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "forecast_time",
                "type": "str"
            }
        ],
        "x": 256,
        "y": 217,
        "wires": [
            [
                "27f7876f.904e08"
            ]
        ]
    },
    {
        "id": "cd8e0c19.c8c85",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "forecast_time",
                "type": "str"
            }
        ],
        "x": 284,
        "y": 420,
        "wires": [
            [
                "6321d043.e7772"
            ]
        ]
    },
    {
        "id": "c23343b.fab5cc",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 228,
        "y": 511,
        "wires": [
            [
                "191d7af8.9d5725"
            ]
        ]
    },
    {
        "id": "bc5ca6e8.482d18",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 319,
        "y": 560,
        "wires": [
            [
                "e7144dfe.63ec7"
            ]
        ]
    },
    {
        "id": "92ee11e7.8cf8f",
        "type": "ui_text",
        "z": "df0dd648.98daa8",
        "group": "455ba55e.e91e8c",
        "order": 4,
        "width": "12",
        "height": "1",
        "name": "Vindriktning info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1248,
        "y": 392,
        "wires": []
    },
    {
        "id": "dc9e69ac.9383b8",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "wind_direction_info",
                "type": "str"
            }
        ],
        "x": 1061,
        "y": 392,
        "wires": [
            [
                "92ee11e7.8cf8f"
            ]
        ]
    },
    {
        "id": "430863d3.1bcaac",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "forecast_sensor_s1",
                "type": "str"
            }
        ],
        "x": 599,
        "y": 371,
        "wires": [
            [
                "112e4ce5.d4a8c3"
            ]
        ]
    },
    {
        "id": "1dfc6a63.49bfc6",
        "type": "ui_text",
        "z": "df0dd648.98daa8",
        "group": "33ed6fb8.2f3ce",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Inställningar",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 504,
        "y": 924,
        "wires": []
    },
    {
        "id": "a93d8d39.b5725",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "forecast_correction",
                "type": "str"
            }
        ],
        "x": 326,
        "y": 924,
        "wires": [
            [
                "1dfc6a63.49bfc6"
            ]
        ]
    },
    {
        "id": "278e7ad5.dc9606",
        "type": "ui_text",
        "z": "df0dd648.98daa8",
        "group": "d342c0ba.f2418",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Solfaktor info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 777,
        "y": 665,
        "wires": []
    },
    {
        "id": "2f268d88.be8b92",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "sunfactor_info",
                "type": "str"
            }
        ],
        "x": 620,
        "y": 665,
        "wires": [
            [
                "278e7ad5.dc9606"
            ]
        ]
    },
    {
        "id": "6ac488bb.6114d8",
        "type": "ui_text",
        "z": "df0dd648.98daa8",
        "group": "455ba55e.e91e8c",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Vindfaktor info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1116,
        "y": 672,
        "wires": []
    },
    {
        "id": "84d5944a.0d60b8",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "windfactor_info",
                "type": "str"
            }
        ],
        "x": 949,
        "y": 672,
        "wires": [
            [
                "6ac488bb.6114d8"
            ]
        ]
    },
    {
        "id": "ef12f1e2.57a45",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 151,
        "y": 861,
        "wires": [
            [
                "6e9d06f1.c9ebc8"
            ]
        ]
    },
    {
        "id": "5688e3a3.e0f76c",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 137,
        "y": 770,
        "wires": [
            [
                "2aa7811b.637b2e"
            ]
        ]
    },
    {
        "id": "dafc111.c0d85f",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "clear",
                "type": "str"
            }
        ],
        "x": 137,
        "y": 581,
        "wires": [
            [
                "257d3e61.f15db2"
            ]
        ]
    },
    {
        "id": "2f9e6dfa.632c72",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "mostly_clear",
                "type": "str"
            }
        ],
        "x": 844,
        "y": 973,
        "wires": [
            [
                "a1d2b301.cca65"
            ]
        ]
    },
    {
        "id": "5068e548.54541c",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "half_clear",
                "type": "str"
            }
        ],
        "x": 837,
        "y": 1022,
        "wires": [
            [
                "3aa1cf7c.e15ef"
            ]
        ]
    },
    {
        "id": "b60d4de3.23883",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "wind_factor_n",
                "type": "str"
            }
        ],
        "x": 837,
        "y": 742,
        "wires": [
            [
                "3e9a73d2.df1c3c"
            ]
        ]
    },
    {
        "id": "e735aa57.d29b58",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "wind_factor_s",
                "type": "str"
            }
        ],
        "x": 858,
        "y": 791,
        "wires": [
            [
                "e0568cfa.ce37d"
            ]
        ]
    },
    {
        "id": "55c116af.5af4a8",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "wind_factor_w",
                "type": "str"
            }
        ],
        "x": 872,
        "y": 826,
        "wires": [
            [
                "c0ca403c.4cd65"
            ]
        ]
    },
    {
        "id": "e2f4d0a0.1d759",
        "type": "subflow:f947788.96a2488",
        "z": "df0dd648.98daa8",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "wind_factor_e",
                "type": "str"
            }
        ],
        "x": 858,
        "y": 868,
        "wires": [
            [
                "de90adfc.3a51d"
            ]
        ]
    },
    {
        "id": "80af28ee.578c98",
        "type": "inject",
        "z": "df0dd648.98daa8",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 634,
        "y": 1085,
        "wires": [
            [
                "68112050.f83b7"
            ]
        ]
    },
    {
        "id": "68112050.f83b7",
        "type": "function",
        "z": "df0dd648.98daa8",
        "name": "Enable manually",
        "func": "msg = {\n    enabled:msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 818,
        "y": 1106,
        "wires": [
            [
                "c6b38433.c27d98"
            ]
        ]
    },
    {
        "id": "3ea8a04b.7965a",
        "type": "inject",
        "z": "df0dd648.98daa8",
        "name": "",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 631,
        "y": 1127,
        "wires": [
            [
                "68112050.f83b7"
            ]
        ]
    },
    {
        "id": "d2d70cdd.4f209",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "a2cfe148.70708",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Inomhusreglering Info S1",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 656,
        "y": 35,
        "wires": []
    },
    {
        "id": "33b066e4.67df9a",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "6ee1e12a.a6f04",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Inomhusreglering Info S2",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 656,
        "y": 77,
        "wires": []
    },
    {
        "id": "e8e8dbd1.d2cfa8",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_info_s1",
                "type": "str"
            }
        ],
        "x": 431,
        "y": 35,
        "wires": [
            [
                "d2d70cdd.4f209"
            ]
        ]
    },
    {
        "id": "880a8a15.a3fa68",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_set",
                "type": "str"
            }
        ],
        "x": 648,
        "y": 252,
        "wires": [
            [
                "a8deecfc.3d34b"
            ]
        ]
    },
    {
        "id": "daceaf3b.a0641",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_info_s2",
                "type": "str"
            }
        ],
        "x": 431,
        "y": 77,
        "wires": [
            [
                "33b066e4.67df9a"
            ]
        ]
    },
    {
        "id": "c23e2c09.d88a6",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_temp",
                "type": "str"
            }
        ],
        "x": 1005,
        "y": 217,
        "wires": [
            [
                "5e1062d0.a33cbc"
            ]
        ]
    },
    {
        "id": "3a656a22.a89f06",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_curveadjust",
                "type": "str"
            }
        ],
        "x": 1033,
        "y": 259,
        "wires": [
            [
                "c475b1a1.ae577"
            ]
        ]
    },
    {
        "id": "59eddd7.b42cd24",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_diff",
                "type": "str"
            }
        ],
        "x": 1229,
        "y": 350,
        "wires": [
            [
                "5725972f.b219a8"
            ]
        ]
    },
    {
        "id": "947f9547.f50a58",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_factor",
                "type": "str"
            }
        ],
        "x": 655,
        "y": 371,
        "wires": [
            [
                "8a3192fa.29d1d"
            ]
        ]
    },
    {
        "id": "1de35891.f49887",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 522,
        "y": 448,
        "wires": [
            [
                "d68a22ce.9289d"
            ]
        ]
    },
    {
        "id": "92856418.de77b8",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "a2cfe148.70708",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "Inomhusgivar info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 341,
        "y": 490,
        "wires": []
    },
    {
        "id": "c2f6cea2.a8ed",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_settings_outside",
                "type": "str"
            }
        ],
        "x": 655,
        "y": 707,
        "wires": [
            [
                "5e3504d0.fd3ffc"
            ]
        ]
    },
    {
        "id": "57c7d6e4.195388",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_data_dm",
                "type": "str"
            }
        ],
        "x": 1075,
        "y": 805,
        "wires": [
            [
                "5f8c6837.106e18"
            ]
        ]
    },
    {
        "id": "d5bece54.57aa",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_outside",
                "type": "str"
            }
        ],
        "x": 1054,
        "y": 854,
        "wires": [
            [
                "61436d60.0601e4"
            ]
        ]
    },
    {
        "id": "9a67d60e.ba8808",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "last_updated",
                "type": "str"
            }
        ],
        "x": 1110,
        "y": 917,
        "wires": [
            [
                "8ebe60ad.11b1d"
            ]
        ]
    },
    {
        "id": "1aaae1d0.7eb71e",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "70965431.b26cbc",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Data info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 878,
        "y": 658,
        "wires": []
    },
    {
        "id": "6e4a85ae.91b67c",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_data_info",
                "type": "str"
            }
        ],
        "x": 718,
        "y": 658,
        "wires": [
            [
                "1aaae1d0.7eb71e"
            ]
        ]
    },
    {
        "id": "19537259.7f7f8e",
        "type": "ui_text",
        "z": "358baec9.c8b902",
        "group": "95b0af9c.89089",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Inställningar info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 899,
        "y": 616,
        "wires": []
    },
    {
        "id": "3125fbcd.2d9744",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_settings_info",
                "type": "str"
            }
        ],
        "x": 719,
        "y": 616,
        "wires": [
            [
                "19537259.7f7f8e"
            ]
        ]
    },
    {
        "id": "45c4e89b.42f168",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "dm_reset_enable",
                "type": "str"
            }
        ],
        "x": 116,
        "y": 1512,
        "wires": [
            [
                "c0a999e9.8d63b8"
            ]
        ]
    },
    {
        "id": "66fc03ec.ccb5ac",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "dm_reset_enable_stop",
                "type": "str"
            }
        ],
        "x": 116,
        "y": 1561,
        "wires": [
            [
                "e0751200.e40b5"
            ]
        ]
    },
    {
        "id": "21e9ac6.4191454",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "diff",
                "type": "str"
            }
        ],
        "x": 410,
        "y": 1785,
        "wires": [
            [
                "46fd6a28.346e94"
            ]
        ]
    },
    {
        "id": "194ef259.d819be",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "diff",
                "type": "str"
            }
        ],
        "x": 410,
        "y": 1736,
        "wires": [
            [
                "a56e3e6c.baf92"
            ]
        ]
    },
    {
        "id": "df0eb906.ea4ea8",
        "type": "inject",
        "z": "358baec9.c8b902",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1198,
        "y": 1512,
        "wires": [
            [
                "640796f9.8453b8"
            ]
        ]
    },
    {
        "id": "640796f9.8453b8",
        "type": "function",
        "z": "358baec9.c8b902",
        "name": "Enable manually",
        "func": "msg = {\n    enabled:msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1382,
        "y": 1533,
        "wires": [
            [
                "76dc2468.d143ec"
            ]
        ]
    },
    {
        "id": "19bf9b46.5412a5",
        "type": "inject",
        "z": "358baec9.c8b902",
        "name": "",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1195,
        "y": 1554,
        "wires": [
            [
                "640796f9.8453b8"
            ]
        ]
    },
    {
        "id": "721aa32b.de616c",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_set",
                "type": "str"
            }
        ],
        "x": 809,
        "y": 1078,
        "wires": [
            [
                "d136e0d4.36424"
            ]
        ]
    },
    {
        "id": "b6daec46.8822a",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_temp",
                "type": "str"
            }
        ],
        "x": 1159,
        "y": 1050,
        "wires": [
            [
                "2f4cb05b.407d1"
            ]
        ]
    },
    {
        "id": "2923a70.4a9a75a",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_curveadjust",
                "type": "str"
            }
        ],
        "x": 1201,
        "y": 1092,
        "wires": [
            [
                "ced9439e.afef"
            ]
        ]
    },
    {
        "id": "5c86ba4a.ba2dc4",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_diff",
                "type": "str"
            }
        ],
        "x": 1313,
        "y": 1134,
        "wires": [
            [
                "8cf9b82c.df7338"
            ]
        ]
    },
    {
        "id": "4c09e022.c61bf",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_factor",
                "type": "str"
            }
        ],
        "x": 711,
        "y": 1232,
        "wires": [
            [
                "d5bb2eff.594fe"
            ]
        ]
    },
    {
        "id": "fed1a642.dfbb18",
        "type": "subflow:f947788.96a2488",
        "z": "358baec9.c8b902",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 571,
        "y": 1274,
        "wires": [
            [
                "98a2ba00.9574c8"
            ]
        ]
    },
    {
        "id": "9afd1d9d.fc55b",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 844,
        "y": 140,
        "wires": [
            [
                "a76c0feb.f55a6"
            ]
        ]
    },
    {
        "id": "120e18c1.6bce77",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan_low_info",
                "type": "str"
            }
        ],
        "x": 1152,
        "y": 224,
        "wires": [
            [
                "19d59f35.ad8c81"
            ]
        ]
    },
    {
        "id": "ff775621.5daa28",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan_co2_force_info",
                "type": "str"
            }
        ],
        "x": 1145,
        "y": 280,
        "wires": [
            [
                "77fb0198.0185f"
            ]
        ]
    },
    {
        "id": "f7ffcb08.7c4128",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan_filter_info",
                "type": "str"
            }
        ],
        "x": 1152,
        "y": 350,
        "wires": [
            [
                "c7e4714f.38ce"
            ]
        ]
    },
    {
        "id": "31898f8e.9c3d",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan_degree_info",
                "type": "str"
            }
        ],
        "x": 1166,
        "y": 406,
        "wires": [
            [
                "81922b16.db9638"
            ]
        ]
    },
    {
        "id": "24ba7f9c.ccab9",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan_efficiency",
                "type": "str"
            }
        ],
        "x": 585,
        "y": 952,
        "wires": [
            [
                "d823fe7b.5a50b"
            ]
        ]
    },
    {
        "id": "4fb8f950.939998",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 480,
        "y": 266,
        "wires": [
            [
                "9a373f08.e2c5a"
            ]
        ]
    },
    {
        "id": "685f2dfd.acbc94",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "co2_limit",
                "type": "str"
            }
        ],
        "x": 473,
        "y": 315,
        "wires": [
            [
                "f648d408.d5b588"
            ]
        ]
    },
    {
        "id": "62e91b06.2bd804",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "airflow",
                "type": "str"
            }
        ],
        "x": 480,
        "y": 364,
        "wires": [
            [
                "58301c4f.167164"
            ]
        ]
    },
    {
        "id": "4d633d1.7e155c4",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "low_cpr_freq",
                "type": "str"
            }
        ],
        "x": 480,
        "y": 413,
        "wires": [
            [
                "e5a59b16.947138"
            ]
        ]
    },
    {
        "id": "b7396421.f16d78",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable_co2",
                "type": "str"
            }
        ],
        "x": 466,
        "y": 462,
        "wires": [
            [
                "74d64c2d.aaa2a4"
            ]
        ]
    },
    {
        "id": "7a08d76a.38e858",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "airflow",
                "type": "str"
            }
        ],
        "x": 472,
        "y": 511,
        "wires": [
            [
                "725c9eb8.7b68f"
            ]
        ]
    },
    {
        "id": "69cb86c.33ef078",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 424,
        "y": 616,
        "wires": [
            [
                "d1a7d601.f79028"
            ]
        ]
    },
    {
        "id": "f86faed6.52fd8",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "airflow",
                "type": "str"
            }
        ],
        "x": 424,
        "y": 665,
        "wires": [
            [
                "30a5c5df.10574a"
            ]
        ]
    },
    {
        "id": "c4f73ece.224b5",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 445,
        "y": 742,
        "wires": [
            [
                "a843b767.1617d8"
            ]
        ]
    },
    {
        "id": "62c930be.810ba",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "co2_limit",
                "type": "str"
            }
        ],
        "x": 865,
        "y": 49,
        "wires": [
            [
                "b62f2b0b.3d3248"
            ]
        ]
    },
    {
        "id": "2d8f11d6.fe82de",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan_last_cal",
                "type": "str"
            }
        ],
        "x": 640,
        "y": 896,
        "wires": [
            [
                "dfda48a5.0eeb08"
            ]
        ]
    },
    {
        "id": "cb29fcde.4a3bd",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "filter_value",
                "type": "str"
            }
        ],
        "x": 1047,
        "y": 854,
        "wires": [
            [
                "79edcd08.1549e4"
            ]
        ]
    },
    {
        "id": "8e5ae09.f256e2",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 641,
        "y": 1267,
        "wires": [
            [
                "d71ebd3b.ad766"
            ]
        ]
    },
    {
        "id": "2a8bb9ee.8258e6",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "airflow",
                "type": "str"
            }
        ],
        "x": 641,
        "y": 1316,
        "wires": [
            [
                "be8822b2.3c387"
            ]
        ]
    },
    {
        "id": "525fec8e.3c2964",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "Enable/Disable Degree minute boost",
        "func": "let source = msg.payload.fan.enable_dm_boost;\nlet fan = msg.payload.fan.enable;\n\nif(fan===true && source===true) {\n    msg = {\n    enabled:true\n};\nreturn msg;\n} else if(fan===false || source===false) {\n    msg = {\n    enabled:false\n};\n\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1109,
        "y": 952,
        "wires": [
            [
                "2a8bb9ee.8258e6"
            ]
        ]
    },
    {
        "id": "9e8f4c75.ef72d",
        "type": "function",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "func": "let config = msg.payload;\nif(config.home.size!==undefined && config.home.size!==0 && config.home.size!==\"\") {\n    msg.payload = `${(config.home.size*0.35*3.6).toFixed(0)} m3/h`\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 323,
        "y": 1169,
        "wires": [
            [
                "5fd406d7.a70ab8"
            ]
        ]
    },
    {
        "id": "1af16f68.ef6a81",
        "type": "ui_text",
        "z": "ae9d7ce8.0991c",
        "group": "ad7a33f3.24adf",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "House size flow calculation info",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 648,
        "y": 1540,
        "wires": []
    },
    {
        "id": "5fd406d7.a70ab8",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan_size",
                "type": "str"
            }
        ],
        "x": 375,
        "y": 1540,
        "wires": [
            [
                "1af16f68.ef6a81"
            ]
        ]
    },
    {
        "id": "b39007ed.b70998",
        "type": "ui_text",
        "z": "ae9d7ce8.0991c",
        "group": "ad7a33f3.24adf",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Information",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "x": 588,
        "y": 1498,
        "wires": []
    },
    {
        "id": "46ccd955.ca8fe8",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "fan_info",
                "type": "str"
            }
        ],
        "x": 375,
        "y": 1498,
        "wires": [
            [
                "b39007ed.b70998"
            ]
        ]
    },
    {
        "id": "ab9d117f.fd793",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "605e2041.0137e",
        "order": 1,
        "width": "12",
        "height": "1",
        "name": "Värmekurva S1 Label",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 744,
        "y": 987,
        "wires": []
    },
    {
        "id": "58229c72.234044",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "ea24545a.5d7038",
        "order": 1,
        "width": "12",
        "height": "1",
        "name": "Värmekurva S2 Label",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 744,
        "y": 1029,
        "wires": []
    },
    {
        "id": "4224fda2.c623a4",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "heatcurve_s2",
                "type": "str"
            }
        ],
        "x": 522,
        "y": 1029,
        "wires": [
            [
                "58229c72.234044"
            ]
        ]
    },
    {
        "id": "a3d08a6d.b94458",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "heatcurve_s1",
                "type": "str"
            }
        ],
        "x": 522,
        "y": 987,
        "wires": [
            [
                "ab9d117f.fd793"
            ]
        ]
    },
    {
        "id": "2ff3d6e8.48ee3a",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "topic",
                "type": "str"
            }
        ],
        "x": 137,
        "y": 322,
        "wires": [
            [
                "3f2df90a.87e2f6",
                "71cc10e5.6e02a"
            ]
        ]
    },
    {
        "id": "e15ebfa.d82e94",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "host",
                "type": "str"
            }
        ],
        "x": 144,
        "y": 378,
        "wires": [
            [
                "5eaea9fd.2ab8b8"
            ]
        ]
    },
    {
        "id": "a923c708.719db8",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "port",
                "type": "str"
            }
        ],
        "x": 144,
        "y": 420,
        "wires": [
            [
                "3eed3ea7.c66072"
            ]
        ]
    },
    {
        "id": "25889506.584bea",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "user",
                "type": "str"
            }
        ],
        "x": 144,
        "y": 462,
        "wires": [
            [
                "7cc82e4d.8f653"
            ]
        ]
    },
    {
        "id": "8626d815.9571a8",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "pass",
                "type": "str"
            }
        ],
        "x": 144,
        "y": 504,
        "wires": [
            [
                "6fe84622.e973e8"
            ]
        ]
    },
    {
        "id": "4d561a36.50fd34",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "save_graph",
                "type": "str"
            }
        ],
        "x": 144,
        "y": 2107,
        "wires": [
            [
                "b0e24ccb.86c35"
            ]
        ]
    },
    {
        "id": "71cc10e5.6e02a",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "Data",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 491,
        "y": 182,
        "wires": []
    },
    {
        "id": "ae2fe9c8.8c98d8",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "Data 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 750,
        "y": 168,
        "wires": []
    },
    {
        "id": "6bc64440.7be37c",
        "type": "debug",
        "z": "b7f67da0.fbf1",
        "name": "Data 0",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 617,
        "y": 147,
        "wires": []
    },
    {
        "id": "a4e6e6a8.b26e98",
        "type": "function",
        "z": "b7f67da0.fbf1",
        "name": "Enable/Disable",
        "func": "if(msg.topic==\"Start\") {\n    if(msg.payload===true) {\n        node.send({enabled:false});\n    } else {\n        node.send({enabled:true});\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 808,
        "y": 2177,
        "wires": [
            []
        ]
    },
    {
        "id": "7c2f5c37.52f8d4",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log_enable",
                "type": "str"
            }
        ],
        "x": 234,
        "y": 2226,
        "wires": [
            [
                "22798341.63387c"
            ]
        ]
    },
    {
        "id": "c5443635.dd1e68",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log_info",
                "type": "str"
            }
        ],
        "x": 234,
        "y": 2275,
        "wires": [
            [
                "df3307ec.65d498"
            ]
        ]
    },
    {
        "id": "23cf2be0.ec9df4",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log_error",
                "type": "str"
            }
        ],
        "x": 220,
        "y": 2324,
        "wires": [
            [
                "c548dfa7.e7696"
            ]
        ]
    },
    {
        "id": "fc61aa11.3533c8",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log_debug",
                "type": "str"
            }
        ],
        "x": 220,
        "y": 2373,
        "wires": [
            [
                "4b9a995c.0f11b8"
            ]
        ]
    },
    {
        "id": "4d212125.d27d5",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log_core",
                "type": "str"
            }
        ],
        "x": 220,
        "y": 2422,
        "wires": [
            [
                "3b259789.2e49a8"
            ]
        ]
    },
    {
        "id": "43f513e6.278bac",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log_fan",
                "type": "str"
            }
        ],
        "x": 220,
        "y": 2471,
        "wires": [
            [
                "d78784c9.e2bbc8"
            ]
        ]
    },
    {
        "id": "10a1363d.d965ca",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log_diag",
                "type": "str"
            }
        ],
        "x": 220,
        "y": 2520,
        "wires": [
            [
                "b819b51e.7e2888"
            ]
        ]
    },
    {
        "id": "7dc0a2c4.3a9bec",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "log_weather",
                "type": "str"
            }
        ],
        "x": 241,
        "y": 2569,
        "wires": [
            [
                "5b3bd5b.489a32c"
            ]
        ]
    },
    {
        "id": "7b2578fc.c91978",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "sensor_timeout",
                "type": "str"
            }
        ],
        "x": 108,
        "y": 1848,
        "wires": [
            [
                "85e36ab1.21f178"
            ]
        ]
    },
    {
        "id": "6e7ce78e.1a42c8",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "heatcurve_info",
                "type": "str"
            }
        ],
        "x": 486,
        "y": 931,
        "wires": [
            [
                "dd0ea32d.95666",
                "136652e.48ad5ad"
            ]
        ]
    },
    {
        "id": "7fef39f9.6ecc28",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "adjust_s2",
                "type": "str"
            }
        ],
        "x": 143,
        "y": 868,
        "wires": [
            [
                "3976a9c5.383436"
            ]
        ]
    },
    {
        "id": "e0074a53.36d978",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "adjust_s1",
                "type": "str"
            }
        ],
        "x": 269,
        "y": 777,
        "wires": [
            [
                "fcb52823.5a2a88"
            ]
        ]
    },
    {
        "id": "24df5e7e.26cf62",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "lat",
                "type": "str"
            }
        ],
        "x": 682,
        "y": 455,
        "wires": [
            [
                "c559c6e7.c4b388"
            ]
        ]
    },
    {
        "id": "f0ecc454.9aff08",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "lon",
                "type": "str"
            }
        ],
        "x": 654,
        "y": 546,
        "wires": [
            [
                "3698a0bc.b86fc"
            ]
        ]
    },
    {
        "id": "2ba47fa0.3a966",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "language",
                "type": "str"
            }
        ],
        "x": 1130,
        "y": 308,
        "wires": [
            [
                "e3e6f96f.4410a8"
            ]
        ]
    },
    {
        "id": "a4e3fd6e.1230d",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "readonly",
                "type": "str"
            }
        ],
        "x": 1270,
        "y": 448,
        "wires": [
            [
                "9414a4e7.3d88c8"
            ]
        ]
    },
    {
        "id": "db88d24f.a6d11",
        "type": "subflow:f947788.96a2488",
        "z": "65e6bc5.05f2644",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "auto_update",
                "type": "str"
            }
        ],
        "x": 129,
        "y": 126,
        "wires": [
            [
                "49882825.7b48d8"
            ]
        ]
    },
    {
        "id": "46cb362b.e3bd18",
        "type": "subflow:f947788.96a2488",
        "z": "ae9d7ce8.0991c",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 472,
        "y": 210,
        "wires": [
            [
                "e5304c27.2e273"
            ]
        ]
    },
    {
        "id": "e51d88b5.82e018",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 420,
        "y": 49,
        "wires": [
            [
                "4d63b4e4.90710c"
            ]
        ]
    },
    {
        "id": "4b74034e.97b88c",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 304,
        "y": 98,
        "wires": [
            [
                "68d91eb2.2d481"
            ]
        ]
    },
    {
        "id": "441f61ff.6102a",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_very_high",
                "type": "str"
            }
        ],
        "x": 325,
        "y": 175,
        "wires": [
            [
                "c30269ad.b26128"
            ]
        ]
    },
    {
        "id": "2bf75acd.6e0c56",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_high",
                "type": "str"
            }
        ],
        "x": 325,
        "y": 224,
        "wires": [
            [
                "40c00df0.72a6e4"
            ]
        ]
    },
    {
        "id": "505cc480.19349c",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_low",
                "type": "str"
            }
        ],
        "x": 325,
        "y": 273,
        "wires": [
            [
                "b30b63c9.c96a9"
            ]
        ]
    },
    {
        "id": "cf92a1d0.7c1e4",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_very_low",
                "type": "str"
            }
        ],
        "x": 325,
        "y": 322,
        "wires": [
            [
                "b3a09f2.d70226"
            ]
        ]
    },
    {
        "id": "d0060765.8cab88",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 115,
        "y": 511,
        "wires": [
            [
                "e324889.d71b078"
            ]
        ]
    },
    {
        "id": "fb86684e.674ae8",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_very_high",
                "type": "str"
            }
        ],
        "x": 311,
        "y": 560,
        "wires": [
            [
                "d07cb165.8756a"
            ]
        ]
    },
    {
        "id": "49bcf77d.cd5d98",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_high",
                "type": "str"
            }
        ],
        "x": 311,
        "y": 609,
        "wires": [
            [
                "1bb82fc2.e8b78"
            ]
        ]
    },
    {
        "id": "a637f228.74303",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_low",
                "type": "str"
            }
        ],
        "x": 311,
        "y": 658,
        "wires": [
            [
                "de834f9d.9b477"
            ]
        ]
    },
    {
        "id": "18e6dbef.c26bc4",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_very_low",
                "type": "str"
            }
        ],
        "x": 311,
        "y": 707,
        "wires": [
            [
                "b0a104eb.836b28"
            ]
        ]
    },
    {
        "id": "ebb4c96d.141e78",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 318,
        "y": 777,
        "wires": [
            [
                "4849d6b9.2a3868"
            ]
        ]
    },
    {
        "id": "b1268c57.e21f8",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_nibe_label",
                "type": "str"
            }
        ],
        "x": 311,
        "y": 917,
        "wires": [
            [
                "54bb4384.e1936c"
            ]
        ]
    },
    {
        "id": "ca69923.4d49f7",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_nibepi_label",
                "type": "str"
            }
        ],
        "x": 311,
        "y": 959,
        "wires": [
            [
                "3925bdab.14e9a2"
            ]
        ]
    },
    {
        "id": "8f047f2c.17ca2",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_high",
                "type": "str"
            }
        ],
        "x": 1032,
        "y": 1141,
        "wires": [
            [
                "9e47d1c5.a1f6a"
            ]
        ]
    },
    {
        "id": "4d894d01.bf0bd4",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_normal",
                "type": "str"
            }
        ],
        "x": 1032,
        "y": 1190,
        "wires": [
            [
                "4a4b467b.cb3d98"
            ]
        ]
    },
    {
        "id": "a5849259.9e6af",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_low",
                "type": "str"
            }
        ],
        "x": 1032,
        "y": 1239,
        "wires": [
            [
                "64b8af88.aedae"
            ]
        ]
    },
    {
        "id": "4d67c25.01caa3c",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_very_low",
                "type": "str"
            }
        ],
        "x": 1032,
        "y": 1288,
        "wires": [
            [
                "3b93422b.85e62e"
            ]
        ]
    },
    {
        "id": "725c9eb8.7b68f",
        "type": "ui_slider",
        "z": "ae9d7ce8.0991c",
        "name": "Luftflöde Normal",
        "label": "{{msg.label}}",
        "tooltip": "",
        "group": "ad7a33f3.24adf",
        "order": 5,
        "width": "12",
        "height": "1",
        "passthru": false,
        "outs": "end",
        "topic": "fan/speed_normal",
        "min": "0",
        "max": "350",
        "step": "1",
        "x": 584,
        "y": 567,
        "wires": [
            [
                "ed6e5604.1f1578"
            ]
        ]
    },
    {
        "id": "3acfc69e.2e5b7a",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_very_high",
                "type": "str"
            }
        ],
        "x": 1032,
        "y": 1099,
        "wires": [
            [
                "eafa7076.636ee"
            ]
        ]
    },
    {
        "id": "b2b2e797.bdd858",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_info",
                "type": "str"
            }
        ],
        "x": 1109,
        "y": 49,
        "wires": [
            [
                "10389fda.d75a6"
            ]
        ]
    },
    {
        "id": "10389fda.d75a6",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "e6946a7.5e1e698",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Information",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "x": 1322,
        "y": 49,
        "wires": []
    },
    {
        "id": "c2fe36ce.9b31c8",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_now",
                "type": "str"
            }
        ],
        "x": 1046,
        "y": 154,
        "wires": [
            [
                "523b61b1.02fb1"
            ]
        ]
    },
    {
        "id": "b5708131.42abc",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_now",
                "type": "str"
            }
        ],
        "x": 1046,
        "y": 245,
        "wires": [
            [
                "800a0005.55ffc"
            ]
        ]
    },
    {
        "id": "d00a5f55.781ef",
        "type": "nibe-request",
        "z": "960078e.e3e6d88",
        "server": "844659a2.8d8508",
        "name": "Config",
        "x": 701,
        "y": 119,
        "wires": [
            [
                "91d8769c.f63f68"
            ],
            []
        ]
    },
    {
        "id": "c68fd0bd.7ff08",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_hw_settings",
                "type": "str"
            }
        ],
        "x": 1214,
        "y": 371,
        "wires": [
            [
                "298758cc.91bb28"
            ]
        ]
    },
    {
        "id": "298758cc.91bb28",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "2e9c7d75.ee6312",
        "order": 1,
        "width": "12",
        "height": "2",
        "name": "Inställningar varmvatten",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "x": 1467,
        "y": 371,
        "wires": []
    },
    {
        "id": "70e3d2df.fd511c",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_settings",
                "type": "str"
            }
        ],
        "x": 1214,
        "y": 413,
        "wires": [
            [
                "2b3f98b9.ca5488"
            ]
        ]
    },
    {
        "id": "2b3f98b9.ca5488",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "f481a5f0.f9f1c8",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Inställningar",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "x": 1427,
        "y": 413,
        "wires": []
    },
    {
        "id": "6d8f9864.7c5bd8",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_enable_hw",
                "type": "str"
            }
        ],
        "x": 1200,
        "y": 1400,
        "wires": [
            [
                "e0b7517f.586f3"
            ]
        ]
    },
    {
        "id": "f3502562.d64188",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_smart1_info",
                "type": "str"
            }
        ],
        "x": 1277,
        "y": 658,
        "wires": [
            [
                "9958a8f1.7abba8"
            ]
        ]
    },
    {
        "id": "5c8e5a10.b35014",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_sensor_info",
                "type": "str"
            }
        ],
        "x": 1410,
        "y": 301,
        "wires": [
            [
                "22fa46b9.2067fa"
            ]
        ]
    },
    {
        "id": "6c5b4fe9.8b14",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_sensor_info",
                "type": "str"
            }
        ],
        "x": 381,
        "y": 1386,
        "wires": [
            [
                "b5e41612.13ed78"
            ]
        ]
    },
    {
        "id": "93fc1b3.24e3ee8",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_s1_info",
                "type": "str"
            }
        ],
        "x": 1571,
        "y": 476,
        "wires": [
            [
                "4b98ffb1.6d6cd"
            ]
        ]
    },
    {
        "id": "4b98ffb1.6d6cd",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "1b40f24f.7b6d9e",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Elprisreglering S1",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "x": 1804,
        "y": 476,
        "wires": []
    },
    {
        "id": "c847916d.92125",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_s2_info",
                "type": "str"
            }
        ],
        "x": 1571,
        "y": 518,
        "wires": [
            [
                "2ae4da14.9b0a56"
            ]
        ]
    },
    {
        "id": "2ae4da14.9b0a56",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "94305680.d32c48",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Elprisreglering S2",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "x": 1804,
        "y": 518,
        "wires": []
    },
    {
        "id": "9a5f07b1.e95648",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "difference",
                "type": "str"
            }
        ],
        "x": 395,
        "y": 1428,
        "wires": [
            [
                "d41292d7.71f9c"
            ]
        ]
    },
    {
        "id": "e1438a5e.e99d08",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_sensor",
                "type": "str"
            }
        ],
        "x": 388,
        "y": 1477,
        "wires": [
            [
                "716b8844.bf4848"
            ]
        ]
    },
    {
        "id": "baebbfcf.16886",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "difference",
                "type": "str"
            }
        ],
        "x": 1004,
        "y": 315,
        "wires": [
            [
                "551009f1.15c058"
            ]
        ]
    },
    {
        "id": "78397971.cac8a8",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_sensor",
                "type": "str"
            }
        ],
        "x": 1312,
        "y": 126,
        "wires": [
            [
                "33724643.85cd6a"
            ]
        ]
    },
    {
        "id": "53e86819.c4da48",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_sensor_label",
                "type": "str"
            }
        ],
        "x": 675,
        "y": 497,
        "wires": [
            [
                "5b35fb44.679dc4"
            ]
        ]
    },
    {
        "id": "5cf6bf8.d338a4",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "indoor_sensor_label",
                "type": "str"
            }
        ],
        "x": 402,
        "y": 1288,
        "wires": [
            [
                "4dfc1afe.d9ca64"
            ]
        ]
    },
    {
        "id": "33b72ea6.898002",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_s1_graph",
                "type": "str"
            }
        ],
        "x": 1571,
        "y": 560,
        "wires": [
            [
                "11ed4b46.e82ea5"
            ]
        ]
    },
    {
        "id": "11ed4b46.e82ea5",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "90803197.41c34",
        "order": 1,
        "width": "12",
        "height": "1",
        "name": "Graf S1",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "x": 1774,
        "y": 560,
        "wires": []
    },
    {
        "id": "e196b987.b803d8",
        "type": "subflow:f947788.96a2488",
        "z": "960078e.e3e6d88",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "price_s2_graph",
                "type": "str"
            }
        ],
        "x": 1571,
        "y": 602,
        "wires": [
            [
                "a8246cb1.17a87"
            ]
        ]
    },
    {
        "id": "a8246cb1.17a87",
        "type": "ui_text",
        "z": "960078e.e3e6d88",
        "group": "ab2b8fca.17eca",
        "order": 1,
        "width": "12",
        "height": "1",
        "name": "Graf S2",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "x": 1774,
        "y": 602,
        "wires": []
    },
    {
        "id": "f50f82ef.da61",
        "type": "inject",
        "z": "960078e.e3e6d88",
        "name": "",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 743,
        "y": 875,
        "wires": [
            [
                "c6a13ba3.351018"
            ]
        ]
    },
    {
        "id": "c6a13ba3.351018",
        "type": "function",
        "z": "960078e.e3e6d88",
        "name": "Enable manually",
        "func": "msg = {\n    enabled:msg.payload\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 927,
        "y": 896,
        "wires": [
            [
                "ef64204.7fdb6e"
            ]
        ]
    },
    {
        "id": "d35a4dc2.16808",
        "type": "inject",
        "z": "960078e.e3e6d88",
        "name": "",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 740,
        "y": 917,
        "wires": [
            [
                "c6a13ba3.351018"
            ]
        ]
    },
    {
        "id": "c462f11.01db51",
        "type": "subflow:f947788.96a2488",
        "z": "65e6bc5.05f2644",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 451,
        "y": 140,
        "wires": [
            [
                "54623482.22352c"
            ]
        ]
    },
    {
        "id": "d6b2c164.d814d",
        "type": "subflow:f947788.96a2488",
        "z": "65e6bc5.05f2644",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "time",
                "type": "str"
            }
        ],
        "x": 108,
        "y": 686,
        "wires": [
            [
                "b71782d0.0b1ed",
                "41f84924.bc1198",
                "e8bbd657.4aa3b8",
                "176a8ef5.3e5701",
                "5662a415.06708c",
                "a5f5926b.ba0a",
                "a83973b3.c3d1e",
                "41a4486e.6ac608",
                "96e42b24.7aaa78"
            ]
        ]
    },
    {
        "id": "a63ca1a1.650e9",
        "type": "subflow:f947788.96a2488",
        "z": "65e6bc5.05f2644",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "start_heat_info",
                "type": "str"
            }
        ],
        "x": 822,
        "y": 560,
        "wires": [
            [
                "e36871c4.db782"
            ]
        ]
    },
    {
        "id": "d2d81f6.b578ce",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "home_size",
                "type": "str"
            }
        ],
        "x": 1326,
        "y": 238,
        "wires": [
            [
                "655c24ec.f9bbdc"
            ]
        ]
    },
    {
        "id": "ae840e39.79e8e",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "a8bf2b6e.6abc18",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Startsida info 2",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1325,
        "y": 70,
        "wires": []
    },
    {
        "id": "dcdbedd1.ab06a",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "start_info",
                "type": "str"
            }
        ],
        "x": 1144,
        "y": 70,
        "wires": [
            [
                "ae840e39.79e8e"
            ]
        ]
    },
    {
        "id": "8516c39f.d8ebe",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "cpr_info",
                "type": "str"
            }
        ],
        "x": 1088,
        "y": 1050,
        "wires": [
            [
                "9cdefbbf.f141f8"
            ]
        ]
    },
    {
        "id": "9cdefbbf.f141f8",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "1d61b1b5.3ea93e",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Kompressorförbrukning",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 1299,
        "y": 1050,
        "wires": []
    },
    {
        "id": "5f36060d.523928",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "4f8b35d1.5c8fec",
        "order": 1,
        "width": "12",
        "height": "4",
        "name": "Registerhantering",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 733,
        "y": 1295,
        "wires": []
    },
    {
        "id": "e1bdb302.3b92d",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "register_info",
                "type": "str"
            }
        ],
        "x": 528,
        "y": 1295,
        "wires": [
            [
                "5f36060d.523928"
            ]
        ]
    },
    {
        "id": "8e749cda.9b501",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "bd199d65.157fc",
        "order": 1,
        "width": "12",
        "height": "3",
        "name": "Datahantering",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 744,
        "y": 1617,
        "wires": []
    },
    {
        "id": "f12acdec.abfff",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "data_info",
                "type": "str"
            }
        ],
        "x": 556,
        "y": 1596,
        "wires": [
            [
                "8e749cda.9b501"
            ]
        ]
    },
    {
        "id": "a845852f.e7dfd8",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "remove_register",
                "type": "str"
            }
        ],
        "x": 822,
        "y": 1463,
        "wires": [
            [
                "a06c6ec7.72b5e"
            ]
        ]
    },
    {
        "id": "b2f9e5a5.7c5a98",
        "type": "subflow:f947788.96a2488",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 738,
        "y": 77,
        "wires": [
            [
                "50a77016.79477"
            ]
        ]
    },
    {
        "id": "5eee861c.b04648",
        "type": "subflow:f947788.96a2488",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hw_auto_lux_info",
                "type": "str"
            }
        ],
        "x": 395,
        "y": 574,
        "wires": [
            [
                "a0c72050.1c73a"
            ]
        ]
    },
    {
        "id": "318a115.e00d6ee",
        "type": "subflow:f947788.96a2488",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hw_priority_info",
                "type": "str"
            }
        ],
        "x": 395,
        "y": 658,
        "wires": [
            [
                "bc411f62.b5f87"
            ]
        ]
    },
    {
        "id": "f9059587.51b5e8",
        "type": "subflow:f947788.96a2488",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hw_diff",
                "type": "str"
            }
        ],
        "x": 598,
        "y": 378,
        "wires": [
            [
                "4fefdad9.0edc14"
            ]
        ]
    },
    {
        "id": "c36bde17.a828b",
        "type": "subflow:f947788.96a2488",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hw_time",
                "type": "str"
            }
        ],
        "x": 598,
        "y": 427,
        "wires": [
            [
                "61c95762.533568"
            ]
        ]
    },
    {
        "id": "299b9f64.3af8c",
        "type": "subflow:f947788.96a2488",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "update_run",
                "type": "str"
            }
        ],
        "x": 332,
        "y": 252,
        "wires": [
            [
                "cabc9c9b.934ca",
                "9b8580ac.45b4c"
            ]
        ]
    },
    {
        "id": "4d33501c.dc725",
        "type": "subflow:f947788.96a2488",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "enable",
                "type": "str"
            }
        ],
        "x": 738,
        "y": 140,
        "wires": [
            [
                "7fdfc0b5.b1058"
            ]
        ]
    },
    {
        "id": "ccf9ffc7.3e9b9",
        "type": "ui_text",
        "z": "fa4686d6.c21688",
        "group": "bcb5f9e4.9bc858",
        "order": 8,
        "width": "12",
        "height": "7",
        "name": "Automatisk tillfällig lyx info 2",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 645,
        "y": 616,
        "wires": []
    },
    {
        "id": "1253ddad.094b02",
        "type": "subflow:f947788.96a2488",
        "z": "fa4686d6.c21688",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "hw_auto_lux_info2",
                "type": "str"
            }
        ],
        "x": 395,
        "y": 616,
        "wires": [
            [
                "ccf9ffc7.3e9b9"
            ]
        ]
    },
    {
        "id": "2b95583f.822ab8",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "information",
                "type": "str"
            }
        ],
        "x": 168,
        "y": 4403,
        "wires": [
            [
                "6a3889c7.0e84f8"
            ]
        ]
    },
    {
        "id": "6a3889c7.0e84f8",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "4a7ab836.172ae8",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Information info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 381,
        "y": 4403,
        "wires": []
    },
    {
        "id": "70f38cc5.e2cb94",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "system",
                "type": "str"
            }
        ],
        "x": 171,
        "y": 4459,
        "wires": [
            [
                "46c1d51c.5a447c"
            ]
        ]
    },
    {
        "id": "46c1d51c.5a447c",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "da3c0db0.9c6aa",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "System info",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 374,
        "y": 4459,
        "wires": []
    },
    {
        "id": "4dd76ed6.7c0aa",
        "type": "ui_text",
        "z": "b7f67da0.fbf1",
        "group": "da1887c7.ca0d38",
        "order": 6,
        "width": "12",
        "height": "5",
        "name": "Förord",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-left",
        "x": 637,
        "y": 4319,
        "wires": []
    },
    {
        "id": "62f6134e.ee710c",
        "type": "subflow:f947788.96a2488",
        "z": "b7f67da0.fbf1",
        "name": "",
        "env": [
            {
                "name": "Name",
                "value": "intro",
                "type": "str"
            }
        ],
        "x": 458,
        "y": 4270,
        "wires": [
            [
                "4dd76ed6.7c0aa"
            ]
        ]
    }
]